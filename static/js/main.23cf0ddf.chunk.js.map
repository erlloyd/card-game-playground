{"version":3,"sources":["constants/card-constants.ts","Card.tsx","ContextMenu.tsx","DeckLoader.tsx","EncounterLoader.tsx","features/cards-data/cards-data.selectors.ts","EncounterLoaderContainer.tsx","TopLayer.tsx","utilities/geo.ts","App.tsx","features/cards-data/cards-data.slice.ts","features/cards-data/initialState.ts","features/cards/cards.async-thunks.ts","features/cards/cards.selectors.ts","store/localStorage.ts","features/cards/initialState.ts","store/global.actions.ts","features/cards/cards.slice.ts","features/game/game.selectors.ts","features/game/initialState.ts","features/game/game.slice.ts","AppContainer.tsx","serviceWorker.ts","store/rootReducer.ts","store/configureStore.ts","index.tsx"],"names":["cardConstants","HORIZONTAL_TYPE_CODES","Card","props","img","stunnedImg","confusedImg","toughImg","damageImg","threatImg","genericImg","unmounted","renderAnimated","renderAnimatedCard","heightToUse","widthToUse","native","to","rotation","exhausted","animatedProps","Rect","cornerRadius","x","y","width","height","offset","stroke","dropTarget","strokeWidth","fillPatternImage","fillPatternScaleX","state","imageLoaded","naturalWidth","fillPatternScaleY","naturalHeight","shadowBlur","dragging","selected","opacity","isGhost","draggable","onDragStart","handleDragStart","onDragMove","handleDragMove","onDragEnd","handleDragEnd","onDblClick","handleDoubleClick","onDblTap","onClick","handleClick","onTap","onMouseDown","handleMouseDown","onTouchStart","onMouseOver","handleMouseOver","onMouseOut","handleMouseOut","onContextMenu","handleContextMenu","id","renderUnanimatedCard","scale","getScale","card","fillPatternRotation","shouldRenderImageHorizontal","typeCode","cardStackOffset","cardStack","numCardsInStack","fill","shouldRenderStunned","cardState","stunned","tokenImagesLoaded","getTokenInSlot","confused","tough","event","dx","target","dy","cancelBubble","handleHover","handleHoverLeave","localStorage","getItem","prevImgUrl","imgUrl","Image","onload","setState","src","process","prevProps","prevState","this","loading","renderCard","shouldRender","slot","dimensions","stunnedOffset","type","typeCodes","includes","plainCardBack","widthHorizontal","heightHorizontal","Component","ContextMenu","preventDefault","handleContextItemClicked","item","action","contextItemClicked","items","hideContextMenu","menuStyle","top","position","left","className","style","map","i","index","label","DeckLoader","stopPropagation","handleKeyDown","key","loadDeckId","currentTarget","value","onKeyDown","EncounterLoader","handleSelected","_event","loadCards","cards","c","code","Autocomplete","options","encounterData","getOptionLabel","option","setData","name","onChange","renderInput","params","TextField","variant","getCardsData","cardsData","getCardsDataEntities","createSelector","entities","encounterEntities","getCardsDataHeroEntities","getCardsDataEncounterEntities","getCardsDataSetData","getCardsDataEncounterEntitiesBySetCode","setTypesEncounters","Object","values","forEach","encounterCard","setCode","set_code","push","entries","filter","set","setTypeCode","sort","a","b","EncounterLoaderContainer","connect","TopLayer","containerStyle","completed","children","getDistance","point1","point2","deltaX","deltaY","Math","sqrt","App","stage","noOp","renderEmptyMessage","length","renderContextMenu","showContextMenu","containerRect","container","getBoundingClientRect","pointerPosition","contextMenuPosition","Error","contextMenuItems","clearContextMenu","renderDeckImporter","showDeckImporter","deckImporterPosition","clearDeckImporter","handleImportDeck","getRelativePositionFromTarget","renderEncounterImporter","showEncounterImporter","encounterImporterPosition","pos","clearEncounterImporter","handleLoadEncounter","addCardStack","cardJsonIds","fetchDecklistById","decklistId","handleStageClickOrTap","mousePos","panMode","selectStartPos","unselectAllCards","handleWheel","evt","oldScale","gameState","stageZoom","pointer","getPointerPosition","mousePointTo","newScale","updateZoom","newPos","updatePosition","handleCardContextMenu","cardId","selectCard","find","menuItems","flipCards","shuffleStack","handleSelectAndExhaust","exhaustCard","handleCardDragStart","splitTopCard","draggingCard","hasStack","upperRightPoint","startCardMove","handleKeyPress","which","keyCode","togglePanMode","getRawPreviewCardPosition","pointerPos","screenMidPointX","window","innerWidth","posParam","transform","getAbsoluteTransform","copy","invert","point","selecting","getSelectionRectInfo","selectRect","abs","handleMouseUp","drewASelectionRect","selectedCards","reduce","currSelectedCards","Intersects","selectMultipleCards","ids","handleMouseMove","resetApp","getCardType","keys","jsonId","type_code","getImgUrl","topCardData","bottomCardData","faceup","back_link","double_sided","octgn_id","loadCardsData","staticCards","dropTargetCard","cardMove","endCardMove","toggleSelectCard","hoverCard","hoverLeaveCard","tokens","damage","threat","generic","ghostCards","movingCards","previewCards","showPreview","previewCard","rawPos","previewPos","tabIndex","onKeyPress","ref","stagePosition","innerHeight","onMouseUp","onMouseMove","onTouchMove","onWheel","concat","cardsDataSlice","createSlice","initialState","reducers","heroPacks","PackData","encounterPacks","pack","console","error","SetData","card_set_type_code","actions","createAsyncThunk","payload","thunkApi","axios","get","response","getState","heroCardsData","heroSetCode","data","investigator_code","encounterCardsData","heroObligationDeck","log","heroEncounterDeck","relatedEncounterDeck","relatedObligationDeck","getCards","shouldShowPreview","every","getPanMode","loadState","serializedState","JSON","parse","err","localStorageState","createAction","getCardStackWithId","mutateCardWithId","callback","cardToUpdate","cardsSlice","unselectCard","cardToStartMoving","cardToMove","topCard","shift","newCard","assign","uuidv4","foreachSelectedCard","primaryCard","movedCards","possibleDropTargets","foreachUnselectedCard","distance","c1","c2","movedCard","splice","indexOf","dropTargetCards","cardToPreview","reverse","array","temporaryValue","randomIndex","currentIndex","floor","random","shuffle","resetCards","newStack","extraReducers","builder","addCase","fulfilled","heroCard","mainDeckStack","slots","cardDetails","Array","from","cardPadding","newDeck","encounterDeck","obligationDeck","getGame","game","gameSlice","AppContainer","Boolean","location","hostname","match","rootReducer","combineReducers","customizedMiddleware","getDefaultMiddleware","thunk","immutableCheck","serializableCheck","store","rtkConfigureStore","reducer","middleware","subscribe","throttle","blacklistStateKeys","stringify","setItem","saveState","configureStore","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.23cf0ddf.chunk.js","sourcesContent":["export const cardConstants = {\n  CARD_HEIGHT: 209,\n  CARD_WIDTH: 150,\n  CARD_PREVIEW_HEIGHT: 418,\n  CARD_PREVIEW_WIDTH: 300,\n};\n","// tslint:disable:no-console\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport * as React from \"react\";\nimport { Component } from \"react\";\nimport { Rect } from \"react-konva\";\nimport { animated, Spring } from \"react-spring/renderprops-konva\";\nimport { cardConstants } from \"./constants/card-constants\";\n// import Portal from './Portal';\n// import ContextMenu from './ContextMenu';\n\nexport const HORIZONTAL_TYPE_CODES = [\"main_scheme\", \"side_scheme\"];\n\nexport interface CardTokens {\n  damage: number;\n  threat: number;\n  generic: number;\n}\n\nexport interface CardUIState {\n  stunned: boolean;\n  confused: boolean;\n  tough: boolean;\n  tokens: CardTokens;\n}\n\ninterface IProps {\n  dragging: boolean;\n  exhausted: boolean;\n  cardState?: CardUIState;\n  fill: string;\n  handleClick?: (id: string) => void;\n  handleDoubleClick?: (id: string) => void;\n  handleDragStart?: (id: string, event: KonvaEventObject<DragEvent>) => void;\n  handleDragMove?: (info: { id: string; dx: number; dy: number }) => void;\n  handleDragEnd?: (id: string) => void;\n  handleHover?: (id: string) => void;\n  handleHoverLeave?: (id: string) => void;\n  id: string;\n  selected: boolean;\n  dropTarget?: boolean;\n  x: number;\n  y: number;\n  width?: number;\n  height?: number;\n  imgUrl: string;\n  isGhost?: boolean;\n  numCardsInStack?: number;\n  typeCode?: string;\n  faceup: boolean;\n  handleContextMenu?: (\n    id: string,\n    event: KonvaEventObject<PointerEvent>\n  ) => void;\n}\n\ninterface IState {\n  imageLoaded: boolean;\n  prevImgUrl: string;\n  tokenImagesLoaded: {\n    stunned: boolean;\n    confused: boolean;\n    tough: boolean;\n  };\n}\n\nclass Card extends Component<IProps, IState> {\n  // tslint:disable-next-line:member-access\n  static getDerivedStateFromProps(props: IProps, state: IState): IState | null {\n    if (props.imgUrl !== state.prevImgUrl) {\n      return {\n        imageLoaded: false,\n        prevImgUrl: props.imgUrl,\n        tokenImagesLoaded: {\n          stunned: state.tokenImagesLoaded.stunned,\n          confused: state.tokenImagesLoaded.confused,\n          tough: state.tokenImagesLoaded.tough,\n        },\n      };\n    }\n    // No state update necessary\n    return null;\n  }\n\n  private img: HTMLImageElement;\n  private stunnedImg: HTMLImageElement;\n  private confusedImg: HTMLImageElement;\n  private toughImg: HTMLImageElement;\n  private damageImg: HTMLImageElement;\n  private threatImg: HTMLImageElement;\n  private genericImg: HTMLImageElement;\n  private unmounted: boolean;\n  private renderAnimated: boolean = false;\n\n  constructor(props: IProps) {\n    super(props);\n\n    if (localStorage.getItem(\"__render_animated__\")) {\n      this.renderAnimated = true;\n    }\n\n    this.unmounted = true;\n\n    this.state = {\n      imageLoaded: false,\n      prevImgUrl: this.props.imgUrl,\n      tokenImagesLoaded: {\n        stunned: false,\n        confused: false,\n        tough: false,\n      },\n    };\n\n    this.img = new Image();\n    this.stunnedImg = new Image();\n    this.confusedImg = new Image();\n    this.toughImg = new Image();\n    this.damageImg = new Image();\n    this.threatImg = new Image();\n    this.genericImg = new Image();\n\n    // When the image loads, set a flag in the state\n    this.img.onload = () => {\n      if (!this.unmounted) {\n        this.setState({\n          imageLoaded: true,\n        });\n      }\n    };\n\n    if (props.imgUrl) {\n      this.img.src = props.imgUrl;\n    }\n\n    // STUNNED\n    this.stunnedImg.onload = () => {\n      if (!this.unmounted) {\n        this.setState({\n          tokenImagesLoaded: {\n            stunned: true,\n            confused: this.state.tokenImagesLoaded.confused,\n            tough: this.state.tokenImagesLoaded.tough,\n          },\n        });\n      }\n    };\n\n    if (!!props.cardState?.stunned) {\n      this.stunnedImg.src =\n        process.env.PUBLIC_URL + \"/images/standard/stunned.png\";\n    }\n\n    // CONFUSED\n    this.confusedImg.onload = () => {\n      if (!this.unmounted) {\n        this.setState({\n          tokenImagesLoaded: {\n            stunned: this.state.tokenImagesLoaded.stunned,\n            confused: true,\n            tough: this.state.tokenImagesLoaded.tough,\n          },\n        });\n      }\n    };\n\n    if (!!props.cardState?.confused) {\n      this.confusedImg.src =\n        process.env.PUBLIC_URL + \"/images/standard/confused.png\";\n    }\n\n    // TOUGH\n    this.toughImg.onload = () => {\n      if (!this.unmounted) {\n        this.setState({\n          tokenImagesLoaded: {\n            stunned: this.state.tokenImagesLoaded.stunned,\n            confused: this.state.tokenImagesLoaded.confused,\n            tough: true,\n          },\n        });\n      }\n    };\n\n    if (!!props.cardState?.tough) {\n      this.toughImg.src = process.env.PUBLIC_URL + \"/images/standard/tough.png\";\n    }\n  }\n\n  public componentDidUpdate(prevProps: IProps, prevState: IState) {\n    if (\n      !this.state.imageLoaded &&\n      this.props.imgUrl &&\n      this.props.imgUrl !== this.img.src\n    ) {\n      this.img.src = this.props.imgUrl;\n    }\n\n    // STUNNED\n    if (\n      !this.stunnedImg.loading &&\n      !prevProps.cardState?.stunned &&\n      !!this.props.cardState?.stunned\n    ) {\n      this.stunnedImg.src =\n        process.env.PUBLIC_URL + \"/images/standard/stunned.png\";\n    }\n\n    // CONFUSED\n    if (\n      !this.confusedImg.loading &&\n      !prevProps.cardState?.confused &&\n      !!this.props.cardState?.confused\n    ) {\n      this.confusedImg.src =\n        process.env.PUBLIC_URL + \"/images/standard/confused.png\";\n    }\n\n    // TOUGH\n    if (\n      !this.toughImg.loading &&\n      !prevProps.cardState?.tough &&\n      !!this.props.cardState?.tough\n    ) {\n      this.toughImg.src = process.env.PUBLIC_URL + \"/images/standard/tough.png\";\n    }\n  }\n\n  public componentDidMount() {\n    this.unmounted = false;\n  }\n\n  public componentWillUnmount() {\n    this.unmounted = true;\n  }\n\n  public render() {\n    return this.state.imageLoaded ? this.renderCard() : null;\n  }\n\n  private renderCard() {\n    const heightToUse = this.props.height || cardConstants.CARD_HEIGHT;\n    const widthToUse = this.props.width || cardConstants.CARD_WIDTH;\n\n    return this.renderAnimated\n      ? this.renderAnimatedCard(heightToUse, widthToUse)\n      : this.renderUnanimatedCard(heightToUse, widthToUse);\n  }\n\n  private renderAnimatedCard = (heightToUse: number, widthToUse: number) => {\n    return (\n      <Spring\n        key={`${this.props.id}-card`}\n        native={true}\n        to={{\n          rotation: this.props.exhausted ? 90 : 0,\n        }}\n      >\n        {(animatedProps: any) => (\n          <animated.Rect\n            {...animatedProps}\n            cornerRadius={9}\n            x={this.props.x}\n            y={this.props.y}\n            width={widthToUse}\n            height={heightToUse}\n            offset={{\n              x: widthToUse / 2,\n              y: heightToUse / 2,\n            }}\n            stroke={this.props.dropTarget ? \"blue\" : \"\"}\n            strokeWidth={this.props.dropTarget ? 2 : 0}\n            fillPatternImage={this.img}\n            fillPatternScaleX={\n              this.state.imageLoaded\n                ? widthToUse / this.img.naturalWidth\n                : widthToUse\n            }\n            fillPatternScaleY={\n              this.state.imageLoaded\n                ? heightToUse / this.img.naturalHeight\n                : heightToUse\n            }\n            shadowBlur={this.props.dragging ? 10 : this.props.selected ? 5 : 0}\n            opacity={this.props.isGhost ? 0.5 : 1}\n            draggable={true}\n            onDragStart={this.handleDragStart}\n            onDragMove={this.handleDragMove}\n            onDragEnd={this.handleDragEnd}\n            onDblClick={this.handleDoubleClick}\n            onDblTap={this.handleDoubleClick}\n            onClick={this.handleClick}\n            onTap={this.handleClick}\n            onMouseDown={this.handleMouseDown}\n            onTouchStart={this.handleMouseDown}\n            onMouseOver={this.handleMouseOver}\n            onMouseOut={this.handleMouseOut}\n            onContextMenu={this.handleContextMenu}\n          />\n        )}\n      </Spring>\n    );\n  };\n\n  private renderUnanimatedCard = (heightToUse: number, widthToUse: number) => {\n    const scale = this.getScale(widthToUse, heightToUse);\n    const offset = {\n      x: widthToUse / 2,\n      y: heightToUse / 2,\n    };\n\n    const card = (\n      <Rect\n        key={`${this.props.id}-card`}\n        native={true}\n        rotation={this.props.exhausted ? 90 : 0}\n        cornerRadius={9}\n        x={this.props.x}\n        y={this.props.y}\n        width={widthToUse}\n        height={heightToUse}\n        offset={offset}\n        stroke={this.props.dropTarget ? \"blue\" : \"\"}\n        strokeWidth={this.props.dropTarget ? 2 : 0}\n        fillPatternRotation={\n          this.shouldRenderImageHorizontal(\n            this.props.typeCode || \"\",\n            HORIZONTAL_TYPE_CODES\n          )\n            ? 270\n            : 0\n        }\n        fillPatternImage={this.img}\n        fillPatternScaleX={scale.width}\n        fillPatternScaleY={scale.height}\n        shadowBlur={this.props.dragging ? 10 : this.props.selected ? 5 : 0}\n        opacity={this.props.isGhost ? 0.5 : 1}\n        draggable={true}\n        onDragStart={this.handleDragStart}\n        onDragMove={this.handleDragMove}\n        onDragEnd={this.handleDragEnd}\n        onDblClick={this.handleDoubleClick}\n        onDblTap={this.handleDoubleClick}\n        onClick={this.handleClick}\n        onTap={this.handleClick}\n        onMouseDown={this.handleMouseDown}\n        onTouchStart={this.handleMouseDown}\n        onMouseOver={this.handleMouseOver}\n        onMouseOut={this.handleMouseOut}\n        onContextMenu={this.handleContextMenu}\n      />\n    );\n\n    const cardStackOffset = {\n      x: offset.x + 4,\n      y: offset.y - 4,\n    };\n\n    const cardStack =\n      (this.props.numCardsInStack || 1) > 1 ? (\n        <Rect\n          key={`${this.props.id}-cardStack`}\n          native={true}\n          rotation={this.props.exhausted ? 90 : 0}\n          cornerRadius={[9, 9, 9, 9]}\n          x={this.props.x}\n          y={this.props.y}\n          width={widthToUse}\n          height={heightToUse}\n          offset={cardStackOffset}\n          opacity={this.props.isGhost ? 0.5 : 1}\n          fill={\"gray\"}\n          shadowBlur={this.props.dragging ? 10 : this.props.selected ? 5 : 0}\n        />\n      ) : null;\n\n    const shouldRenderStunned =\n      !!this.props.cardState?.stunned && this.state.tokenImagesLoaded.stunned;\n\n    const stunnedToken = this.getTokenInSlot(\n      shouldRenderStunned,\n      this.stunnedImg,\n      offset,\n      0\n    );\n    const confusedToken = this.getTokenInSlot(\n      !!this.props.cardState?.confused && this.state.tokenImagesLoaded.confused,\n      this.confusedImg,\n      offset,\n      1\n    );\n    const toughToken = this.getTokenInSlot(\n      !!this.props.cardState?.tough && this.state.tokenImagesLoaded.tough,\n      this.toughImg,\n      offset,\n      2\n    );\n\n    return [cardStack, card, stunnedToken, confusedToken, toughToken];\n  };\n\n  private getTokenInSlot(\n    shouldRender: boolean,\n    img: HTMLImageElement,\n    offset: { x: number; y: number },\n    slot: 0 | 1 | 2\n  ) {\n    const dimensions = {\n      width: img.naturalWidth / 2,\n      height: img.naturalHeight / 2,\n    };\n\n    const stunnedOffset = {\n      x: offset.x - cardConstants.CARD_WIDTH + dimensions.width / 2,\n      y: offset.y - dimensions.height * slot - 5 * (slot + 1),\n    };\n\n    return shouldRender ? (\n      <Rect\n        key={`${this.props.id}-status${slot}`}\n        native={true}\n        cornerRadius={8}\n        x={this.props.x}\n        y={this.props.y}\n        width={dimensions.width}\n        height={dimensions.height}\n        fillPatternScaleX={0.5}\n        fillPatternScaleY={0.5}\n        offset={stunnedOffset}\n        fillPatternImage={img}\n      />\n    ) : null;\n  }\n\n  private shouldRenderImageHorizontal(\n    type: string,\n    typeCodes: string[]\n  ): boolean {\n    return typeCodes.includes(type) && !this.plainCardBack;\n  }\n\n  private get plainCardBack() {\n    return (\n      this.props.imgUrl?.includes(\"standard\") &&\n      this.props.imgUrl?.includes(\"_back\")\n    );\n  }\n\n  private getScale(widthToUse: number, heightToUse: number) {\n    const width = this.state.imageLoaded\n      ? widthToUse / this.img.naturalWidth\n      : widthToUse;\n\n    const widthHorizontal = this.state.imageLoaded\n      ? heightToUse / this.img.naturalWidth\n      : widthToUse;\n\n    const height = this.state.imageLoaded\n      ? heightToUse / this.img.naturalHeight\n      : heightToUse;\n\n    const heightHorizontal = this.state.imageLoaded\n      ? widthToUse / this.img.naturalHeight\n      : heightToUse;\n\n    return this.shouldRenderImageHorizontal(\n      this.props.typeCode || \"\",\n      HORIZONTAL_TYPE_CODES\n    )\n      ? { width: widthHorizontal, height: heightHorizontal }\n      : { width, height };\n  }\n\n  private handleContextMenu = (event: KonvaEventObject<PointerEvent>): void => {\n    if (!!this.props.handleContextMenu) {\n      this.props.handleContextMenu(this.props.id, event);\n    }\n  };\n\n  private handleDoubleClick = () => {\n    if (this.props.handleDoubleClick) {\n      this.props.handleDoubleClick(this.props.id);\n    }\n  };\n\n  private handleDragStart = (event: KonvaEventObject<DragEvent>) => {\n    if (this.props.handleDragStart) {\n      this.props.handleDragStart(this.props.id, event);\n    }\n  };\n\n  private handleDragMove = (event: any) => {\n    if (this.props.handleDragMove) {\n      this.props.handleDragMove({\n        id: this.props.id,\n        dx: event.target.x() - this.props.x,\n        dy: event.target.y() - this.props.y,\n      });\n    }\n  };\n\n  private handleDragEnd = () => {\n    if (this.props.handleDragEnd && this.props.dragging) {\n      this.props.handleDragEnd(this.props.id);\n    }\n  };\n\n  private handleClick = (event: any) => {\n    if (this.props.handleClick) {\n      this.props.handleClick(this.props.id);\n      event.cancelBubble = true;\n    }\n  };\n\n  private handleMouseDown = (event: any) => {\n    event.cancelBubble = true;\n  };\n\n  private handleMouseOver = () => {\n    if (this.props.handleHover) {\n      this.props.handleHover(this.props.id);\n    }\n  };\n\n  private handleMouseOut = () => {\n    if (this.props.handleHoverLeave) {\n      this.props.handleHoverLeave(this.props.id);\n    }\n  };\n}\n\nexport default Card;\n","import { Vector2d } from \"konva/types/types\";\nimport * as React from \"react\";\nimport { Component } from \"react\";\n\nexport interface ContextMenuItem {\n  label: string;\n  action: () => void;\n}\n\ninterface IProps {\n  position: Vector2d;\n  items: ContextMenuItem[];\n  contextItemClicked?: (item: ContextMenuItem) => void;\n  hideContextMenu: () => void;\n}\n\nclass ContextMenu extends Component<IProps> {\n  render() {\n    const menuStyle: React.CSSProperties = {\n      top: `${this.props.position.y + 8}px`,\n      left: `${this.props.position.x + 8}px`,\n    };\n\n    return (\n      <div\n        id=\"context-menu-layer\"\n        onContextMenu={this.preventDefault}\n        onClick={this.props.hideContextMenu}\n      >\n        <div\n          className=\"context-menu\"\n          style={menuStyle}\n          onContextMenu={this.preventDefault}\n          onClick={this.props.hideContextMenu}\n        >\n          {this.props.items.map((i, index) => (\n            <div key={`context-menu-item-${index}`}>\n              <button\n                className=\"context-menu-item\"\n                onContextMenu={this.preventDefault}\n                onClick={this.handleContextItemClicked(i)}\n              >\n                {i.label}\n              </button>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  private preventDefault = (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => {\n    event.preventDefault();\n  };\n\n  private handleContextItemClicked = (item: ContextMenuItem) => () => {\n    item.action();\n    if (!!this.props.contextItemClicked) {\n      this.props.contextItemClicked(this.props.items[0]);\n    }\n    this.props.hideContextMenu();\n  };\n}\n\nexport default ContextMenu;\n","import { Component } from \"react\";\nimport * as React from \"react\";\n\ninterface IProps {\n  loadDeckId: (id: number) => void;\n}\n\nclass DeckLoader extends Component<IProps> {\n  render() {\n    return (\n      <input\n        onKeyDown={this.handleKeyDown}\n        onClick={this.cancelBubble}\n        type=\"number\"\n      ></input>\n    );\n  }\n\n  private cancelBubble = (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    event.stopPropagation();\n  };\n\n  private handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Enter\") {\n      this.props.loadDeckId(+event.currentTarget.value);\n    }\n  };\n}\n\nexport default DeckLoader;\n","import { Component } from \"react\";\nimport * as React from \"react\";\nimport { IEncounterEntity } from \"./features/cards-data/cards-data.selectors\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\ninterface IProps {\n  encounterData: IEncounterEntity[];\n  loadCards: (cards: string[]) => void;\n}\n\nclass EncounterLoader extends Component<IProps> {\n  render() {\n    // console.log(this.props.encounterData);\n    return (\n      <div onClick={this.cancelBubble}>\n        <Autocomplete\n          id=\"encounter-loader-combobox\"\n          options={this.props.encounterData || []}\n          getOptionLabel={(option) => option.setData.name}\n          style={{ width: 300 }}\n          onChange={this.handleSelected}\n          renderInput={(params) => (\n            <TextField {...params} label=\"Encounter Set\" variant=\"outlined\" />\n          )}\n        />\n      </div>\n    );\n  }\n\n  private handleSelected = (_event: any, value: IEncounterEntity | null) => {\n    if (!!value) {\n      this.props.loadCards(value.cards.map((c) => c.code));\n    }\n  };\n\n  private cancelBubble = (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    event.stopPropagation();\n  };\n}\n\nexport default EncounterLoader;\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport { CardData } from \"../../external-api/marvel-card-data\";\nimport { RootState } from \"../../store/rootReducer\";\nimport { Set } from \"../cards-data/initialState\";\n\nexport interface IEncounterEntity {\n  setCode: string;\n  setData: Set;\n  cards: CardData[];\n}\n\nexport const getCardsData = (state: RootState) => state.cardsData;\n\nexport const getCardsDataEntities = createSelector(\n  getCardsData,\n  (cardsData) => {\n    return { ...cardsData.entities, ...cardsData.encounterEntities };\n  }\n);\n\nexport const getCardsDataHeroEntities = createSelector(\n  getCardsData,\n  (cardsData) => {\n    return cardsData.entities;\n  }\n);\n\nexport const getCardsDataEncounterEntities = createSelector(\n  getCardsData,\n  (cardsData) => {\n    return cardsData.encounterEntities;\n  }\n);\n\nexport const getCardsDataSetData = createSelector(getCardsData, (cardsData) => {\n  return cardsData.setData;\n});\n\nexport const getCardsDataEncounterEntitiesBySetCode = createSelector(\n  getCardsDataEncounterEntities,\n  getCardsDataSetData,\n  (encounterEntities, setData): IEncounterEntity[] => {\n    const setTypesEncounters: { [key: string]: CardData[] } = {};\n\n    Object.values(encounterEntities).forEach((encounterCard) => {\n      const setCode = encounterCard.set_code || \"unknown\";\n      if (!!setTypesEncounters[setCode]) {\n        setTypesEncounters[setCode].push(encounterCard);\n      } else {\n        setTypesEncounters[setCode] = [encounterCard];\n      }\n    });\n\n    return Object.entries(setTypesEncounters)\n      .map(([key, value]) => ({\n        setCode: key,\n        setData: setData[key],\n        cards: value,\n      }))\n      .filter(\n        (set) =>\n          set.setData.setTypeCode !== \"nemesis\" &&\n          set.setData.setTypeCode !== \"hero\"\n      )\n      .sort((a, b) => (a.setData.name > b.setData.name ? 1 : -1));\n  }\n);\n","import { connect } from \"react-redux\";\nimport EncounterLoader from \"./EncounterLoader\";\nimport { getCardsDataEncounterEntitiesBySetCode } from \"./features/cards-data/cards-data.selectors\";\n\nimport { RootState } from \"./store/rootReducer\";\n\nconst mapStateToProps = (state: RootState) => {\n  return {\n    encounterData: getCardsDataEncounterEntitiesBySetCode(state),\n  };\n};\n\nconst EncounterLoaderContainer = connect(mapStateToProps, {})(EncounterLoader);\n\nexport default EncounterLoaderContainer;\n","import { Vector2d } from \"konva/types/types\";\nimport * as React from \"react\";\nimport { Component } from \"react\";\nimport \"./TopLayer.scss\";\n\ninterface IProps {\n  position: Vector2d;\n  completed: () => void;\n}\n\nclass TopLayer extends Component<IProps> {\n  render() {\n    const containerStyle: React.CSSProperties = {\n      top: `${this.props.position.y + 8}px`,\n      left: `${this.props.position.x + 8}px`,\n    };\n    return (\n      <div\n        id=\"top-layer\"\n        onClick={this.props.completed}\n        onContextMenu={this.preventDefault}\n      >\n        <div\n          className=\"top-layer-content-wrapper\"\n          style={containerStyle}\n          onContextMenu={this.preventDefault}\n          onClick={this.props.completed}\n        >\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n\n  private preventDefault = (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => {\n    event.preventDefault();\n  };\n}\n\nexport default TopLayer;\n","import { Vector2d } from \"konva/types/types\";\n\nexport const getDistance = (point1: Vector2d, point2: Vector2d): number => {\n  const deltaX = point1.x - point2.x;\n  const deltaY = point1.y - point2.y;\n  return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n};\n","import * as Intersects from \"intersects\";\nimport Konva from \"konva\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport { Vector2d } from \"konva/types/types\";\nimport * as React from \"react\";\nimport { Component } from \"react\";\nimport { Layer, Rect, Stage } from \"react-konva\";\nimport \"./App.scss\";\nimport Card, { HORIZONTAL_TYPE_CODES } from \"./Card\";\nimport { cardConstants } from \"./constants/card-constants\";\nimport ContextMenu, { ContextMenuItem } from \"./ContextMenu\";\nimport DeckLoader from \"./DeckLoader\";\nimport EncounterLoaderContainer from \"./EncounterLoaderContainer\";\nimport { ICardData } from \"./features/cards-data/initialState\";\nimport { ICardsState, ICardStack } from \"./features/cards/initialState\";\nimport { IGameState } from \"./features/game/initialState\";\nimport TopLayer from \"./TopLayer\";\nimport { getDistance } from \"./utilities/geo\";\n\nconst SCALE_BY = 1.02;\n\ninterface IProps {\n  cards: ICardsState;\n  cardsData: ICardData;\n  gameState: IGameState;\n  showPreview: boolean;\n  panMode: boolean;\n  cardMove: (info: { id: string; dx: number; dy: number }) => void;\n  endCardMove: (id: string) => void;\n  exhaustCard: (id: string) => void;\n  selectCard: (id: string) => void;\n  unselectCard: (id: string) => void;\n  toggleSelectCard: (id: string) => void;\n  startCardMove: (payload: { id: string; splitTopCard: boolean }) => void;\n  unselectAllCards: () => void;\n  selectMultipleCards: (cards: { ids: string[] }) => void;\n  hoverCard: (id: string) => void;\n  hoverLeaveCard: (id: string) => void;\n  togglePanMode: () => void;\n  flipCards: () => void;\n  loadCardsData: () => void;\n  shuffleStack: (id: string) => void;\n  fetchDecklistById: (payload: {\n    decklistId: number;\n    position: Vector2d;\n  }) => void;\n  updateZoom: (zoom: Vector2d) => void;\n  updatePosition: (pos: Vector2d) => void;\n  resetApp: () => void;\n  addCardStack: (payload: {\n    cardJsonIds: string[];\n    position: Vector2d;\n  }) => void;\n}\n\ninterface IState {\n  drewASelectionRect: boolean;\n  selectRect: {\n    height: number;\n    width: number;\n  };\n  selectStartPos: {\n    x: number;\n    y: number;\n  };\n  selecting: boolean;\n  showContextMenu: boolean;\n  contextMenuPosition: Vector2d | null;\n  contextMenuItems: ContextMenuItem[];\n  showDeckImporter: boolean;\n  deckImporterPosition: Vector2d | null;\n  showEncounterImporter: boolean;\n  encounterImporterPosition: Vector2d | null;\n}\nclass App extends Component<IProps, IState> {\n  public stage: Konva.Stage | null = null;\n\n  constructor(props: IProps) {\n    super(props);\n\n    this.state = {\n      drewASelectionRect: false,\n      selectRect: {\n        height: 0,\n        width: 0,\n      },\n      selectStartPos: {\n        x: 0,\n        y: 0,\n      },\n      selecting: false,\n      showContextMenu: false,\n      contextMenuPosition: null,\n      contextMenuItems: [],\n      showDeckImporter: false,\n      deckImporterPosition: null,\n      showEncounterImporter: false,\n      encounterImporterPosition: null,\n    };\n  }\n\n  public componentDidMount() {\n    this.props.loadCardsData();\n  }\n\n  public render() {\n    const staticCards = this.props.cards.cards\n      .filter((card) => !card.dragging)\n      .map((card) => {\n        return (\n          <Card\n            key={card.id}\n            id={card.id}\n            x={card.x}\n            y={card.y}\n            exhausted={card.exhausted}\n            fill={card.fill}\n            selected={card.selected}\n            dropTarget={card.id === this.props.cards.dropTargetCard?.id}\n            dragging={card.dragging}\n            handleDragStart={this.handleCardDragStart}\n            handleDragMove={this.props.cardMove}\n            handleDragEnd={this.props.endCardMove}\n            handleDoubleClick={this.handleSelectAndExhaust}\n            handleClick={this.props.toggleSelectCard}\n            handleHover={this.props.hoverCard}\n            handleHoverLeave={this.props.hoverLeaveCard}\n            handleContextMenu={this.handleCardContextMenu}\n            imgUrl={this.getImgUrl(card)}\n            typeCode={this.getCardType(card)}\n            faceup={card.faceup}\n            numCardsInStack={card.cardStack.length}\n            cardState={{\n              stunned: true,\n              confused: true,\n              tough: true,\n              tokens: { damage: 0, threat: 0, generic: 0 },\n            }}\n          />\n        );\n      });\n\n    const ghostCards = this.props.cards.ghostCards.map((card) => {\n      return (\n        <Card\n          key={`ghost${card.id}`}\n          id={card.id}\n          x={card.x}\n          y={card.y}\n          exhausted={card.exhausted}\n          fill={card.fill}\n          selected={false}\n          dragging={false}\n          imgUrl={this.getImgUrl(card)}\n          typeCode={this.getCardType(card)}\n          faceup={card.faceup}\n          isGhost={true}\n        />\n      );\n    });\n\n    const movingCards = this.props.cards.cards\n      .filter((card) => card.dragging)\n      .map((card) => {\n        return (\n          <Card\n            key={card.id}\n            id={card.id}\n            x={card.x}\n            y={card.y}\n            exhausted={card.exhausted}\n            fill={card.fill}\n            selected={card.selected}\n            dragging={card.dragging}\n            handleDragStart={this.handleCardDragStart}\n            handleDragMove={this.props.cardMove}\n            handleDragEnd={this.props.endCardMove}\n            handleDoubleClick={this.handleSelectAndExhaust}\n            handleClick={this.props.toggleSelectCard}\n            imgUrl={this.getImgUrl(card)}\n            typeCode={this.getCardType(card)}\n            faceup={card.faceup}\n            numCardsInStack={card.cardStack.length}\n          />\n        );\n      });\n\n    const previewCards = this.stage\n      ? this.props.cards.cards\n          .filter(\n            (card) =>\n              !this.state.selecting &&\n              this.props.showPreview &&\n              !!this.props.cards.previewCard &&\n              card.id === this.props.cards.previewCard.id\n          )\n          .map((card) => {\n            const rawPos = this.getRawPreviewCardPosition();\n            const previewPos = this.getRelativePositionFromTarget(\n              this.stage,\n              rawPos\n            );\n            return (\n              <Card\n                key={`preview${card.id}`}\n                id={card.id}\n                x={previewPos.x}\n                y={previewPos.y}\n                exhausted={HORIZONTAL_TYPE_CODES.includes(\n                  this.getCardType(card)\n                )}\n                fill={card.fill}\n                selected={false}\n                dragging={false}\n                imgUrl={this.getImgUrl(card)}\n                typeCode={this.getCardType(card)}\n                faceup={card.faceup}\n                height={cardConstants.CARD_PREVIEW_HEIGHT}\n                width={cardConstants.CARD_PREVIEW_WIDTH}\n              />\n            );\n          })\n      : [];\n\n    return (\n      <div tabIndex={1} onKeyPress={this.handleKeyPress}>\n        {this.renderEmptyMessage()}\n        {this.renderContextMenu()}\n        {this.renderDeckImporter()}\n        {this.renderEncounterImporter()}\n        <Stage\n          ref={(ref) => {\n            if (!ref) return;\n\n            this.stage = ref;\n          }}\n          x={this.props.gameState.stagePosition.x}\n          y={this.props.gameState.stagePosition.y}\n          width={window.innerWidth}\n          height={window.innerHeight}\n          onClick={this.handleStageClickOrTap}\n          onTap={this.handleStageClickOrTap}\n          onMouseDown={this.props.panMode ? this.noOp : this.handleMouseDown}\n          onMouseUp={this.props.panMode ? this.noOp : this.handleMouseUp}\n          onMouseMove={this.props.panMode ? this.noOp : this.handleMouseMove}\n          onTouchMove={this.props.panMode ? this.noOp : this.handleMouseMove}\n          onContextMenu={this.handleContextMenu}\n          scale={this.props.gameState.stageZoom}\n          onWheel={this.handleWheel}\n          draggable={this.props.panMode}\n          onDragMove={this.noOp}\n          onDragEnd={this.noOp}\n          preventDefault={true}\n        >\n          <Layer preventDefault={true}>\n            {staticCards\n              .concat(ghostCards)\n              .concat(movingCards)\n              .concat(previewCards)}\n          </Layer>\n          <Layer>\n            <Rect\n              x={this.state.selectStartPos.x}\n              y={this.state.selectStartPos.y}\n              width={this.state.selectRect.width}\n              height={this.state.selectRect.height}\n              stroke=\"black\"\n            />\n          </Layer>\n        </Stage>\n      </div>\n    );\n  }\n\n  private noOp = () => {};\n\n  private renderEmptyMessage = () => {\n    if (this.props.cards.cards.length > 0) return null;\n\n    return (\n      <div>\n        Right click and select 'Load Deck ID' to load a deck from marvelcdb.com\n      </div>\n    );\n  };\n\n  private renderContextMenu = () => {\n    if (!this.state.showContextMenu) return null;\n\n    const containerRect = this.stage?.container().getBoundingClientRect();\n    const pointerPosition = this.state.contextMenuPosition;\n    if (!containerRect || !pointerPosition) {\n      throw new Error(\"Problem computing context menu position\");\n    }\n\n    return (\n      <ContextMenu\n        position={{\n          x: containerRect.left + pointerPosition.x,\n          y: containerRect.top + pointerPosition.y,\n        }}\n        items={this.state.contextMenuItems}\n        hideContextMenu={() => this.clearContextMenu()}\n      ></ContextMenu>\n    );\n  };\n\n  private renderDeckImporter = () => {\n    if (!this.state.showDeckImporter) return null;\n\n    const containerRect = this.stage?.container().getBoundingClientRect();\n    const pointerPosition = this.state.deckImporterPosition;\n    if (!containerRect || !pointerPosition) {\n      throw new Error(\"Problem computing deck importer position\");\n    }\n\n    return (\n      <TopLayer\n        position={{\n          x: containerRect.left + pointerPosition.x,\n          y: containerRect.top + pointerPosition.y,\n        }}\n        completed={this.clearDeckImporter}\n      >\n        <DeckLoader\n          loadDeckId={this.handleImportDeck(\n            this.getRelativePositionFromTarget(this.stage)\n          )}\n        />\n      </TopLayer>\n    );\n  };\n\n  private renderEncounterImporter = () => {\n    if (!this.state.showEncounterImporter) return null;\n\n    const containerRect = this.stage?.container().getBoundingClientRect();\n    const pointerPosition = this.state.encounterImporterPosition;\n    if (!containerRect || !pointerPosition) {\n      throw new Error(\"Problem computing deck importer position\");\n    }\n\n    const pos = {\n      x: containerRect.left + pointerPosition.x,\n      y: containerRect.top + pointerPosition.y,\n    };\n\n    return (\n      <TopLayer position={pos} completed={this.clearEncounterImporter}>\n        <EncounterLoaderContainer\n          loadCards={this.handleLoadEncounter(\n            this.getRelativePositionFromTarget(this.stage)\n          )}\n        />\n      </TopLayer>\n    );\n  };\n\n  private handleLoadEncounter = (position: Vector2d) => (cards: string[]) => {\n    this.clearEncounterImporter();\n    this.props.addCardStack({ position, cardJsonIds: cards });\n  };\n\n  private handleImportDeck = (position: Vector2d) => (id: number) => {\n    this.clearDeckImporter();\n    this.props.fetchDecklistById({ decklistId: id, position });\n  };\n\n  private clearContextMenu = () => {\n    this.setState({\n      showContextMenu: false,\n      contextMenuPosition: null,\n      contextMenuItems: [],\n    });\n  };\n\n  private clearDeckImporter = () => {\n    this.setState({\n      showDeckImporter: false,\n      deckImporterPosition: null,\n    });\n  };\n\n  private clearEncounterImporter = () => {\n    this.setState({\n      showEncounterImporter: false,\n      encounterImporterPosition: null,\n    });\n  };\n\n  private handleStageClickOrTap = (event: KonvaEventObject<MouseEvent>) => {\n    const mousePos = this.getRelativePositionFromTarget(this.stage);\n    if (\n      this.props.panMode ||\n      getDistance(this.state.selectStartPos, mousePos) < 30\n    ) {\n      this.props.unselectAllCards();\n    }\n  };\n\n  private handleWheel = (event: KonvaEventObject<WheelEvent>) => {\n    event.evt.preventDefault();\n\n    if (!this.stage) return;\n\n    var oldScale = this.props.gameState.stageZoom.x;\n\n    const pointer = this.stage.getPointerPosition() ?? { x: 0, y: 0 };\n\n    const mousePointTo = {\n      x: (pointer.x - this.stage.x()) / oldScale,\n      y: (pointer.y - this.stage.y()) / oldScale,\n    };\n\n    const newScale =\n      event.evt.deltaY < 0 ? oldScale * SCALE_BY : oldScale / SCALE_BY;\n\n    this.props.updateZoom({ x: newScale, y: newScale });\n\n    const newPos = {\n      x: pointer.x - mousePointTo.x * newScale,\n      y: pointer.y - mousePointTo.y * newScale,\n    };\n\n    this.props.updatePosition(newPos);\n  };\n\n  private handleCardContextMenu = (\n    cardId: string,\n    event: KonvaEventObject<PointerEvent>\n  ) => {\n    event.evt.preventDefault();\n    event.cancelBubble = true;\n\n    // First, select the card\n    this.props.selectCard(cardId);\n\n    const card = this.props.cards.cards.find((c) => c.id === cardId);\n    const numCardsInStack = card?.cardStack?.length || 0;\n\n    const menuItems = [\n      {\n        label: \"Flip\",\n        action: () => {\n          this.props.flipCards();\n        },\n      },\n    ];\n\n    if (numCardsInStack > 1) {\n      menuItems.push({\n        label: \"Shuffle\",\n        action: () => {\n          this.props.shuffleStack(cardId);\n        },\n      });\n    }\n\n    this.setState({\n      showContextMenu: true,\n      contextMenuPosition: this.stage?.getPointerPosition() ?? null,\n      contextMenuItems: menuItems,\n    });\n  };\n\n  private handleSelectAndExhaust = (cardId: string) => {\n    this.props.selectCard(cardId);\n    this.props.exhaustCard(cardId);\n  };\n\n  private handleCardDragStart = (\n    cardId: string,\n    event: KonvaEventObject<DragEvent>\n  ) => {\n    let splitTopCard = false;\n    // If multiple things are selected, you can't pull something off the top of a stack,\n    // so just do a normal drag\n    const multipleSelected =\n      this.props.cards.cards.filter((c) => c.selected).length > 1;\n\n    if (!multipleSelected) {\n      const draggingCard = this.props.cards.cards.find((c) => c.id === cardId);\n      const hasStack = (draggingCard?.cardStack || []).length > 1;\n      if (!!draggingCard && hasStack) {\n        // Check if we're dragging in the upper right corner of the card\n        const upperRightPoint = {\n          x: draggingCard.x + cardConstants.CARD_WIDTH / 2,\n          y: draggingCard.y - cardConstants.CARD_HEIGHT / 2,\n        };\n        const distance = getDistance(\n          upperRightPoint,\n          this.getRelativePositionFromTarget(this.stage)\n        );\n        if (distance < 30) {\n          splitTopCard = true;\n        }\n      }\n    }\n\n    this.props.startCardMove({ id: cardId, splitTopCard });\n  };\n\n  private handleKeyPress = (event: any) => {\n    const code = event.which || event.keyCode;\n    if (code === 115) {\n      this.props.togglePanMode();\n    } else if (code === 102) {\n      this.props.flipCards();\n    }\n  };\n\n  private getRawPreviewCardPosition = (): Vector2d => {\n    const pointerPos = this.stage?.getPointerPosition() ?? { x: 0, y: 0 };\n    const screenMidPointX = window.innerWidth / 2;\n    return pointerPos.x < screenMidPointX\n      ? {\n          x: window.innerWidth - cardConstants.CARD_PREVIEW_WIDTH / 2,\n          y: cardConstants.CARD_PREVIEW_HEIGHT / 2,\n        }\n      : {\n          x: cardConstants.CARD_PREVIEW_WIDTH / 2,\n          y: cardConstants.CARD_PREVIEW_HEIGHT / 2,\n        };\n  };\n\n  private getRelativePositionFromTarget = (\n    target: any,\n    posParam?: Vector2d\n  ) => {\n    const transform = target.getAbsoluteTransform().copy();\n    transform.invert();\n    let pos = posParam || target.getPointerPosition();\n    return transform.point(pos) as Vector2d;\n  };\n\n  private handleMouseDown = (event: any) => {\n    const pos = this.getRelativePositionFromTarget(this.stage);\n\n    this.setState({\n      selectStartPos: {\n        x: pos.x,\n        y: pos.y,\n      },\n      selecting: true,\n    });\n\n    return false;\n  };\n\n  private getSelectionRectInfo = () => {\n    const selectStartPos = this.state.selectStartPos;\n    const selectRect = this.state.selectRect;\n    return {\n      height: Math.abs(selectRect.height),\n      width: Math.abs(selectRect.width),\n      x:\n        selectRect.width < 0\n          ? selectStartPos.x + selectRect.width\n          : selectStartPos.x,\n      y:\n        selectRect.height < 0\n          ? selectStartPos.y + selectRect.height\n          : selectStartPos.y,\n    };\n  };\n\n  private handleMouseUp = () => {\n    // if we were selecting, check for intersection\n    if (this.state.drewASelectionRect) {\n      const selectRect = this.getSelectionRectInfo();\n      const selectedCards: any[] = this.props.cards.cards.reduce<ICardStack[]>(\n        (currSelectedCards, card) => {\n          const intersects = Intersects.boxBox(\n            selectRect.x,\n            selectRect.y,\n            selectRect.width,\n            selectRect.height,\n            card.x - 50,\n            card.y - 75,\n            cardConstants.CARD_WIDTH,\n            cardConstants.CARD_HEIGHT\n          );\n\n          if (intersects) {\n            currSelectedCards.push(card);\n          }\n\n          return currSelectedCards;\n        },\n        []\n      );\n\n      this.props.selectMultipleCards({\n        ids: selectedCards.map((card) => card.id),\n      });\n    }\n\n    this.setState({\n      drewASelectionRect: false,\n      selectRect: {\n        height: 0,\n        width: 0,\n      },\n      selecting: false,\n    });\n\n    return false;\n  };\n\n  private handleMouseMove = (event: any) => {\n    if (this.state.selecting) {\n      const pos = this.getRelativePositionFromTarget(event.currentTarget);\n      this.setState({\n        drewASelectionRect: true,\n        selectRect: {\n          height: pos.y - this.state.selectStartPos.y,\n          width: pos.x - this.state.selectStartPos.x,\n        },\n      });\n    }\n    event.cancelBubble = true;\n  };\n\n  private handleContextMenu = (event: KonvaEventObject<PointerEvent>): void => {\n    event.evt.preventDefault();\n    event.cancelBubble = true;\n\n    const menuItems = [\n      {\n        label: \"Load Deck ID\",\n        action: () => {\n          this.setState({\n            showDeckImporter: true,\n            deckImporterPosition: this.stage?.getPointerPosition() ?? null,\n          });\n        },\n      },\n      {\n        label: \"Load Encounter\",\n        action: () => {\n          this.setState({\n            showEncounterImporter: true,\n            encounterImporterPosition: this.stage?.getPointerPosition() ?? null,\n          });\n        },\n      },\n      { label: \"Reset\", action: this.props.resetApp },\n    ];\n\n    this.setState({\n      showContextMenu: true,\n      contextMenuPosition: this.stage?.getPointerPosition() ?? null,\n      contextMenuItems: menuItems,\n    });\n  };\n\n  private getCardType = (card: ICardStack): string => {\n    if (Object.keys(this.props.cardsData).length === 0) return \"\";\n\n    const cardData = this.props.cardsData[card.cardStack[0].jsonId];\n\n    return cardData.type_code;\n  };\n\n  private getImgUrl = (card: ICardStack): string => {\n    if (Object.keys(this.props.cardsData).length === 0) return \"\";\n\n    const topCardData = this.props.cardsData[card.cardStack[0].jsonId];\n    const bottomCardData = this.props.cardsData[\n      card.cardStack[card.cardStack.length - 1].jsonId\n    ];\n\n    if (\n      !card.faceup &&\n      (!!bottomCardData.back_link || !!bottomCardData.double_sided)\n    ) {\n      return (\n        process.env.PUBLIC_URL +\n        \"/images/cards/\" +\n        bottomCardData.octgn_id +\n        \".b.jpg\"\n      );\n    } else if (!card.faceup) {\n      return process.env.PUBLIC_URL + \"/images/standard/card_back.png\";\n    }\n\n    return (\n      process.env.PUBLIC_URL + \"/images/cards/\" + topCardData.octgn_id + \".jpg\"\n    );\n  };\n}\n\nexport default App;\n","import { createSlice, CaseReducer } from \"@reduxjs/toolkit\";\nimport { initialState, ICardsDataState } from \"./initialState\";\n\nimport * as PackData from \"../../external/generated/packs\";\nimport { CardData } from \"../../external-api/marvel-card-data\";\nimport SetData from \"../../external/marvelsdb-json-data/sets.json\";\n\n// Reducers\nconst loadCardsDataReducer: CaseReducer<ICardsDataState> = (state) => {\n  //This reducer is only intended to be called a single time each load.\n  state.entities = {};\n  state.encounterEntities = {};\n  const heroPacks = Object.entries(PackData)\n    .filter(([key, value]) => !key.includes(\"_encounter\"))\n    .map(([key, value]) => value);\n\n  const encounterPacks = Object.entries(PackData)\n    .filter(([key, value]) => key.includes(\"_encounter\"))\n    .map(([key, value]) => value);\n\n  heroPacks.forEach((pack) =>\n    pack.forEach((card: CardData) => {\n      if (state.entities[card.code]) {\n        console.error(\"Found multiple cards with code \" + card.code);\n      }\n\n      // if (!card.octgn_id) {\n      //   console.error(`Card ${card.code} had no octgn_id!`);\n      // }\n\n      state.entities[card.code] = card;\n    })\n  );\n\n  encounterPacks.forEach((pack) =>\n    pack.forEach((card: CardData) => {\n      if (state.encounterEntities[card.code]) {\n        console.error(\"Found multiple cards with code \" + card.code);\n      }\n\n      // if (!card.octgn_id) {\n      //   console.error(`Card ${card.code}: ${card.name} had no octgn_id!`);\n      // }\n\n      state.encounterEntities[card.code] = card;\n    })\n  );\n\n  SetData.forEach((set) => {\n    state.setData[set.code] = {\n      name: set.name,\n      setTypeCode: set.card_set_type_code,\n    };\n  });\n\n  return state;\n};\n\n// slice\nconst cardsDataSlice = createSlice({\n  name: \"cardsData\",\n  initialState: initialState,\n  reducers: {\n    loadCardsData: loadCardsDataReducer,\n  },\n});\n\nexport const { loadCardsData } = cardsDataSlice.actions;\n\nexport default cardsDataSlice.reducer;\n","import { CardData } from \"../../external-api/marvel-card-data\";\n\nexport interface ICardData {\n  [key: string]: CardData;\n}\n\nexport interface Set {\n  name: string;\n  setTypeCode: string;\n}\n\nexport interface ISetData {\n  [key: string]: Set;\n}\n\nexport interface ICardsDataState {\n  entities: ICardData;\n  encounterEntities: ICardData;\n  setData: ISetData;\n}\n\nexport const initialState: ICardsDataState = {\n  entities: {},\n  encounterEntities: {},\n  setData: {},\n};\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { Vector2d } from \"konva/types/types\";\nimport { RootState } from \"../../store/rootReducer\";\nimport {\n  getCardsDataEncounterEntities,\n  getCardsDataHeroEntities,\n} from \"../cards-data/cards-data.selectors\";\n\nexport const fetchDecklistById = createAsyncThunk(\n  \"decklist/fetchByIdStatus\",\n  async (payload: { decklistId: number; position: Vector2d }, thunkApi) => {\n    const response = await axios.get(\n      `https://marvelcdb.com/api/public/decklist/${payload.decklistId}`\n    );\n    const state: RootState = thunkApi.getState() as RootState;\n    const heroCardsData = getCardsDataHeroEntities(state);\n    const heroSetCode = heroCardsData[response.data.investigator_code].set_code;\n    const encounterCardsData = getCardsDataEncounterEntities(state);\n\n    const heroObligationDeck = Object.entries(encounterCardsData)\n      .filter(\n        ([_key, value]) =>\n          value.set_code === `${heroSetCode}` &&\n          value.type_code === \"obligation\"\n      )\n      .map(([key, _value]) => key);\n\n    console.log(heroObligationDeck);\n\n    const heroEncounterDeck = Object.entries(encounterCardsData)\n      .filter(([_key, value]) => value.set_code === `${heroSetCode}_nemesis`)\n      .map(([key, _value]) => key);\n    // get the encounter cards for this deck\n    return {\n      position: payload.position,\n      data: response.data,\n      relatedEncounterDeck: heroEncounterDeck,\n      relatedObligationDeck: heroObligationDeck,\n    };\n  }\n);\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../../store/rootReducer\";\n\nexport const getCards = (state: RootState) => state.cards;\n\nexport const shouldShowPreview = createSelector(getCards, (cards) => {\n  return !!cards.previewCard && cards.cards.every((card) => !card.dragging);\n});\n\nexport const getPanMode = (state: RootState) => state.cards.panMode;\n","import { RootState } from \"./rootReducer\";\n\nexport const loadState = (key: string) => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    if (serializedState === null) {\n      return {};\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return {};\n  }\n};\n\nexport const saveState = (state: RootState) => {\n  const blacklistStateKeys = [\"cardsData\"];\n  try {\n    Object.entries(state).forEach(([key, value]) => {\n      if (!blacklistStateKeys.includes(key)) {\n        const serializedState = JSON.stringify(value);\n        localStorage.setItem(key, serializedState);\n      }\n    });\n  } catch {\n    // ignore write errors\n  }\n};\n","import { loadState } from \"../../store/localStorage\";\n\n// import { v4 as uuidv4 } from \"uuid\";\nexport interface ICardStack {\n  dragging: boolean;\n  exhausted: boolean;\n  faceup: boolean;\n  fill: string;\n  id: string;\n  selected: boolean;\n  x: number;\n  y: number;\n  cardStack: ICardDetails[];\n}\n\nexport interface ICardDetails {\n  jsonId: string;\n}\n\nexport interface IPreviewCard {\n  id: string;\n}\n\nexport interface ICardsState {\n  cards: ICardStack[];\n  ghostCards: ICardStack[];\n  previewCard: IPreviewCard | null;\n  dropTargetCard: ICardStack | null;\n  panMode: boolean;\n}\n\nconst localStorageState: ICardsState = loadState(\"cards\");\nconst defaultState: ICardsState = {\n  cards: [\n    // {\n    //   dragging: false,\n    //   exhausted: false,\n    //   faceup: true,\n    //   fill: \"red\",\n    //   id: uuidv4(),\n    //   selected: false,\n    //   x: 200,\n    //   y: 200,\n    //   cardStack: [{ jsonId: \"01001a\" }],\n    // },\n    // {\n    //   dragging: false,\n    //   exhausted: false,\n    //   faceup: true,\n    //   fill: \"red\",\n    //   id: uuidv4(),\n    //   selected: false,\n    //   x: 400,\n    //   y: 400,\n    //   cardStack: [{ jsonId: \"01027\" }],\n    // },\n    // {\n    //   dragging: false,\n    //   exhausted: false,\n    //   faceup: true,\n    //   fill: \"red\",\n    //   id: uuidv4(),\n    //   selected: false,\n    //   x: 200,\n    //   y: 600,\n    //   cardStack: [{ jsonId: \"01036\" }],\n    // },\n  ],\n  ghostCards: [],\n  previewCard: null,\n  dropTargetCard: null,\n  panMode: true,\n};\n\nexport const initialState: ICardsState = {\n  ...defaultState,\n  ...localStorageState,\n};\n","import { createAction } from \"@reduxjs/toolkit\";\n\nexport const resetApp = createAction(\"resetAction\");\n","import { createSlice, PayloadAction, CaseReducer } from \"@reduxjs/toolkit\";\nimport { getDistance } from \"../../utilities/geo\";\nimport {\n  initialState,\n  ICardsState,\n  ICardStack,\n  ICardDetails,\n} from \"./initialState\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { fetchDecklistById } from \"./cards.async-thunks\";\nimport { cardConstants } from \"../../constants/card-constants\";\nimport { Vector2d } from \"konva/types/types\";\nimport { resetApp } from \"../../store/global.actions\";\n\nconst CARD_DROP_TARGET_DISTANCE = 30;\n\n// Helper methods\nconst getCardStackWithId = (\n  state: ICardsState,\n  id: string\n): ICardStack | undefined => {\n  return state.cards.find((card) => card.id === id);\n};\n\nconst mutateCardWithId = (\n  state: ICardsState,\n  id: string,\n  callback: (card: ICardStack) => void\n) => {\n  const cardToUpdate = getCardStackWithId(state, id);\n  if (cardToUpdate) {\n    callback(cardToUpdate);\n  }\n};\n\nconst foreachSelectedCard = (\n  state: ICardsState,\n  callback: (card: ICardStack) => void\n) => {\n  state.cards.filter((card) => card.selected).forEach((card) => callback(card));\n};\n\nconst foreachUnselectedCard = (\n  state: ICardsState,\n  callback: (card: ICardStack) => void\n) => {\n  state.cards\n    .filter((card) => !card.selected)\n    .forEach((card) => callback(card));\n};\n\nconst shuffle = (array: ICardDetails[]) => {\n  var currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n};\n\n// Reducers\nconst selectCardReducer: CaseReducer<ICardsState, PayloadAction<string>> = (\n  state,\n  action\n) => {\n  mutateCardWithId(state, action.payload, (card) => {\n    card.selected = true;\n  });\n};\n\nconst unselectCardReducer: CaseReducer<ICardsState, PayloadAction<string>> = (\n  state,\n  action\n) => {\n  mutateCardWithId(state, action.payload, (card) => {\n    card.selected = false;\n  });\n};\n\nconst toggleSelectCardReducer: CaseReducer<\n  ICardsState,\n  PayloadAction<string>\n> = (state, action) => {\n  mutateCardWithId(state, action.payload, (card) => {\n    card.selected = !card.selected;\n  });\n};\n\nconst exhaustCardReducer: CaseReducer<ICardsState, PayloadAction<string>> = (\n  state,\n  action\n) => {\n  state.cards\n    .filter((card) => card.id === action.payload || card.selected)\n    .forEach((card) => {\n      card.exhausted = !card.exhausted;\n    });\n};\n\nconst startCardMoveReducer: CaseReducer<\n  ICardsState,\n  PayloadAction<{ id: string; splitTopCard: boolean }>\n> = (state, action) => {\n  // first, if the card moving isn't currently selected, clear all selected cards\n  const cardToStartMoving = getCardStackWithId(state, action.payload.id);\n  if (cardToStartMoving && !cardToStartMoving.selected) {\n    state.cards = state.cards.map((card) => {\n      card.selected = card.id === action.payload.id;\n      return card;\n    });\n  }\n\n  // If we are splitting, make a new stack of cards\n  if (action.payload.splitTopCard) {\n    const cardToMove = state.cards.find((c) => c.id === action.payload.id);\n\n    if (!cardToMove) {\n      throw new Error(\"Expected to find card\");\n    }\n\n    cardToMove.selected = false;\n\n    const topCard = cardToMove.cardStack.shift();\n    const newCard = Object.assign({}, cardToMove, {\n      selected: true,\n      dragging: true,\n      cardStack: [topCard],\n    });\n\n    cardToMove.id = uuidv4();\n\n    state.cards.push(newCard);\n  }\n\n  // Now all selected cards should be put into ghost cards, unless we are splitting the top card\n  state.ghostCards = [];\n\n  if (!action.payload.splitTopCard) {\n    foreachSelectedCard(state, (card) => {\n      card.dragging = true;\n      state.ghostCards.push(Object.assign({}, card));\n    });\n  }\n};\n\nconst cardMoveReducer: CaseReducer<\n  ICardsState,\n  PayloadAction<{ id: string; dx: number; dy: number }>\n> = (state, action) => {\n  const movedCards: ICardStack[] = [];\n\n  let primaryCard: ICardStack;\n\n  state.cards\n    .filter((card) => card.id === action.payload.id || card.selected)\n    .forEach((card) => {\n      if (card.id === action.payload.id) {\n        primaryCard = card;\n      }\n\n      card.x += action.payload.dx;\n      card.y += action.payload.dy;\n\n      movedCards.push(card);\n    });\n\n  // go through and find if any unselected cards are potential drop targets\n  // If so, get the closest one\n  const possibleDropTargets: { distance: number; card: ICardStack }[] = [];\n  foreachUnselectedCard(state, (card) => {\n    const distance = getDistance(card, primaryCard);\n    if (distance < CARD_DROP_TARGET_DISTANCE) {\n      possibleDropTargets.push({\n        distance,\n        card,\n      });\n    }\n  });\n\n  state.dropTargetCard =\n    possibleDropTargets.sort((c1, c2) => c1.distance - c2.distance)[0]?.card ??\n    null;\n\n  // put the moved cards at the end. TODO: we could just store the move order or move time\n  // or something, and the array could be a selector\n  movedCards.forEach((movedCard) => {\n    state.cards.push(state.cards.splice(state.cards.indexOf(movedCard), 1)[0]);\n  });\n};\n\nconst endCardMoveReducer: CaseReducer<ICardsState, PayloadAction<string>> = (\n  state,\n  action\n) => {\n  let dropTargetCards: ICardDetails[] = [];\n  state.cards\n    .filter((card) => card.id === action.payload || card.selected)\n    .forEach((card) => {\n      card.dragging = false;\n\n      if (!!state.dropTargetCard) {\n        // Add the cards to the drop Target card stack\n        dropTargetCards = dropTargetCards.concat(card.cardStack);\n      }\n    });\n\n  // Now, if there was a drop target card, remove all those cards from the state\n  if (!!state.dropTargetCard) {\n    state.cards = state.cards.filter(\n      (card) => !(card.id === action.payload || card.selected)\n    );\n\n    const dropTargetCard = state.cards.find(\n      (card) => card.id === state.dropTargetCard?.id\n    );\n    if (!!dropTargetCard && dropTargetCards.length > 0) {\n      // add the cards we've collected to the top of the stack\n      dropTargetCard.cardStack = dropTargetCards.concat(\n        dropTargetCard.cardStack\n      );\n    }\n  }\n\n  state.ghostCards = [];\n  state.dropTargetCard = null;\n};\n\nconst selectMultipleCardsReducer: CaseReducer<\n  ICardsState,\n  PayloadAction<{ ids: string[] }>\n> = (state, action) => {\n  action.payload.ids\n    .map((id) => state.cards.find((card) => card.id === id))\n    .forEach((card) => {\n      if (card) {\n        card.selected = true;\n      }\n    });\n};\n\nconst unselectAllCardsReducer: CaseReducer<ICardsState> = (state) => {\n  state.cards.forEach((card) => {\n    card.selected = false;\n  });\n};\n\nconst hoverCardReducer: CaseReducer<ICardsState, PayloadAction<string>> = (\n  state,\n  action\n) => {\n  const cardToPreview = state.cards.find((c) => c.id === action.payload);\n  if (!cardToPreview?.faceup) return;\n\n  if (state.previewCard === null) {\n    state.previewCard = {\n      id: action.payload,\n    };\n  } else if (action.payload !== state.previewCard.id) {\n    state.previewCard.id = action.payload;\n  }\n};\n\nconst hoverLeaveCardReducer: CaseReducer<ICardsState> = (state) => {\n  if (state.previewCard !== null) {\n    state.previewCard = null;\n  }\n};\n\nconst togglePanModeReducer: CaseReducer<ICardsState> = (state) => {\n  state.panMode = !state.panMode;\n};\n\nconst flipCardsReducer: CaseReducer<ICardsState> = (state, action) => {\n  state.cards\n    .filter((card) => card.selected)\n    .forEach((card) => {\n      card.faceup = !card.faceup;\n      card.cardStack = card.cardStack.reverse();\n    });\n};\n\nconst shuffleStackReducer: CaseReducer<ICardsState, PayloadAction<string>> = (\n  state,\n  action\n) => {\n  shuffle(state.cards.find((c) => c.id === action.payload)?.cardStack || []);\n};\n\nconst resetCardsReducer: CaseReducer<ICardsState> = (state) => {\n  state.cards = [];\n};\n\nconst addCardStackReducer: CaseReducer<\n  ICardsState,\n  PayloadAction<{ cardJsonIds: string[]; position: Vector2d }>\n> = (state, action) => {\n  const newStack: ICardStack = {\n    x: action.payload.position.x,\n    y: action.payload.position.y,\n    dragging: false,\n    exhausted: false,\n    faceup: true,\n    fill: \"red\",\n    id: uuidv4(),\n    cardStack: action.payload.cardJsonIds.map((jsonId) => ({\n      jsonId,\n    })),\n    selected: false,\n  };\n\n  state.cards.push(newStack);\n};\n// Selectors\n\n// slice\nconst cardsSlice = createSlice({\n  name: \"cards\",\n  initialState: initialState,\n  reducers: {\n    selectCard: selectCardReducer,\n    unselectCard: unselectCardReducer,\n    toggleSelectCard: toggleSelectCardReducer,\n    exhaustCard: exhaustCardReducer,\n    startCardMove: startCardMoveReducer,\n    cardMove: cardMoveReducer,\n    endCardMove: endCardMoveReducer,\n    selectMultipleCards: selectMultipleCardsReducer,\n    unselectAllCards: unselectAllCardsReducer,\n    hoverCard: hoverCardReducer,\n    hoverLeaveCard: hoverLeaveCardReducer,\n    togglePanMode: togglePanModeReducer,\n    flipCards: flipCardsReducer,\n    shuffleStack: shuffleStackReducer,\n    resetCards: resetCardsReducer,\n    addCardStack: addCardStackReducer,\n  },\n  extraReducers: (builder) => {\n    builder.addCase(resetApp, (state, action) => {\n      state.cards = [];\n      state.previewCard = null;\n      state.dropTargetCard = null;\n      state.ghostCards = [];\n      state.panMode = true;\n    });\n\n    builder.addCase(fetchDecklistById.fulfilled, (state, action) => {\n      console.log(\"got decklist\");\n      console.log(action);\n\n      const heroCard: ICardStack = {\n        x: action.payload.position.x,\n        y: action.payload.position.y,\n        dragging: false,\n        exhausted: false,\n        faceup: true,\n        fill: \"red\",\n        id: uuidv4(),\n        cardStack: [{ jsonId: action.payload.data.investigator_code }],\n        selected: false,\n      };\n\n      let mainDeckStack: ICardDetails[] = [];\n      Object.entries(action.payload.data.slots).forEach(([key, value]) => {\n        const cardDetails: ICardDetails[] = Array.from(Array(value).keys()).map(\n          (): ICardDetails => ({ jsonId: key })\n        );\n        mainDeckStack = mainDeckStack.concat(cardDetails);\n      });\n\n      const cardPadding = cardConstants.CARD_WIDTH + 10;\n\n      const newDeck: ICardStack = {\n        x: action.payload.position.x + cardPadding,\n        y: action.payload.position.y,\n        dragging: false,\n        exhausted: false,\n        faceup: true,\n        fill: \"red\",\n        id: uuidv4(),\n        cardStack: mainDeckStack,\n        selected: false,\n      };\n\n      const encounterDeck: ICardStack = {\n        x: action.payload.position.x + cardPadding * 2,\n        y: action.payload.position.y,\n        dragging: false,\n        exhausted: false,\n        faceup: true,\n        fill: \"red\",\n        id: uuidv4(),\n        cardStack: action.payload.relatedEncounterDeck.map((jsonId) => ({\n          jsonId,\n        })),\n        selected: false,\n      };\n\n      const obligationDeck: ICardStack = {\n        x: action.payload.position.x + cardPadding * 3,\n        y: action.payload.position.y,\n        dragging: false,\n        exhausted: false,\n        faceup: true,\n        fill: \"red\",\n        id: uuidv4(),\n        cardStack: action.payload.relatedObligationDeck.map((jsonId) => ({\n          jsonId,\n        })),\n        selected: false,\n      };\n\n      state.cards.push(heroCard, newDeck, encounterDeck, obligationDeck);\n    });\n  },\n});\n\nexport const {\n  selectCard,\n  unselectCard,\n  toggleSelectCard,\n  exhaustCard,\n  startCardMove,\n  cardMove,\n  endCardMove,\n  selectMultipleCards,\n  unselectAllCards,\n  hoverCard,\n  hoverLeaveCard,\n  togglePanMode,\n  flipCards,\n  shuffleStack,\n  resetCards,\n  addCardStack,\n} = cardsSlice.actions;\n\nexport default cardsSlice.reducer;\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../../store/rootReducer\";\n\nexport const getGame = (state: RootState) => state.game;\n\nexport const getCurrentZoom = createSelector(getGame, (game) => {\n  return game.stageZoom;\n});\n","import { Vector2d } from \"konva/types/types\";\nimport { loadState } from \"../../store/localStorage\";\n\nexport interface IGameState {\n  stageZoom: Vector2d;\n  stagePosition: Vector2d;\n}\n\nconst localStorageState: IGameState = loadState(\"game\");\nconst defaultState: IGameState = {\n  stageZoom: { x: 1, y: 1 },\n  stagePosition: { x: 0, y: 0 },\n};\nexport const initialState: IGameState = {\n  ...defaultState,\n  ...localStorageState,\n};\n","import { createSlice, CaseReducer, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Vector2d } from \"konva/types/types\";\nimport { resetApp } from \"../../store/global.actions\";\nimport { initialState, IGameState } from \"./initialState\";\n\n// Reducers\nconst updateZoomReducer: CaseReducer<IGameState, PayloadAction<Vector2d>> = (\n  state,\n  action\n) => {\n  state.stageZoom = action.payload;\n  return state;\n};\n\nconst updatePositionReducer: CaseReducer<\n  IGameState,\n  PayloadAction<Vector2d>\n> = (state, action) => {\n  state.stagePosition = action.payload;\n  return state;\n};\n\n// slice\nconst gameSlice = createSlice({\n  name: \"game\",\n  initialState: initialState,\n  reducers: {\n    updateZoom: updateZoomReducer,\n    updatePosition: updatePositionReducer,\n  },\n  extraReducers: (builder) => {\n    builder.addCase(resetApp, (state, action) => {\n      state.stagePosition = { x: 0, y: 0 };\n      state.stageZoom = { x: 1, y: 1 };\n    });\n  },\n});\n\nexport const { updateZoom, updatePosition } = gameSlice.actions;\n\nexport default gameSlice.reducer;\n","import { connect } from \"react-redux\";\nimport App from \"./App\";\nimport { getCardsDataEntities } from \"./features/cards-data/cards-data.selectors\";\nimport { loadCardsData } from \"./features/cards-data/cards-data.slice\";\nimport { fetchDecklistById } from \"./features/cards/cards.async-thunks\";\nimport {\n  getCards,\n  getPanMode,\n  shouldShowPreview,\n} from \"./features/cards/cards.selectors\";\nimport {\n  addCardStack,\n  cardMove,\n  endCardMove,\n  exhaustCard,\n  flipCards,\n  hoverCard,\n  hoverLeaveCard,\n  selectCard,\n  selectMultipleCards,\n  shuffleStack,\n  startCardMove,\n  togglePanMode,\n  toggleSelectCard,\n  unselectAllCards,\n  unselectCard,\n} from \"./features/cards/cards.slice\";\nimport { getGame } from \"./features/game/game.selectors\";\nimport { updatePosition, updateZoom } from \"./features/game/game.slice\";\nimport { RootState } from \"./store/rootReducer\";\nimport { resetApp } from \"./store/global.actions\";\n\nconst mapStateToProps = (state: RootState) => {\n  return {\n    cards: getCards(state),\n    cardsData: getCardsDataEntities(state),\n    showPreview: shouldShowPreview(state),\n    panMode: getPanMode(state),\n    gameState: getGame(state),\n  };\n};\n\nconst AppContainer = connect(mapStateToProps, {\n  cardMove,\n  endCardMove,\n  exhaustCard,\n  loadCardsData,\n  selectCard,\n  unselectCard,\n  toggleSelectCard,\n  selectMultipleCards,\n  startCardMove,\n  unselectAllCards,\n  hoverCard,\n  hoverLeaveCard,\n  togglePanMode,\n  flipCards,\n  shuffleStack,\n  fetchDecklistById,\n  updateZoom,\n  updatePosition,\n  resetApp,\n  addCardStack,\n})(App);\n\nexport default AppContainer;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from \"redux\";\nimport cards from \"../features/cards/cards.slice\";\nimport cardsData from \"../features/cards-data/cards-data.slice\";\nimport game from \"../features/game/game.slice\";\n\nconst rootReducer = combineReducers({\n  game,\n  cards,\n  cardsData,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import throttle from \"lodash.throttle\";\nimport {\n  configureStore as rtkConfigureStore,\n  getDefaultMiddleware,\n} from \"@reduxjs/toolkit\";\nimport rootReducer from \"./rootReducer\";\nimport { saveState } from \"./localStorage\";\n\nconst customizedMiddleware = getDefaultMiddleware({\n  thunk: true,\n  immutableCheck: false,\n  serializableCheck: false,\n});\n\nexport default function configureStore() {\n  const store = rtkConfigureStore({\n    reducer: rootReducer,\n    middleware: customizedMiddleware,\n  });\n\n  store.subscribe(\n    throttle(() => {\n      saveState(store.getState());\n    }, 1000)\n  );\n\n  return store;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport { Provider } from \"react-redux\";\nimport AppContainer from \"./AppContainer\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport configureStore from \"./store/configureStore\";\n\nconst store = configureStore();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AppContainer />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}