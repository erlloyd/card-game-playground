(this["webpackJsonpcard-game-playground"]=this["webpackJsonpcard-game-playground"]||[]).push([[0],{153:function(e){e.exports=JSON.parse('[{"code":"rhino","name":"Rhino","card_set_type_code":"villain"},{"code":"klaw","name":"Klaw","card_set_type_code":"villain"},{"code":"ultron","name":"Ultron","card_set_type_code":"villain"},{"code":"she_hulk_nemesis","name":"She-Hulk Nemesis","card_set_type_code":"nemesis"},{"code":"iron_man_nemesis","name":"Iron Man Nemesis","card_set_type_code":"nemesis"},{"code":"spider_man_nemesis","name":"Spider-Man Nemesis","card_set_type_code":"nemesis"},{"code":"black_panther_nemesis","name":"Black Panther Nemesis","card_set_type_code":"nemesis"},{"code":"captain_marvel_nemesis","name":"Captain Marvel Nemesis","card_set_type_code":"nemesis"},{"code":"she_hulk","name":"She-Hulk","card_set_type_code":"hero"},{"code":"iron_man","name":"Iron Man","card_set_type_code":"hero"},{"code":"spider_man","name":"Spider-Man","card_set_type_code":"hero"},{"code":"black_panther","name":"Black Panther","card_set_type_code":"hero"},{"code":"captain_marvel","name":"Captain Marvel","card_set_type_code":"hero"},{"code":"bomb_scare","name":"Bomb Scare","card_set_type_code":"modular"},{"code":"standard","name":"Standard","card_set_type_code":"standard"},{"code":"expert","name":"Expert","card_set_type_code":"expert"},{"code":"masters_of_evil","name":"Masters of Evil","card_set_type_code":"modular"},{"code":"under_attack","name":"Under Attack","card_set_type_code":"modular"},{"code":"legions_of_hydra","name":"Legions of Hydra","card_set_type_code":"modular"},{"code":"the_doomsday_chair","name":"The Doomsday Chair","card_set_type_code":"modular"},{"code":"risky_business","name":"Risky Business","card_set_type_code":"villain"},{"code":"mutagen_formula","name":"Mutagen Formula","card_set_type_code":"villain"},{"code":"goblin_gimmicks","name":"Goblin Gimmicks","card_set_type_code":"modular"},{"code":"running_interference","name":"Running Interference","card_set_type_code":"modular"},{"code":"power_drain","name":"Power Drain","card_set_type_code":"modular"},{"code":"a_mess_of_things","name":"A Mess of Things","card_set_type_code":"modular"},{"code":"captain_america","name":"Captain America","card_set_type_code":"hero"},{"code":"captain_america_nemesis","name":"Captain America Nemesis","card_set_type_code":"nemesis"},{"code":"ms_marvel","name":"Ms. Marvel","card_set_type_code":"hero"},{"code":"ms_marvel_nemesis","name":"Ms. Marvel Nemesis","card_set_type_code":"nemesis"},{"code":"thor","name":"Thor","card_set_type_code":"hero"},{"code":"thor_nemesis","name":"Thor Nemesis","card_set_type_code":"nemesis"},{"code":"wrecking_crew","name":"Wrecking Crew","card_set_type_code":"villain"},{"code":"piledriver","name":"Piledriver","card_set_type_code":"villain"},{"code":"wrecker","name":"Wrecker","card_set_type_code":"villain"},{"code":"thunderball","name":"Thunderball","card_set_type_code":"villain"},{"code":"bulldozer","name":"Bulldozer","card_set_type_code":"villain"},{"code":"black_widow","name":"Black Widow","card_set_type_code":"hero"},{"code":"black_widow_nemesis","name":"Black Widow Nemesis","card_set_type_code":"nemesis"},{"code":"doctor_strange","name":"Doctor Strange","card_set_type_code":"hero"},{"code":"invocation","name":"Invocation","card_set_type_code":"hero"},{"code":"doctor_strange_nemesis","name":"Doctor Strange Nemesis","card_set_type_code":"nemesis"},{"code":"hulk","name":"Hulk","card_set_type_code":"hero"},{"code":"hulk_nemesis","name":"Hulk Nemesis","card_set_type_code":"nemesis"},{"code":"kree_fanatic","name":"Kree Fanatic","card_set_type_code":"modular"},{"code":"hawkeye","name":"Hawkeye","card_set_type_code":"hero"},{"code":"hawkeye_nemesis","name":"Hawkeye Nemesis","card_set_type_code":"nemesis"},{"code":"spider_woman","name":"Spider-Woman","card_set_type_code":"hero"},{"code":"spider_woman_nemesis","name":"Spider-Woman Nemesis","card_set_type_code":"nemesis"},{"code":"crossbones","name":"Crossbones","card_set_type_code":"villain"},{"code":"exper_weapon","name":"Experimental Weapons","card_set_type_code":"modular"},{"code":"absorbing_man","name":"Absorbing Man","card_set_type_code":"villain"},{"code":"taskmaster","name":"Taskmaster","card_set_type_code":"villain"},{"code":"zola","name":"Zola","card_set_type_code":"villain"},{"code":"red_skull","name":"Red Skull","card_set_type_code":"villain"},{"code":"hydra_assault","name":"Hydra Assault","card_set_type_code":"modular"},{"code":"weap_master","name":"Weapon Master","card_set_type_code":"modular"},{"code":"hydra_patrol","name":"Hydra Patrol","card_set_type_code":"modular"},{"code":"hydra_camp","name":"Hydra Campaign","card_set_type_code":"modular"},{"code":"expcamp","name":"Expert Campaign","card_set_type_code":"modular"},{"code":"kang","name":"Kang","card_set_type_code":"villain"},{"code":"temporal","name":"Temporal","card_set_type_code":"modular"},{"code":"exp_kang","name":"Expert Kang","card_set_type_code":"modular"},{"code":"anchronauts","name":"Anachronauts","card_set_type_code":"modular"},{"code":"mot","name":"Master of Time","card_set_type_code":"modular"},{"code":"ant","name":"Ant-Man","card_set_type_code":"hero"},{"code":"ant_nemesis","name":"Ant-Man Nemesis","card_set_type_code":"nemesis"},{"code":"wsp","name":"Wasp","card_set_type_code":"hero"},{"code":"wsp_nemesis","name":"Wasp Nemesis","card_set_type_code":"nemesis"},{"code":"qsv","name":"Quicksilver","card_set_type_code":"hero"},{"code":"qsv_nemesis","name":"Quicksilver Nemesis","card_set_type_code":"nemesis"},{"code":"scw","name":"Scarlet Witch","card_set_type_code":"hero"},{"code":"scw_nemesis","name":"Scarlet Witch Nemesis","card_set_type_code":"nemesis"},{"code":"groot","name":"Groot","card_set_type_code":"hero"},{"code":"groot_nemesis","name":"Groot Nemesis","card_set_type_code":"nemesis"},{"code":"rocket","name":"Rocket Raccoon","card_set_type_code":"hero"},{"code":"rocket_nemesis","name":"Rocket Raccoon Nemesis","card_set_type_code":"nemesis"},{"code":"brotherhood_of_badoon","name":"Brotherhood of Badoon","card_set_type_code":"villain"},{"code":"ship_command","name":"Ship Command","card_set_type_code":"modular"},{"code":"band_of_badoon","name":"Band of Badoon","card_set_type_code":"modular"},{"code":"stld","name":"Star-Lord","card_set_type_code":"hero"},{"code":"stld_nemesis","name":"Star-Lord Nemesis","card_set_type_code":"nemesis"},{"code":"gam","name":"Gamora","card_set_type_code":"hero"},{"code":"gam_nemesis","name":"Gamora Nemesis","card_set_type_code":"nemesis"}]')},191:function(e,t,o){},219:function(e,t){function o(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=219},243:function(e,t,o){},244:function(e,t,o){},249:function(e,t,o){},250:function(e,t,o){},251:function(e,t,o){"use strict";o.r(t);var a=o(5),r=o(0),n=o.n(r),s=o(27),i=o.n(s),c=(o(191),o(31));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d,l=o(152),u=o.n(l),h=o(24),p=o(116),m=o(67),g=o.n(m),f=o(292),T=Object(f.a)();!function(e){e.MarvelChampions="marvelchampions",e.LordOfTheRingsLivingCardGame="lotrlcg"}(d||(d={}));var C,v=["red","cyan","green","blue","magenta","yellow"],y=o(21),b=function(e){try{var t,o=localStorage.getItem(e);if(null===o)return{};var a=JSON.parse(o||"{}");return null!==(t=a.present)&&void 0!==t?t:a}catch(r){return console.error("problem parsing"),{}}},j=new URLSearchParams(window.location.search).get("gameType"),S=b("game"),k={activeDataType:null!==(C=null!==j&&void 0!==j?j:S.activeGameType)&&void 0!==C?C:d.MarvelChampions,data:{}},w=o(153),x=o(95),O=Object(h.b)("resetAction"),_=Object(h.b)("receiveRemoteGameState"),P=Object(h.b)("verifyRemoteGameState"),M=o(19),I=new URLSearchParams(window.location.search).get("gameType"),D=I?{activeGameType:I}:b("game");D.playerColors={},D.playerColors[T]="red",D.peerId="",D.previewCard=null,D.menuPreviewCardJsonId=null,D.radialMenuPosition=null;var N,R,E=Object(M.a)(Object(M.a)({},{playerColors:{},stageZoom:{x:.5,y:.5},stagePosition:{x:0,y:0},peerId:"",previewCard:null,menuPreviewCardJsonId:null,activeGameType:null,radialMenuPosition:null}),D),A=Object(h.d)({name:"game",initialState:E,reducers:{updateZoom:function(e,t){return e.stageZoom=t.payload,e},updatePosition:function(e,t){return e.stagePosition=t.payload,e},connectToRemoteGame:function(){},setPlayerColor:function(e,t){e.playerColors[t.payload.ref]=t.payload.color},setPeerId:function(e,t){e.peerId=t.payload},requestResync:function(){},setPreviewCardId:function(e,t){e.previewCard?e.previewCard.id!==t.payload&&(e.previewCard.id=t.payload):e.previewCard={id:t.payload}},clearPreviewCard:function(e){e.previewCard=null},setMenuPreviewCardJsonId:function(e,t){e.menuPreviewCardJsonId=t.payload},clearMenuPreviewCardJsonId:function(e){e.menuPreviewCardJsonId=null},updateActiveGameType:function(e,t){e.activeGameType=t.payload},quitGame:function(e){e.activeGameType=null},showRadialMenuAtPosition:function(e,t){e.radialMenuPosition=t.payload},hideRadialMenu:function(e){e.radialMenuPosition=null}},extraReducers:function(e){e.addCase(_,(function(e,t){e.activeGameType=t.payload.game.activeGameType})),e.addCase(O,(function(e,t){e.stagePosition={x:0,y:0},e.stageZoom={x:.5,y:.5},e.previewCard=null}))}}),L=A.actions,F=L.updateZoom,B=L.updatePosition,G=L.connectToRemoteGame,Q=L.setPlayerColor,H=L.setPeerId,W=L.requestResync,U=L.setPreviewCardId,z=L.clearPreviewCard,V=L.setMenuPreviewCardJsonId,K=L.clearMenuPreviewCardJsonId,J=L.updateActiveGameType,q=L.quitGame,Z=L.showRadialMenuAtPosition,Y=L.hideRadialMenu,X=A.reducer,$=function(e){var t,o,a;return{code:e.code,name:e.name,images:null,octgnId:null!==(t=e.octgn_id)&&void 0!==t?t:null,quantity:e.quantity,doubleSided:!!e.double_sided,backLink:null!==(o=e.back_link)&&void 0!==o?o:null,typeCode:e.type_code,subTypeCode:null,extraInfo:{setCode:null!==(a=e.set_code)&&void 0!==a?a:null,packCode:e.pack_code,factionCode:e.faction_code}}},ee=function(e){return function(t){var o,a,r,n,s,i=null===(o=t.Back)||void 0===o?void 0:o.ImagePath;if(t.Back&&!t.Back.ImagePath){var c=t.Front.ImagePath,d=c.split(".").slice(0,-1).join(".");"A"!==d[d.length-1]?console.log("No Non-B Back Image Path for ".concat(t.Slug," from ").concat(t.CardSet)):i=c.replaceAll("A.","B.")}return{code:e?t.Slug:t.RingsDbCardId,name:t.Title,images:{front:t.Front.ImagePath,back:null!==(a=i)&&void 0!==a?a:null},octgnId:null!==(r=t.OctgnGuid)&&void 0!==r?r:null,quantity:null!==(n=t.Quantity)&&void 0!==n?n:1,doubleSided:!!t.Back,backLink:null,typeCode:t.CardType,subTypeCode:t.CardSubType,extraInfo:{setCode:null!==(s=t.CardSet)&&void 0!==s?s:null,packCode:"TODO - lotr",factionCode:e?"encounter":"player"}}}},te=function(e,t){return function(o){var a=e?o.location.entities:o.location.encounterEntities;"0"===o.card.code[0]&&"0"===o.card.code[1]||(a[o.card.code]&&t&&console.error("Found multiple cards with code "+o.card.code+" "+o.card.name+" "+o.card.extraInfo.setCode+" Existing card is "+a[o.card.code].name+" "+a[o.card.code].extraInfo.setCode),a[o.card.code]=o.card)}},oe=Object(h.d)({name:"cardsData",initialState:k,reducers:{loadCardsData:function(e){e.data={};var t=e.data[d.MarvelChampions];return t?t.setData={}:(e.data[d.MarvelChampions]={entities:{},encounterEntities:{},setData:{}},t=e.data[d.MarvelChampions]),w.forEach((function(e){t&&(t.setData[e.code]={name:e.name,setTypeCode:e.card_set_type_code,cardsInSet:[]})})),(t=e.data[d.LordOfTheRingsLivingCardGame])?t.setData={}:(e.data[d.LordOfTheRingsLivingCardGame]={entities:{},encounterEntities:{},setData:{}},t=e.data[d.LordOfTheRingsLivingCardGame]),x.forEach((function(e){t&&(t.setData[e.Slug]={name:e.Title,setTypeCode:e.Product,cardsInSet:[]})})),e},loadCardsDataForPack:function(e,t){if(e.data[t.payload.packType]||(e.data[t.payload.packType]={entities:{},encounterEntities:{},setData:{}}),t.payload.packType===d.MarvelChampions){var o=!t.payload.pack_code.includes("_encounter");t.payload.pack.map($).map((function(o){return{location:e.data[t.payload.packType],card:o}})).forEach(te(o,!0))}else if(t.payload.packType===d.LordOfTheRingsLivingCardGame){var a=t.payload.pack;a.cards||console.log(a),a.cards.map(ee(!1)).map((function(o){return{location:e.data[t.payload.packType],card:o}})).forEach(te(!0,!0))}return e},loadCardsForEncounterSet:function(e,t){var o=e.data[d.LordOfTheRingsLivingCardGame],a=null===o||void 0===o?void 0:o.setData[t.payload.setCode];if(t.payload.cards.map)return t.payload.cards.map(ee(!0)).map((function(t){return{location:e.data[d.LordOfTheRingsLivingCardGame],card:t}})).forEach(te(!1,!1)),a&&(a.cardsInSet=a.cardsInSet.concat(t.payload.cards.filter((function(e){return-1===e.CardSet.toLocaleLowerCase().indexOf("nightmare")})).map((function(e){return{code:e.Slug,quantity:e.Quantity}})))),e;console.log("No cards found for scenario "+t.payload.setCode)}},extraReducers:function(e){e.addCase(_,(function(e,t){var o;e.activeDataType=null!==(o=t.payload.game.activeGameType)&&void 0!==o?o:d.MarvelChampions})),e.addCase(J,(function(e,t){e.activeDataType=t.payload}))}}),ae=oe.actions,re=ae.loadCardsData,ne=ae.loadCardsDataForPack,se=ae.loadCardsForEncounterSet,ie=oe.reducer,ce=Object(h.b)("addCardStackWithId"),de=Object(h.b)("pullCardOutOfCardStackWithId"),le=Object(h.b)("drawCardsOutOfCardStackWithIds"),ue=Object(h.b)("startCardMoveWithSplitStackId"),he=Object(h.b)("replaceCardStack"),pe=Object(h.b)("setStackShuffling"),me=Object(h.b)("createDeckFromTextFileWithIds"),ge=o(42),fe=o(114),Te=o.n(fe),Ce=o(35),ve=209,ye=150,be=418,je=300;!function(e){e.Stunned="stunned",e.Confused="confused",e.Tough="tough"}(N||(N={})),function(e){e.Damage="damage",e.Threat="threat",e.Generic="generic"}(R||(R={}));var Se,ke,we=function(e,t){var o=e.x-t.x,a=e.y-t.y;return Math.sqrt(o*o+a*a)},xe=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},Oe=o(33),_e=o.n(Oe),Pe=o(46),Me=o(76),Ie=o.n(Me),De=o(90),Ne=function(e){var t;return null!==(t=e.data[e.activeDataType])&&void 0!==t?t:{entities:{},encounterEntities:{},setData:{}}},Re=function(e){return e.cardsData},Ee=Object(De.a)(Re,(function(e){var t=Ne(e);return Object(M.a)(Object(M.a)({},t.entities),t.encounterEntities)})),Ae=Object(De.a)(Re,(function(e){return Ne(e).entities})),Le=Object(De.a)(Re,(function(e){var t=Ne(e),o={};return Object.values(t.entities).forEach((function(e){"hero"===e.typeCode&&(o[e.name]=e)})),o})),Fe=Object(De.a)(Re,(function(e){var t=Ne(e),o={};return Object.values(t.entities).forEach((function(e){"hero"!==e.typeCode&&(o[e.name]=e)})),o})),Be=Object(De.a)(Re,(function(e){return Ne(e).encounterEntities})),Ge=Object(De.a)(Re,(function(e){return Ne(e).setData})),Qe=Object(De.a)(Ge,Be,(function(e,t){return Object.entries(e).map((function(e){var o=Object(y.a)(e,2),a=o[0],r=o[1];return{setCode:a,setData:r,cards:r.cardsInSet.map((function(e){return t[e.code]}))}}))})),He=Object(De.a)(Be,Ae,Ge,(function(e,t,o){var a={},r=Object.values(t).filter((function(e){return"campaign"===e.extraInfo.factionCode}));return Object.values(e).concat(r).forEach((function(e){var t=e.extraInfo.setCode||"unknown";a[t]?a[t].push(e):a[t]=[e]})),Object.entries(a).map((function(e){var t=Object(y.a)(e,2),a=t[0],r=t[1];return{setCode:a,setData:o[a],cards:r}})).filter((function(e){return"nemesis"!==e.setData.setTypeCode&&"hero"!==e.setData.setTypeCode})).sort((function(e,t){return e.setData.name>t.setData.name?1:-1}))})),We=function(e){return e.liveState.present.cards},Ue=Object(De.a)(We,(function(e){return e.cards.reduce((function(e,t){return e[t.id]=t,e}),{})})),ze=function(e){return e.liveState.present.cards.panMode},Ve=function(e){return e.liveState.present.cards.multiselectMode},Ke=Object(De.a)(We,(function(e){var t={};return Object.entries(e.dropTargetCards).forEach((function(e){var o=Object(y.a)(e,2),a=o[0],r=o[1];r&&(t[r.id]={ownerRef:a,card:r})})),t})),Je={bkw:"07",cap:"04",drs:"08",hlk:"09",trors:"10",twc:"03"},qe={doctor_strange:[{jsonId:"09032"},{jsonId:"09033"},{jsonId:"09034"},{jsonId:"09035"},{jsonId:"09036"}],ant:[{jsonId:"12001c"}],wsp:[{jsonId:"13001c"}]},Ze=o(155),Ye=o.n(Ze),Xe=o(156),$e=o.n(Xe),et=o(157),tt=o.n(et),ot={marvelchampions:{deckSite:"marvelcdb.com",decklistApi:"https://marvelcdb.com/api/public/decklist/",encounterUiName:"Encounter Set",backgroundImageLocation:"/card-game-playground/images/table/background_marvelchampions.png",tokens:{stunned:{tokenType:N.Stunned,touchMenuLetter:null,touchMenuIcon:Object(a.jsx)(Ye.a,{fontSize:"large"}),menuText:"Stun",menuRemoveText:"Remove Stun",imagePath:"/card-game-playground/images/standard/stunned.png"},confused:{tokenType:N.Confused,touchMenuLetter:null,touchMenuIcon:Object(a.jsx)($e.a,{fontSize:"large"}),menuText:"Confuse",menuRemoveText:"Remove Confuse",imagePath:"/card-game-playground/images/standard/confused.png"},tough:{tokenType:N.Tough,touchMenuLetter:null,touchMenuIcon:Object(a.jsx)(tt.a,{fontSize:"large"}),menuText:"Tough",menuRemoveText:"Remove Tough",imagePath:"/card-game-playground/images/standard/tough.png"},damage:{counterTokenType:R.Damage,isNumeric:!0,touchMenuLetter:"D",touchMenuIcon:null,menuText:"Set Damage",imagePath:"/card-game-playground/images/standard/damage.png"},threat:{counterTokenType:R.Threat,isNumeric:!0,touchMenuLetter:"T",touchMenuIcon:null,menuText:"Set Threat",imagePath:"/card-game-playground/images/standard/threat.png"},generic:{counterTokenType:R.Generic,isNumeric:!0,touchMenuLetter:"G",touchMenuIcon:null,menuText:"Set Generic Tokens",imagePath:"/card-game-playground/images/standard/generic_counter.png"}}},lotrlcg:{deckSite:"ringsdb.com",decklistApi:"https://ringsdb.com/api/public/decklist/",encounterUiName:"Scenario",backgroundImageLocation:"/card-game-playground/images/table/background_lotrlcg.jpg",tokens:{stunned:{tokenType:N.Stunned,touchMenuLetter:"Q",touchMenuIcon:null,menuText:"Quest",menuRemoveText:"Remove From Quest",imagePath:"/card-game-playground/images/standard/quest.png"},confused:null,tough:null,damage:{counterTokenType:R.Damage,isNumeric:!0,touchMenuLetter:"D",touchMenuIcon:null,menuText:"Set Damage",imagePath:"/card-game-playground/images/standard/damage_lotr.png"},threat:{counterTokenType:R.Threat,isNumeric:!0,touchMenuLetter:"P",touchMenuIcon:null,menuText:"Set Progress",imagePath:"/card-game-playground/images/standard/progress.png"},generic:{counterTokenType:R.Generic,isNumeric:!0,touchMenuLetter:"R",touchMenuIcon:null,menuText:"Set Resource Tokens",imagePath:"/card-game-playground/images/standard/resource.png"}}}},at=function(e){return function(t,o){var a=We(o());(e?[a.cards.find((function(t){return t.id===e}))]:a.cards.filter((function(e){return e.selected&&e.controlledBy===T}))).filter((function(e){return!!e&&e.cardStack.length>1})).forEach((function(e){t(pe({id:e.id,shuffling:!0}));var o=ct(e.cardStack);t(he({id:e.id,newStack:o})),setTimeout((function(){t(pe({id:e.id,shuffling:!1}))}))}))}},rt=function(e){return function(t){var o=Array.from({length:e.numberToDraw}).map((function(e){return Object(f.a)()})),a=Object(M.a)(Object(M.a)({},e),{},{idsToUse:o});t(le(a))}},nt=Object(h.c)("decklist/fetchByIdStatus",function(){var e=Object(Pe.a)(_e.a.mark((function e(t,o){var a,r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.a.get("".concat(ot[t.gameType].decklistApi).concat(t.decklistId));case 2:a=e.sent,r=o.getState(),e.t0=t.gameType,e.next=e.t0===d.MarvelChampions?7:e.t0===d.LordOfTheRingsLivingCardGame?8:9;break;case 7:return e.abrupt("return",st(a,r,t));case 8:return e.abrupt("return",it(a,r,t));case 9:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}()),st=function(e,t,o){var a,r=Ae(t)[e.data.investigator_code].extraInfo.setCode,n=Be(t),s=[];Object.entries(n).filter((function(e){var t=Object(y.a)(e,2),o=(t[0],t[1]);return(o.extraInfo.setCode==="".concat(r)||o.extraInfo.setCode==="".concat(r,"_nemesis"))&&"obligation"===o.typeCode})).forEach((function(e){var t=Object(y.a)(e,2),o=t[0],a=t[1];s=s.concat(Array.from({length:a.quantity}).map((function(e){return o})))}));var i=Object.values(n).filter((function(e){return e.extraInfo.setCode==="".concat(r,"_nemesis")&&"obligation"!==e.typeCode})),c=[];i.forEach((function(e){c=c.concat(Array.from({length:e.quantity}).map((function(t){return e.code})))}));var d=null!==(a=qe[null!==r&&void 0!==r?r:""])&&void 0!==a?a:[];return{position:o.position,heroId:Object(f.a)(),data:e.data,dataId:Object(f.a)(),extraHeroCards:d,relatedEncounterDeck:c,encounterDeckId:Object(f.a)(),relatedObligationDeck:s,obligationDeckId:Object(f.a)()}},it=function(e,t,o){var a=Ae(t),r=[];Object.entries(e.data.heroes).forEach((function(e){var t=Object(y.a)(e,2),o=t[0],a=t[1],n=Array.from(Array(a).keys()).map((function(){return{jsonId:o}}));r=r.concat(n)}));var n={};return Object.entries(e.data.slots).forEach((function(e){var t=Object(y.a)(e,2),o=t[0],r=t[1],s=a[o];if(!s)throw new Error("Couldn't find card data for ".concat(o));"Hero"!==s.typeCode&&(n[o]=r)})),e.data.slots=n,{position:o.position,heroId:Object(f.a)(),data:e.data,dataId:Object(f.a)(),extraHeroCards:r,relatedEncounterDeck:[],encounterDeckId:Object(f.a)(),relatedObligationDeck:[],obligationDeckId:Object(f.a)()}},ct=function(e){for(var t,o,a=JSON.parse(JSON.stringify(e)),r=a.length;0!==r;)o=Math.floor(Math.random()*r),t=a[r-=1],a[r]=a[o],a[o]=t;return a},dt=o(63),lt=new URLSearchParams(window.location.search).get("cards"),ut=(lt?{cards:JSON.parse(dt.b(lt))}:null)||(null!==(Se=null===(ke=b("liveState"))||void 0===ke?void 0:ke.cards)&&void 0!==Se?Se:{});ut.cards&&ut.cards.forEach((function(e){e.controlledBy="",e.selected=!1,e.shuffling=!1})),ut.attachTargetCards={},ut.dropTargetCards={},ut.ghostCards=[],ut.outOfSyncWithRemote=!1;var ht,pt,mt,gt=Object(M.a)(Object(M.a)({},{outOfSyncWithRemote:!1,cards:[],ghostCards:[],dropTargetCards:{},attachTargetCards:{},panMode:!0,multiselectMode:!1}),ut),ft=function(e,t){return e.cards.find((function(e){return e.id===t}))},Tt=function(e,t,o,a){var r=ft(e,t);!r||""!==r.controlledBy&&r.controlledBy!==o||a(r)},Ct=function(e,t,o){e.cards.filter((function(e){return e.selected&&e.controlledBy===t})).forEach((function(e){return o(e)}))},vt=function(e,t){e.cards.filter((function(e){return!e.selected})).forEach((function(e){return t(e)}))},yt=function(e,t){for(var o={x:0,y:0},a=!0,r=function(r){var n=t.x+50*(r+1),s=t.y-50*(r+1);o={x:n,y:s},a=!!e.cards.find((function(e){return e.x===n&&e.y===s}))},n=0;a;n++)r(n);return o},bt=function(e,t){e.cards.filter((function(e){return""===e.controlledBy||e.controlledBy===t.ACTOR_REF})).forEach((function(e){e.selected=!1,e.controlledBy=""}))},jt=Object(h.d)({name:"cards",initialState:gt,reducers:{selectCard:function(e,t){t.payload.unselectOtherCards&&bt(e,t),Tt(e,t.payload.id,t.ACTOR_REF,(function(e){e.selected=!0,e.controlledBy=t.ACTOR_REF}))},unselectCard:function(e,t){Tt(e,t.payload,t.ACTOR_REF,(function(e){e.selected=!1,e.controlledBy=""}))},toggleSelectCard:function(e,t){Tt(e,t.payload,t.ACTOR_REF,(function(e){e.selected=!e.selected,e.selected?e.controlledBy=t.ACTOR_REF:e.controlledBy=""}))},exhaustCard:function(e,t){e.cards.filter((function(e){var o;return e.controlledBy===t.ACTOR_REF&&(e.id===(null!==(o=t.payload)&&void 0!==o?o:"")||e.selected)})).forEach((function(e){e.exhausted=!e.exhausted}))},cardMove:function(e,t){var o,a,r,n,s=[],i=null;e.cards.filter((function(e){return e.id===t.payload.id||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(e){e.id===t.payload.id&&(i=e),e.x+=t.payload.dx,e.y+=t.payload.dy,s.push(e)}));var c=[];i&&i.controlledBy===t.ACTOR_REF&&vt(e,(function(e){var t=we({x:e.x,y:e.y},i?{x:i.x,y:i.y}:{x:0,y:0});t<30&&c.push({distance:t,card:e})})),e.dropTargetCards[t.ACTOR_REF]=null!==(o=null===(a=c.sort((function(e,t){return e.distance-t.distance}))[0])||void 0===a?void 0:a.card)&&void 0!==o?o:null;var d=[];i&&i.controlledBy===t.ACTOR_REF&&vt(e,(function(e){var t,o,a,r,n=we(i?{x:i.x,y:i.y}:{x:0,y:0},{x:e.x,y:e.y});n<150&&n>50&&e.x<(null!==(t=null===(o=i)||void 0===o?void 0:o.x)&&void 0!==t?t:0)&&e.y>(null!==(a=null===(r=i)||void 0===r?void 0:r.y)&&void 0!==a?a:0)&&d.push({distance:n,card:e})})),e.attachTargetCards[t.ACTOR_REF]=null!==(r=null===(n=d.sort((function(e,t){return e.distance-t.distance}))[0])||void 0===n?void 0:n.card)&&void 0!==r?r:null;var l=e.attachTargetCards[t.ACTOR_REF];if(l){var u=yt(e,l);if(!e.ghostCards.find((function(e){return e.x===u.x&&e.y===u.y&&e.cardStack.length>0&&"-1"===e.cardStack[0].jsonId}))){var h=JSON.parse(JSON.stringify(l));h.id=Object(f.a)(),h.x=u.x,h.y=u.y,h.cardStack=[{jsonId:"-1"}],e.ghostCards.push(h)}}else e.ghostCards=e.ghostCards.filter((function(e){return e.cardStack.length>0&&"-1"!==e.cardStack[0].jsonId}));s.forEach((function(t){e.cards.push(e.cards.splice(e.cards.indexOf(t),1)[0])}))},endCardMove:function(e,t){var o=[],a=[];e.cards.filter((function(e){return e.id===t.payload||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(r){r.dragging=!1,e.attachTargetCards[t.ACTOR_REF]?a.push(r):e.dropTargetCards[t.ACTOR_REF]&&(o=o.concat(r.cardStack))}));var r=e.attachTargetCards[t.ACTOR_REF];if(r){var n=yt(e,r);a.forEach((function(t,o){t.x=n.x+50*o,t.y=n.y-50*o,e.cards.unshift(e.cards.splice(e.cards.indexOf(t),1)[0])}))}else if(e.dropTargetCards[t.ACTOR_REF]){e.cards=e.cards.filter((function(e){return!(e.id===t.payload||e.selected&&e.controlledBy===t.ACTOR_REF)}));var s=e.cards.find((function(o){var a;return o.id===(null===(a=e.dropTargetCards[t.ACTOR_REF])||void 0===a?void 0:a.id)}));s&&o.length>0&&(s.cardStack=o.concat(s.cardStack))}e.ghostCards=[],e.dropTargetCards[t.ACTOR_REF]=null,e.attachTargetCards[t.ACTOR_REF]=null},selectMultipleCards:function(e,t){t.payload.ids.map((function(t){return e.cards.find((function(e){return e.id===t}))})).forEach((function(e){!e||""!==e.controlledBy&&e.controlledBy!==t.ACTOR_REF||(e.selected=!0,e.controlledBy=t.ACTOR_REF)}))},unselectAllCards:bt,togglePanMode:function(e){e.panMode=!e.panMode},toggleMultiselectMode:function(e){e.multiselectMode=!e.multiselectMode},flipCards:function(e,t){e.cards.filter((function(e){return e.selected&&(""===e.controlledBy||e.controlledBy===t.ACTOR_REF)})).forEach((function(e){e.faceup=!e.faceup,e.cardStack=e.cardStack.reverse()}))},resetCards:function(e){e.cards=[]},toggleToken:function(e,t){var o=e.cards.find((function(e){return e.id===t.payload.id}));o?void 0!==t.payload.value?o.statusTokens[t.payload.tokenType]=t.payload.value:o.statusTokens[t.payload.tokenType]=!o.statusTokens[t.payload.tokenType]:Ct(e,t.ACTOR_REF,(function(e){void 0!==t.payload.value?e.statusTokens[t.payload.tokenType]=t.payload.value:e.statusTokens[t.payload.tokenType]=!e.statusTokens[t.payload.tokenType]}))},adjustCounterToken:function(e,t){e.cards.filter((function(e){return!!t.payload.id&&t.payload.id===e.id||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(e){void 0!==t.payload.value?e.counterTokens[t.payload.tokenType]=t.payload.value:void 0!==t.payload.delta&&(e.counterTokens[t.payload.tokenType]+=t.payload.delta),e.counterTokens[t.payload.tokenType]<0&&(e.counterTokens[t.payload.tokenType]=0)}))},clearCardTokens:function(e,t){e.cards.filter((function(e){var o;return e.controlledBy===t.ACTOR_REF&&(e.id===(null!==(o=t.payload)&&void 0!==o?o:"")||e.selected)})).forEach((function(e){e.statusTokens={tough:!1,stunned:!1,confused:!1},e.counterTokens={damage:0,threat:0,generic:0}}))}},extraReducers:function(e){e.addCase(_,(function(e,t){e.cards=t.payload.liveState.present.cards.cards,e.ghostCards=t.payload.liveState.present.cards.ghostCards})),e.addCase(P,(function(e,t){var o;e.outOfSyncWithRemote=!(Te()(null===(o=Object(Ce.f)(e.cards))||void 0===o?void 0:o.filter((function(e){return!e.dragging})),t.payload.liveState.present.cards.cards.filter((function(e){return!e.dragging})))&&Te()(Object(Ce.f)(e.ghostCards),t.payload.liveState.present.cards.ghostCards)),e.outOfSyncWithRemote?console.error("CARDS state is out of synce with remote!!!",Object(Ce.f)(e),t.payload.liveState.present.cards):console.log("CARDS state is in sync")})),e.addCase(he,(function(e,t){var o=e.cards.find((function(e){return e.id===t.payload.id}));o&&(o.cardStack=t.payload.newStack)})),e.addCase(O,(function(e){e.cards=[],e.dropTargetCards={},e.ghostCards=[],e.panMode=!0})),e.addCase(ce,(function(e,t){var o={controlledBy:"",x:t.payload.position.x,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.id,cardStack:t.payload.cardJsonIds.map((function(e){return{jsonId:e}})),selected:!1,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0}};e.cards.push(o)})),e.addCase(de,(function(e,t){var o=e.cards.find((function(e){return e.id===t.payload.cardStackId}));if(o&&o.cardStack.length>1){var a=[{jsonId:t.payload.jsonId}],r=Object.assign({},o,{cardStack:a});r.id=t.payload.id,r.selected=!0,r.controlledBy=t.ACTOR_REF,r.x=r.x+ye+5;var n=o.cardStack.findIndex((function(e){return e.jsonId===t.payload.jsonId}));-1!==n&&o.cardStack.splice(n,1),o.selected=!1,o.controlledBy="",e.cards.push(r)}})),e.addCase(ue,(function(e,t){var o=ft(e,t.payload.id);if(o&&!o.selected&&(e.cards=e.cards.map((function(e){return""!==e.controlledBy&&e.controlledBy!==t.ACTOR_REF||(e.selected=e.id===t.payload.id,e.selected?e.controlledBy=t.ACTOR_REF:e.controlledBy=""),e}))),t.payload.splitTopCard){var a=e.cards.find((function(e){return e.id===t.payload.id}));if(!a)throw new Error("Expected to find card");a.selected=!1,a.controlledBy="";var r=a.cardStack.shift(),n=Object.assign({},a,{selected:!0,controlledBy:t.ACTOR_REF,dragging:!0,cardStack:[r]});a.id=t.payload.splitCardId,e.cards.push(n)}e.ghostCards=[],t.payload.splitTopCard||Ct(e,t.ACTOR_REF,(function(t){t.dragging=!0,e.ghostCards.push(Object.assign({},t))}))})),e.addCase(le,(function(e,t){if(t.payload.numberToDraw!==t.payload.idsToUse.length)throw new Error("Did not receive the expected number of ids");bt(e,t);var o=e.cards.find((function(e){return e.id===t.payload.cardStackId}));if(!o)throw new Error("Couldn't find card stack with id ".concat(t.payload.cardStackId));for(var a=o.id,r=0;r<t.payload.numberToDraw;r++)if(o){var n=o.cardStack.shift();if(!n)throw new Error("Expected to find a top card, but didn't");var s=[{jsonId:n.jsonId}],i=Object.assign({},o,{cardStack:s});i.id=t.payload.idsToUse[r],i.selected=!0,i.controlledBy=t.ACTOR_REF,i.faceup=!t.payload.facedown,i.x=i.x+(ye+5)*(r+1),i.y+=ve,0===o.cardStack.length&&(e.cards=e.cards.filter((function(e){return e.id!==a})),o=void 0),e.cards.push(i)}})),e.addCase(pe,(function(e,t){var o=e.cards.find((function(e){return e.id===t.payload.id}));o&&(o.shuffling=t.payload.shuffling)})),e.addCase(me,(function(e,t){return St(e,t)})),e.addCase(nt.fulfilled,(function(e,t){return St(e,t)}))}}),St=function(e,t){console.log("got decklist"),console.log(t);var o=t.payload.data.investigator_code?[{jsonId:t.payload.data.investigator_code}]:[],a=[].concat(o,Object(ge.a)(t.payload.extraHeroCards)),r={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.heroId,cardStack:a,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0}},n=[];Object.entries(t.payload.data.slots).forEach((function(e){var t=Object(y.a)(e,2),o=t[0],a=t[1],r=Array.from(Array(a).keys()).map((function(){return{jsonId:o}}));n=n.concat(r)}));var s=ye+10,i={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x+s,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.dataId,cardStack:n,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0}},c={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x+2*s,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.encounterDeckId,cardStack:t.payload.relatedEncounterDeck.map((function(e){return{jsonId:e}})),statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0}},d={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x+3*s,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.obligationDeckId,cardStack:t.payload.relatedObligationDeck.map((function(e){return{jsonId:e}})),statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0}};r.cardStack.length>0&&e.cards.push(r),i.cardStack.length>0&&e.cards.push(i),c.cardStack.length>0&&e.cards.push(c),d.cardStack.length>0&&e.cards.push(d)},kt=jt.actions,wt=kt.selectCard,xt=kt.unselectCard,Ot=kt.toggleSelectCard,_t=kt.exhaustCard,Pt=kt.cardMove,Mt=kt.endCardMove,It=kt.selectMultipleCards,Dt=kt.unselectAllCards,Nt=kt.togglePanMode,Rt=kt.toggleMultiselectMode,Et=kt.flipCards,At=(kt.resetCards,kt.toggleToken),Lt=kt.adjustCounterToken,Ft=kt.clearCardTokens,Bt=jt.reducer,Gt=Object(h.b)("addNewCounterWithId"),Qt=new URLSearchParams(window.location.search).get("counters"),Ht=(Qt?JSON.parse(dt.b(Qt)):null)||(null!==(ht=null===(pt=b("liveState"))||void 0===pt?void 0:pt.counters)&&void 0!==ht?ht:{}),Wt=Object(M.a)(Object(M.a)({},{counters:[],firstPlayerCounterPosition:{x:0,y:0}}),Ht),Ut=Object(h.d)({name:"counters",initialState:Wt,reducers:{updateCounterValue:function(e,t){var o=e.counters.find((function(e){return e.id===t.payload.id}));o&&(o.value+=t.payload.delta,o.value<0&&(o.value=0))},removeCounter:function(e,t){e.counters=e.counters.filter((function(e){return e.id!==t.payload}))},moveCounter:function(e,t){var o=e.counters.find((function(e){return e.id===t.payload.id}));o&&(o.position={x:t.payload.newPos.x,y:t.payload.newPos.y})},moveFirstPlayerCounter:function(e,t){e.firstPlayerCounterPosition={x:t.payload.x,y:t.payload.y}},updateCounterColor:function(e,t){var o=e.counters.find((function(e){return e.id===t.payload.id}));o&&(o.color=t.payload.newColor)}},extraReducers:function(e){e.addCase(_,(function(e,t){e.counters=t.payload.liveState.present.counters.counters,e.firstPlayerCounterPosition=t.payload.liveState.present.counters.firstPlayerCounterPosition})),e.addCase(O,(function(e,t){e.counters=[],e.firstPlayerCounterPosition={x:0,y:0}})),e.addCase(Gt,(function(e,t){e.counters.push({id:t.payload.id,position:t.payload.pos,value:0,color:"red"})}))}}),zt=Ut.actions,Vt=zt.updateCounterValue,Kt=zt.removeCounter,Jt=zt.moveCounter,qt=zt.moveFirstPlayerCounter,Zt=zt.updateCounterColor,Yt=Ut.reducer,Xt=Object(p.a)({counters:Yt,cards:Bt}),$t=Object(p.a)({game:X,cardsData:ie,liveState:g()(Xt,{limit:20,groupBy:Object(m.groupByActionTypes)([Jt.type]),filter:Object(m.excludeAction)([ue.type,Pt.type,U.type,z.type])})}),eo=o(16),to=o(158),oo=o.n(to),ao=o(115),ro=o.n(ao),no=(mt={},Object(eo.a)(mt,G.type,!0),Object(eo.a)(mt,B.type,!0),Object(eo.a)(mt,F.type,!0),Object(eo.a)(mt,U.type,!0),Object(eo.a)(mt,z.type,!0),Object(eo.a)(mt,V.type,!0),Object(eo.a)(mt,K.type,!0),Object(eo.a)(mt,Nt.type,!0),Object(eo.a)(mt,_.type,!0),Object(eo.a)(mt,W.type,!0),Object(eo.a)(mt,re.type,!0),Object(eo.a)(mt,ne.type,!0),Object(eo.a)(mt,se.type,!0),mt),so=function(){false},io=function(e,t){e.on("data",(function(o){o.INITIAL_STATE_MSG?(console.log("going to replace (most of) state with",o.state),setTimeout((function(){t.dispatch(_(o.state))}),0)):o.RESYNC?(so("received request for resync"),e.send({INITIAL_STATE_MSG:!0,state:t.getState()})):o.PING?(o.REMOTE_ACTION=!0,t.dispatch(P(o.state))):(so("recieved remote action",o),o.REMOTE_ACTION=!0,so("dispatching remote action",o),t.dispatch(o))}))},co=Object(h.e)({thunk:!0,immutableCheck:!1,serializableCheck:!1}).concat((function(e){var t,o=new oo.a(void 0,{host:"peerjs.middle-earth.house",path:"/cgp",secure:!0,debug:0,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",username:"webrtc@live.com",credential:"muazkh"}]}});return o.on("error",(function(e){console.error("*****************Server error"),console.error(e)})),o.on("disconnected",(function(){console.log("****Peer server connection disconnected")})),o.on("open",(function(a){console.log("My peer ID is: "+a),e.dispatch(H(a));var r=window.location.href.split("remote=");if(r.length>1){var n=r[1].split("&")[0];console.log("FOUND QUERY PARAM. Going to connect to peer "+n),t=o.connect(n,{metadata:{ref:T}}),io(t,e)}})),o.on("connection",(function(o){console.log("Connection received!"),io(t=o,e),t.on("open",(function(){console.log("connection ready for data");var o=ro()(e.getState());delete o.cardsData,so("going to send initial state",o),t.send({INITIAL_STATE_MSG:!0,state:o});var a=Q({ref:t.metadata.ref,color:"blue"});t.send(a),t.send(Q({ref:T,color:"red"})),e.dispatch(a),setInterval((function(){var o=ro()(e.getState());delete o.cardsData,t.send({PING:!0,state:o})}),5e3)})),t.on("error",(function(e){console.error("****************Connection error:",e)})),t.on("close",(function(){console.log("******connection closed for ref "+t.metadata.ref)})),t.peerConnection.onconnectionstatechange=function(e){console.log("connection state changed"),console.log(e),console.log(t.peerConnection.connectionState),"closed"!==t.peerConnection.connectionState&&"disconnected"!==t.peerConnection.connectionState||console.log("CLEARING CLIENT OWNED CARDS for "+t.metadata.ref)}})),function(a){return function(r){return so("received local action",r),r.REMOTE_ACTION?r.ACTOR_REF||(console.error("Received a REMOTE action without an ACTOR_REF:"),console.log(r)):r.ACTOR_REF=T,r.type===G.type?(console.log("going to connect to peer "+r.payload),t=o.connect(r.payload,{metadata:{ref:T}}),io(t,e)):r.type===W.type&&t&&t.send({RESYNC:!0}),r.REMOTE_ACTION||!t||no[r.type]||(so("going to send action to peer!"),t.send(r)),a(r)}}}));var lo,uo,ho=o(8),po=o(9),mo=o(10),go=o(11),fo=o(159),To=o(101),Co=o(28),vo=o(85),yo=47,bo=47,jo=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(e){var a,r,n,s;Object(ho.a)(this,o),(s=t.call(this,e)).damageImg=void 0,s.threatImg=void 0,s.genericImg=void 0,s.unmounted=void 0,s.unmounted=!0,s.state={imagesLoaded:{damage:!1,threat:!1,generic:!1}},s.damageImg=new Image,s.threatImg=new Image,s.genericImg=new Image;var i=ot[s.props.currentGameType].tokens;return s.damageImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:!0,threat:s.state.imagesLoaded.threat,generic:s.state.imagesLoaded.generic}})},(null===(a=s.props.card)||void 0===a?void 0:a.counterTokens.damage)&&i.damage&&(s.damageImg.src=i.damage.imagePath),s.threatImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:s.state.imagesLoaded.damage,threat:!0,generic:s.state.imagesLoaded.generic}})},(null===(r=s.props.card)||void 0===r?void 0:r.counterTokens.threat)&&i.threat&&(s.threatImg.src=i.threat.imagePath),s.genericImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:s.state.imagesLoaded.damage,threat:s.state.imagesLoaded.threat,generic:!0}})},(null===(n=s.props.card)||void 0===n?void 0:n.counterTokens.generic)&&i.generic&&(s.genericImg.src=i.generic.imagePath),s}return Object(po.a)(o,[{key:"componentDidUpdate",value:function(e,t){var o,a,r,n,s,i,c=ot[this.props.currentGameType].tokens;!this.state.imagesLoaded.damage&&!(null===(o=e.card)||void 0===o?void 0:o.counterTokens.damage)&&(null===(a=this.props.card)||void 0===a?void 0:a.counterTokens.damage)&&c.damage&&(this.damageImg.src=c.damage.imagePath),!this.state.imagesLoaded.threat&&!(null===(r=e.card)||void 0===r?void 0:r.counterTokens.threat)&&(null===(n=this.props.card)||void 0===n?void 0:n.counterTokens.threat)&&c.threat&&(this.threatImg.src=c.threat.imagePath),!this.state.imagesLoaded.generic&&!(null===(s=e.card)||void 0===s?void 0:s.counterTokens.generic)&&(null===(i=this.props.card)||void 0===i?void 0:i.counterTokens.generic)&&c.generic&&(this.genericImg.src=c.generic.imagePath)}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){if(!this.props.card)return null;var e=this.props.x-23.5,t=this.props.y-ve/2+20,o=this.state.imagesLoaded.damage&&!!this.props.card.counterTokens.damage,r=o?Object(a.jsx)(Co.c,{x:e,y:t,scale:{x:yo/this.damageImg.naturalWidth,y:bo/this.damageImg.naturalHeight},width:this.damageImg.naturalWidth,height:this.damageImg.naturalHeight,fillPatternImage:this.damageImg},"".concat(this.props.card.id,"-damageToken")):null,n=o?Object(a.jsx)(Co.e,{x:e,y:t,width:this.damageImg.naturalWidth*(yo/this.damageImg.naturalWidth),height:this.damageImg.naturalHeight*(bo/this.damageImg.naturalHeight),text:"".concat(this.props.card.counterTokens.damage),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-damageText")):null,s=this.props.x-23.5,i=t+bo+5,c=this.state.imagesLoaded.threat&&!!this.props.card.counterTokens.threat,d=c?Object(a.jsx)(Co.c,{x:s,y:i,scale:{x:yo/this.threatImg.naturalWidth,y:bo/this.threatImg.naturalHeight},width:this.threatImg.naturalWidth,height:this.threatImg.naturalHeight,fillPatternImage:this.threatImg},"".concat(this.props.card.id,"-threatToken")):null,l=c?Object(a.jsx)(Co.e,{x:s,y:i,width:this.threatImg.naturalWidth*(yo/this.threatImg.naturalWidth),height:this.threatImg.naturalHeight*(bo/this.threatImg.naturalHeight),text:"".concat(this.props.card.counterTokens.threat),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-threatText")):null,u=this.props.x-23.5,h=i+bo+5,p=this.state.imagesLoaded.generic&&!!this.props.card.counterTokens.generic;return[r,n,d,l,p?Object(a.jsx)(Co.c,{x:u,y:h,scale:{x:yo/this.genericImg.naturalWidth,y:bo/this.genericImg.naturalHeight},width:this.genericImg.naturalWidth,height:this.genericImg.naturalHeight,fillPatternImage:this.genericImg},"".concat(this.props.card.id,"-genericToken")):null,p?Object(a.jsx)(Co.e,{x:u,y:h,width:this.genericImg.naturalWidth*(yo/this.genericImg.naturalWidth),height:this.genericImg.naturalHeight*(bo/this.genericImg.naturalHeight),text:"".concat(this.props.card.counterTokens.generic),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-genericText")):null]}}]),o}(r.Component),So=Object(c.c)((function(e,t){return{card:Ue(e)[t.id]}}),{})(jo),ko={"05026":!0},wo={"02001a":"/card-game-playground/images/cards/8665869b-fae4-494e-91d1-1e8c308220c2.jpg","02001b":"/card-game-playground/images/cards/8665869b-fae4-494e-91d1-1e8c308220c2.b.jpg","02002a":"/card-game-playground/images/cards/cfd051be-4ade-4cf8-b575-4b673cfa9a92.jpg","02002b":"/card-game-playground/images/cards/cfd051be-4ade-4cf8-b575-4b673cfa9a92.b.jpg","02003a":"/card-game-playground/images/cards/b16187a4-3f29-4a4b-8b66-6e8c7524c402.jpg","02003b":"/card-game-playground/images/cards/b16187a4-3f29-4a4b-8b66-6e8c7524c402.b.jpg","02004":"/card-game-playground/images/cards/b35084d9-3a2b-418c-b1a4-e4929de16a2c.jpg","02004_double_sided_back":"/card-game-playground/images/cards/b35084d9-3a2b-418c-b1a4-e4929de16a2c.b.jpg","02005":"/card-game-playground/images/cards/1eae757a-25b2-4b29-a8e7-f43b12c531b0.jpg","02005_double_sided_back":"/card-game-playground/images/cards/1eae757a-25b2-4b29-a8e7-f43b12c531b0.b.jpg","02006a":"/card-game-playground/images/cards/0a59161d-7db6-4328-9eeb-1906ce8715a5.jpg","02006b":"/card-game-playground/images/cards/0a59161d-7db6-4328-9eeb-1906ce8715a5.b.jpg",12020:"https://lcgcdn.s3.amazonaws.com/mc/MC13en_20.jpg","15001a":"https://marvelcdb.com/bundles/cards/15001a.png","15001b":"https://marvelcdb.com/bundles/cards/15001b.png",15002:"https://hallofheroeshome.files.wordpress.com/2021/03/s1.jpg",15003:"https://hallofheroeshome.files.wordpress.com/2021/03/s2.jpg",15004:"https://hallofheroeshome.files.wordpress.com/2021/03/s6.jpg",15005:"https://hallofheroeshome.files.wordpress.com/2021/03/s7.jpg",15006:"https://hallofheroeshome.files.wordpress.com/2021/03/s10.jpg",15007:"https://hallofheroeshome.files.wordpress.com/2021/03/s11.jpg",15008:"https://hallofheroeshome.files.wordpress.com/2021/03/s12.jpg",15009:"https://hallofheroeshome.files.wordpress.com/2021/03/s15.jpg",15010:"https://hallofheroeshome.files.wordpress.com/2021/03/w1.jpg",15011:"https://hallofheroeshome.files.wordpress.com/2021/03/w2.jpg",15012:"https://hallofheroeshome.files.wordpress.com/2021/03/w3.jpg",15013:"https://hallofheroeshome.files.wordpress.com/2021/03/w4.jpg",15014:"https://hallofheroeshome.files.wordpress.com/2021/03/w5.jpg",15015:"https://hallofheroeshome.files.wordpress.com/2021/03/w6.jpg",15019:"https://hallofheroeshome.files.wordpress.com/2021/03/w10.jpg",15023:"https://hallofheroeshome.files.wordpress.com/2021/03/n2.jpg",15024:"https://hallofheroeshome.files.wordpress.com/2021/03/n3.jpg",15025:"https://hallofheroeshome.files.wordpress.com/2021/03/n4.jpg",15026:"https://hallofheroeshome.files.wordpress.com/2021/03/n5.jpg",15027:"https://hallofheroeshome.files.wordpress.com/2021/03/n6.jpg",15028:"https://hallofheroeshome.files.wordpress.com/2021/03/z1.jpg",15029:"https://hallofheroeshome.files.wordpress.com/2021/03/z2.jpg",15030:"https://hallofheroeshome.files.wordpress.com/2021/03/z3.jpg",15031:"https://hallofheroeshome.files.wordpress.com/2021/03/z4.jpg","16001a":"https://marvelcdb.com/bundles/cards/16001a.png","16001b":"https://marvelcdb.com/bundles/cards/16001b.png",16002:"https://hallofheroeshome.files.wordpress.com/2021/04/g1.jpg",16003:"https://hallofheroeshome.files.wordpress.com/2021/04/g3.jpg",16004:"https://hallofheroeshome.files.wordpress.com/2021/04/g5.jpg",16005:"https://hallofheroeshome.files.wordpress.com/2021/04/g7.jpg",16006:"https://hallofheroeshome.files.wordpress.com/2021/04/g10.jpg",16007:"https://hallofheroeshome.files.wordpress.com/2021/04/g11.jpg",16008:"https://hallofheroeshome.files.wordpress.com/2021/04/g12.jpg",16009:"https://hallofheroeshome.files.wordpress.com/2021/04/g13.jpg",16010:"https://hallofheroeshome.files.wordpress.com/2021/04/g14.jpg",16011:"https://hallofheroeshome.files.wordpress.com/2021/04/g15.jpg",16012:"https://hallofheroeshome.files.wordpress.com/2021/04/z1.jpg",16014:"https://hallofheroeshome.files.wordpress.com/2021/04/z3.jpg",16016:"https://hallofheroeshome.files.wordpress.com/2021/04/z5.jpg",16017:"https://hallofheroeshome.files.wordpress.com/2021/04/z6.jpg",16019:"https://hallofheroeshome.files.wordpress.com/2021/04/z8.jpg",16020:"https://hallofheroeshome.files.wordpress.com/2021/04/z9.jpg",16024:"https://hallofheroeshome.files.wordpress.com/2021/04/z13.jpg",16025:"https://hallofheroeshome.files.wordpress.com/2021/04/n1.jpg",16026:"https://hallofheroeshome.files.wordpress.com/2021/04/n2.jpg",16027:"https://hallofheroeshome.files.wordpress.com/2021/04/n3.jpg",16028:"https://hallofheroeshome.files.wordpress.com/2021/04/n4.jpg","16029a":"https://marvelcdb.com/bundles/cards/16029a.png","16029b":"https://hallofheroeshome.files.wordpress.com/2021/04/r0a.jpg",16030:"https://hallofheroeshome.files.wordpress.com/2021/04/r1.jpg",16031:"https://hallofheroeshome.files.wordpress.com/2021/04/r3.jpg",16032:"https://hallofheroeshome.files.wordpress.com/2021/04/r5.jpg",16033:"https://hallofheroeshome.files.wordpress.com/2021/04/r6.jpg",16034:"https://hallofheroeshome.files.wordpress.com/2021/04/r8.jpg",16035:"https://hallofheroeshome.files.wordpress.com/2021/04/r10.jpg",16036:"https://hallofheroeshome.files.wordpress.com/2021/04/r11.jpg",16037:"https://hallofheroeshome.files.wordpress.com/2021/04/r12.jpg",16038:"https://hallofheroeshome.files.wordpress.com/2021/04/r13.jpg",16039:"https://hallofheroeshome.files.wordpress.com/2021/04/r15.jpg",16040:"https://hallofheroeshome.files.wordpress.com/2021/04/z1-1.jpg",16043:"https://hallofheroeshome.files.wordpress.com/2021/04/z4-1.jpg",16045:"https://hallofheroeshome.files.wordpress.com/2021/04/z6-1.jpg",16046:"https://hallofheroeshome.files.wordpress.com/2021/04/z7-1.jpg",16047:"https://hallofheroeshome.files.wordpress.com/2021/04/z8-1.jpg",16048:"https://hallofheroeshome.files.wordpress.com/2021/04/z9-1.jpg",16052:"https://hallofheroeshome.files.wordpress.com/2021/04/z13-1.jpg",16053:"https://hallofheroeshome.files.wordpress.com/2021/04/n0.jpg",16054:"https://hallofheroeshome.files.wordpress.com/2021/04/n1-1.jpg",16055:"https://hallofheroeshome.files.wordpress.com/2021/04/n2-1.jpg",16056:"https://hallofheroeshome.files.wordpress.com/2021/04/n3-1.jpg",16057:"https://hallofheroeshome.files.wordpress.com/2021/04/n4-1.jpg",16058:"https://hallofheroeshome.files.wordpress.com/2021/04/d1.jpg",16059:"https://hallofheroeshome.files.wordpress.com/2021/04/d2.jpg",16060:"https://hallofheroeshome.files.wordpress.com/2021/04/d3.jpg",16061:"https://hallofheroeshome.files.wordpress.com/2021/04/d4a.jpg","16061_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2021/04/d4b.jpg",16062:"https://hallofheroeshome.files.wordpress.com/2021/04/d5a.jpg","16062_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2021/04/d5b.jpg",16063:"https://hallofheroeshome.files.wordpress.com/2021/04/d6.jpg",16064:"https://hallofheroeshome.files.wordpress.com/2021/04/d7.jpg",16065:"https://hallofheroeshome.files.wordpress.com/2021/04/d8.jpg",16066:"https://hallofheroeshome.files.wordpress.com/2021/04/d10.jpg",16067:"https://hallofheroeshome.files.wordpress.com/2021/04/d11.jpg",16068:"https://hallofheroeshome.files.wordpress.com/2021/04/d12.jpg",16069:"https://hallofheroeshome.files.wordpress.com/2021/04/d13.jpg",16117:"https://hallofheroeshome.files.wordpress.com/2021/04/bb1.jpg",16118:"https://hallofheroeshome.files.wordpress.com/2021/04/bb3.jpg",16119:"https://hallofheroeshome.files.wordpress.com/2021/04/bb6.jpg",16120:"https://hallofheroeshome.files.wordpress.com/2021/04/bb7.jpg",16121:"https://hallofheroeshome.files.wordpress.com/2021/04/bb9.jpg",16142:"https://hallofheroeshome.files.wordpress.com/2021/04/sc1.jpg",16143:"https://hallofheroeshome.files.wordpress.com/2021/04/sc2.jpg",16144:"https://hallofheroeshome.files.wordpress.com/2021/04/sc3.jpg",16145:"https://hallofheroeshome.files.wordpress.com/2021/04/sc4.jpg",16146:"https://hallofheroeshome.files.wordpress.com/2021/04/sc5.jpg",16147:"https://hallofheroeshome.files.wordpress.com/2021/04/sc6.jpg",16148:"https://hallofheroeshome.files.wordpress.com/2021/04/sc7.jpg","17001a":"https://marvelcdb.com/bundles/cards/17001a.png","17001b":"https://marvelcdb.com/bundles/cards/17001b.png",17002:"https://hallofheroeshome.files.wordpress.com/2021/05/1-1.jpg",17003:"https://hallofheroeshome.files.wordpress.com/2021/05/2-1.jpg",17004:"https://hallofheroeshome.files.wordpress.com/2021/05/5.jpg",17005:"https://hallofheroeshome.files.wordpress.com/2021/05/7.jpg",17006:"https://hallofheroeshome.files.wordpress.com/2021/05/10.jpg",17007:"https://hallofheroeshome.files.wordpress.com/2021/05/11.jpg",17008:"https://hallofheroeshome.files.wordpress.com/2021/05/13.jpg",17009:"https://hallofheroeshome.files.wordpress.com/2021/05/14.jpg",17010:"https://hallofheroeshome.files.wordpress.com/2021/05/15.jpg",17011:"https://hallofheroeshome.files.wordpress.com/2021/05/a1.jpg",17012:"https://hallofheroeshome.files.wordpress.com/2021/05/a2.jpg",17013:"https://hallofheroeshome.files.wordpress.com/2021/05/a3.jpg",17014:"https://hallofheroeshome.files.wordpress.com/2021/05/a4.jpg",17015:"https://hallofheroeshome.files.wordpress.com/2021/05/a5.jpg",17017:"https://hallofheroeshome.files.wordpress.com/2021/05/a7.jpg",17019:"https://hallofheroeshome.files.wordpress.com/2021/05/a9.jpg",17020:"https://hallofheroeshome.files.wordpress.com/2021/05/a10.jpg",17021:"https://hallofheroeshome.files.wordpress.com/2021/05/a11.jpg",17022:"https://hallofheroeshome.files.wordpress.com/2021/05/a12.jpg",17023:"https://hallofheroeshome.files.wordpress.com/2021/05/a13.jpg",17024:"https://hallofheroeshome.files.wordpress.com/2021/05/o0.jpg",17025:"https://hallofheroeshome.files.wordpress.com/2021/05/o1.jpg",17026:"https://hallofheroeshome.files.wordpress.com/2021/05/o2.jpg",17027:"https://hallofheroeshome.files.wordpress.com/2021/05/o3.jpg",17028:"https://hallofheroeshome.files.wordpress.com/2021/05/bb1.jpg",17029:"https://hallofheroeshome.files.wordpress.com/2021/05/bb2.jpg",17030:"https://hallofheroeshome.files.wordpress.com/2021/05/bb3.jpg","18001a":"https://marvelcdb.com/bundles/cards/18001a.png","18001b":"https://marvelcdb.com/bundles/cards/18001b.png",18002:"https://hallofheroeshome.files.wordpress.com/2021/05/g1-1.jpg",18003:"https://hallofheroeshome.files.wordpress.com/2021/05/g2-1.jpg",18004:"https://hallofheroeshome.files.wordpress.com/2021/05/g4-1.jpg",18005:"https://hallofheroeshome.files.wordpress.com/2021/05/g6-1.jpg",18006:"https://hallofheroeshome.files.wordpress.com/2021/05/g8-1.jpg",18007:"https://hallofheroeshome.files.wordpress.com/2021/05/g10-1.jpg",18008:"https://hallofheroeshome.files.wordpress.com/2021/05/g12-1.jpg",18009:"https://hallofheroeshome.files.wordpress.com/2021/05/g13-1.jpg",18010:"https://hallofheroeshome.files.wordpress.com/2021/05/g15-1.jpg",18011:"https://hallofheroeshome.files.wordpress.com/2021/05/z0.png",18012:"https://hallofheroeshome.files.wordpress.com/2021/05/c1.jpg",18013:"https://hallofheroeshome.files.wordpress.com/2021/05/d1.jpg",18015:"https://hallofheroeshome.files.wordpress.com/2021/05/f1.jpg",18016:"https://hallofheroeshome.files.wordpress.com/2021/05/i111.jpg",18018:"https://hallofheroeshome.files.wordpress.com/2021/05/aaa1.jpg",18019:"https://hallofheroeshome.files.wordpress.com/2021/05/gamora-spoilers-41024_1.jpg",18020:"https://hallofheroeshome.files.wordpress.com/2021/05/h1.jpg",18024:"https://hallofheroeshome.files.wordpress.com/2021/05/n1.jpg",18025:"https://hallofheroeshome.files.wordpress.com/2021/05/s1.jpg",18026:"https://hallofheroeshome.files.wordpress.com/2021/05/n3.jpg",18027:"https://hallofheroeshome.files.wordpress.com/2021/05/n4.jpg",18028:"https://hallofheroeshome.files.wordpress.com/2021/05/n5.jpg",18029:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz1.jpg",18030:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz2.jpg",18031:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz3.jpg"},xo=["main_scheme","side_scheme","quest","player_side_quest"],Oo=function(e,t){return e.length===t.length&&e.every((function(e,o){return e===t[o]}))},_o=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(e){var r,n,s,i;Object(ho.a)(this,o),(i=t.call(this,e)).imgs=[],i.stunnedImg=void 0,i.confusedImg=void 0,i.toughImg=void 0,i.unmounted=void 0,i.touchTimer=null,i.rect=null,i.shuffleToggle=!1,i.initCardImages=function(e){i.imgs=e.imgUrls.map((function(){return new Image})),i.imgs.forEach((function(e){return e.onload=function(){i.unmounted||i.setState({imageLoaded:!0})}})),i.imgs.forEach((function(e){return e.onerror=function(){i.unmounted||i.setState({imageLoadFailed:i.state.imageLoadFailed+1})}})),e.imgUrls.forEach((function(e,t){return i.imgs[t].src=e}))},i.getStrokeColor=function(){return i.props.dropTargetColor?i.props.dropTargetColor:i.props.selected?i.props.selectedColor:""},i.renderUnanimatedCard=function(e,t,o){var r,n,s,c=o?i.imgs.find((function(e){return e.complete&&0!==e.naturalHeight})):void 0,d=i.getScale(c,t,e),l={x:t/2,y:e/2},u=Object(a.jsx)(vo.Spring,{to:{rotation:i.props.exhausted?90:0},children:function(r){return Object(a.jsx)(vo.animated.Rect,Object(M.a)(Object(M.a)({},r),{},{ref:function(e){e&&(i.rect=e)},cornerRadius:9,x:i.props.x,y:i.props.y,width:t,height:e,offset:l,stroke:i.getStrokeColor(),strokeWidth:i.getStrokeColor()?4:0,fillPatternRotation:!o||i.shouldRenderImageHorizontal(i.props.code,i.props.typeCode||"",xo)?270:0,fillPatternImage:c,fillPatternScaleX:d.width,fillPatternScaleY:d.height,fill:o?void 0:"gray",shadowForStrokeEnabled:!1,hitStrokeWidth:0,opacity:i.props.isGhost?.5:1,draggable:""===i.props.controlledBy||i.props.controlledBy===T,onDragStart:i.handleDragStart,onDragMove:i.handleDragMove,onDragEnd:i.handleDragEnd,onDblClick:i.handleDoubleClick,onDblTap:i.handleDoubleTap,onClick:i.handleClick,onTap:i.handleTap,onMouseDown:i.handleMouseDown,onTouchStart:i.handleTouchStart,onTouchMove:i.handleTouchMove,onTouchEnd:i.handleTouchEnd,onMouseOver:i.handleMouseOver,onMouseOut:i.handleMouseOut,onContextMenu:i.handleContextMenu}))}},"".concat(i.props.id,"-card")),h={x:l.x+4,y:l.y-4},p=(i.props.numCardsInStack||1)>1?Object(a.jsx)(vo.Spring,{to:{rotation:i.props.exhausted?90:0},children:function(o){return Object(a.jsx)(vo.animated.Rect,Object(M.a)(Object(M.a)({},o),{},{cornerRadius:[9,9,9,9],x:i.props.x,y:i.props.y,width:t,height:e,offset:h,opacity:i.props.isGhost?.5:1,fill:"gray",shadowForStrokeEnabled:!1,hitStrokeWidth:0}))}},"".concat(i.props.id,"-cardStack")):null,m=!!(null===(r=i.props.cardState)||void 0===r?void 0:r.stunned)&&i.state.tokenImagesLoaded.stunned,g=i.getTokenInSlot(m,i.stunnedImg,l,0),f=i.getTokenInSlot(!!(null===(n=i.props.cardState)||void 0===n?void 0:n.confused)&&i.state.tokenImagesLoaded.confused,i.confusedImg,l,1),C=i.getTokenInSlot(!!(null===(s=i.props.cardState)||void 0===s?void 0:s.tough)&&i.state.tokenImagesLoaded.tough,i.toughImg,l,2),v=i.props.dragging||i.props.isGhost?null:Object(a.jsx)(So,{currentGameType:i.props.currentGameType,id:i.props.id,x:i.props.x,y:i.props.y},"".concat(i.props.id,"-cardTokens"));return[p,u,i.renderCardName(l,t,e),g,f,C,v]},i.handleContextMenu=function(e){i.props.handleContextMenu&&i.props.handleContextMenu(i.props.id,e)},i.handleDoubleClick=function(e){i.props.handleDoubleClick&&i.props.handleDoubleClick(i.props.id,e)},i.handleDoubleTap=function(e){i.props.handleDoubleTap&&i.props.handleDoubleTap(i.props.id,e)},i.handleDragStart=function(e){i.props.handleDragStart&&i.props.handleDragStart(i.props.id,e)},i.handleDragMove=function(e){i.props.handleDragMove&&i.props.handleDragMove({id:i.props.id,dx:e.target.x()-i.props.x,dy:e.target.y()-i.props.y})},i.handleDragEnd=function(){i.props.handleDragEnd&&i.props.dragging&&i.props.handleDragEnd(i.props.id)},i.handleTap=function(e){i.handleTapOrClick(e,!0)},i.handleClick=function(e){i.handleTapOrClick(e,!1)},i.handleTapOrClick=function(e,t){i.props.handleClick&&(i.props.handleClick(i.props.id,e,t),e.cancelBubble=!0)},i.handleMouseDown=function(e){e.cancelBubble=!0},i.handleTouchStart=function(e){e.cancelBubble=!0,i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout((function(){i.handleContextMenu(e)}),750)},i.handleTouchMove=function(e){i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null)},i.handleTouchEnd=function(e){i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null)},i.handleMouseOver=function(){i.props.handleHover&&i.props.handleHover(i.props.id)},i.handleMouseOut=function(){i.props.handleHoverLeave&&i.props.handleHoverLeave(i.props.id)},i.unmounted=!0,i.state={imageLoaded:!1,imageLoadFailed:0,prevImgUrls:i.props.imgUrls,tokenImagesLoaded:{stunned:!1,confused:!1,tough:!1}},i.initCardImages(e),i.stunnedImg=new Image,i.confusedImg=new Image,i.toughImg=new Image,i.stunnedImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:!0,confused:i.state.tokenImagesLoaded.confused,tough:i.state.tokenImagesLoaded.tough}})};var c=ot[e.currentGameType].tokens;return(null===(r=e.cardState)||void 0===r?void 0:r.stunned)&&c.stunned&&(i.stunnedImg.src=c.stunned.imagePath),i.confusedImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:i.state.tokenImagesLoaded.stunned,confused:!0,tough:i.state.tokenImagesLoaded.tough}})},(null===(n=e.cardState)||void 0===n?void 0:n.confused)&&c.confused&&(i.confusedImg.src=c.confused.imagePath),i.toughImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:i.state.tokenImagesLoaded.stunned,confused:i.state.tokenImagesLoaded.confused,tough:!0}})},(null===(s=e.cardState)||void 0===s?void 0:s.tough)&&c.tough&&(i.toughImg.src=c.tough.imagePath),i}return Object(po.a)(o,null,[{key:"getDerivedStateFromProps",value:function(e,t){var o;return Oo(e.imgUrls,null!==(o=t.prevImgUrls)&&void 0!==o?o:[])?null:{imageLoaded:!1,imageLoadFailed:0,prevImgUrls:e.imgUrls,tokenImagesLoaded:{stunned:t.tokenImagesLoaded.stunned,confused:t.tokenImagesLoaded.confused,tough:t.tokenImagesLoaded.tough}}}}]),Object(po.a)(o,[{key:"componentDidUpdate",value:function(e,t){var o,a,r,n,s,i;!e.shuffling&&this.props.shuffling&&this.rect&&(this.shuffleToggle=!this.shuffleToggle,this.rect.to({rotation:this.currentRotation+(this.shuffleToggle?360:-360),duration:.2})),this.state.imageLoaded||Oo(e.imgUrls,this.props.imgUrls)||(this.setState({imageLoaded:!1,imageLoadFailed:0}),this.initCardImages(this.props));var c=ot[this.props.currentGameType].tokens;!this.state.tokenImagesLoaded.stunned&&!(null===(o=e.cardState)||void 0===o?void 0:o.stunned)&&(null===(a=this.props.cardState)||void 0===a?void 0:a.stunned)&&c.stunned&&(this.stunnedImg.src=c.stunned.imagePath),!this.state.tokenImagesLoaded.confused&&!(null===(r=e.cardState)||void 0===r?void 0:r.confused)&&(null===(n=this.props.cardState)||void 0===n?void 0:n.confused)&&c.confused&&(this.confusedImg.src=c.confused.imagePath),!this.state.tokenImagesLoaded.tough&&!(null===(s=e.cardState)||void 0===s?void 0:s.tough)&&(null===(i=this.props.cardState)||void 0===i?void 0:i.tough)&&c.tough&&(this.toughImg.src=c.tough.imagePath)}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return this.renderCard(this.state.imageLoaded)}},{key:"renderCard",value:function(e){var t=this.props.height||ve,o=this.props.width||ye;return this.renderUnanimatedCard(t,o,e)}},{key:"renderCardName",value:function(e,t,o){var r={x:e.x-10,y:e.y-20};return this.state.imageLoadFailed===this.props.imgUrls.length&&0!==this.state.imageLoadFailed?Object(a.jsx)(Co.e,{offset:r,x:this.props.x,y:this.props.y,width:t-10,height:o-20,fontSize:24,text:"".concat(this.props.name," ").concat(this.props.code),draggable:""===this.props.controlledBy||this.props.controlledBy===T,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,onDblClick:this.handleDoubleClick,onDblTap:this.handleDoubleClick,onClick:this.handleClick,onTap:this.handleClick,onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onContextMenu:this.handleContextMenu},"".concat(this.props.id,"-cardnametext")):null}},{key:"getTokenInSlot",value:function(e,t,o,r){var n={width:t.naturalWidth/2,height:t.naturalHeight/2},s={x:o.x-ye+n.width/2,y:o.y-n.height*r-5*(r+1)-10};return e?Object(a.jsx)(Co.c,{native:!0,cornerRadius:8,x:this.props.x,y:this.props.y,width:n.width,height:n.height,fillPatternScaleX:.5,fillPatternScaleY:.5,offset:s,fillPatternImage:t},"".concat(this.props.id,"-status").concat(r)):null}},{key:"shouldRenderImageHorizontal",value:function(e,t,o){return o.includes(t.toLocaleLowerCase())&&!this.plainCardBack&&!ko[e]}},{key:"getScale",value:function(e,t,o){var a=e?t/e.naturalWidth:t,r=e?o/e.naturalWidth:t,n=e?o/e.naturalHeight:o,s=e?t/e.naturalHeight:o;return this.shouldRenderImageHorizontal(this.props.code,this.props.typeCode||"",xo)?{width:r,height:s}:{width:a,height:n}}},{key:"plainCardBack",get:function(){return this.props.imgUrls.some((function(e){return e.includes("standard")}))&&this.props.imgUrls.some((function(e){return e.includes("_back")}))}},{key:"currentRotation",get:function(){return this.props.exhausted?90:0}}]),o}(r.Component),Po=o(290),Mo=o(296),Io=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(e){var a;return Object(ho.a)(this,o),(a=t.call(this,e)).cardsDataInStack=[],a.handleHighlightChange=function(e,t,o){t?a.props.preview(t.code):a.props.clearPreview()},a.handleSelected=function(e,t){a.props.clearPreview(),t&&a.props.cardSelected&&a.props.cardSelected(t.code)},a.cancelBubble=function(e){e.stopPropagation()},a.cardsDataInStack=e.card.cardStack.map((function(e){return a.props.cardsDataEntities[e.jsonId]})),a}return Object(po.a)(o,[{key:"componentWillUnmount",value:function(){this.props.clearPreview()}},{key:"render",value:function(){return Object(a.jsx)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:Object(a.jsx)(Po.a,{id:"cardstack-card-selector-combobox",options:this.cardsDataInStack,getOptionLabel:function(e){return e.name},style:{width:300},onChange:this.handleSelected,onHighlightChange:this.handleHighlightChange,renderInput:function(e){return Object(a.jsx)(Mo.a,Object(M.a)(Object(M.a)({},e),{},{label:"Find Card...",variant:"outlined"}))}})})}}]),o}(r.Component),Do=Object(c.c)((function(e){return{cardsDataEntities:Ee(e)}}),{preview:V,clearPreview:K})(Io),No=o(169),Ro=o(294),Eo=o(170),Ao=function(e){var t=n.a.useRef(null);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ro.a,{onClick:function(e){if(null===t||void 0===t?void 0:t.current){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!1),t.current.dispatchEvent(o)}e.stopPropagation()},children:e.label}),Object(a.jsx)("input",{type:"file",ref:t,onChange:function(t){if(t.target.files&&t.target.files.length>0){var o=t.target.files[0];e.handleFile(o)}},style:{display:"none"}})]})},Lo=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(e){var r;return Object(ho.a)(this,o),(r=t.call(this,e)).nestedRef=void 0,r.renderMenuItem=function(e,t){return e.children?Object(a.jsx)(Eo.a,{ref:function(e){r.nestedRef=e},parentMenuOpen:r.state.menuOpen,label:e.label,onClick:function(e){r.nestedRef&&(e.stopPropagation(),r.nestedRef.parentElement.focus())},children:e.children.map((function(e,o){return r.renderMenuItem(e,1e3*t+o)}))},"contextMenu-item-".concat(t)):e.fileUploader?Object(a.jsx)(Ao,{label:e.label,handleFile:function(t){var o=new FileReader;o.readAsText(t,"UTF-8"),o.onload=function(t){var o,a=null===(o=t.target)||void 0===o?void 0:o.result;e.fileLoadedAction&&e.fileLoadedAction(a),r.props.hideContextMenu()}}},"contextMenu-item-".concat(t)):Object(a.jsx)(Ro.a,{onClick:r.handleContextItemClicked(e),children:e.label},"contextMenu-item-".concat(t))},r.handleMenuClosed=function(){r.setState({menuOpen:!1}),r.props.hideContextMenu()},r.preventDefault=function(e){e.preventDefault()},r.handleContextItemClicked=function(e){return function(){e.action&&e.action(),r.props.contextItemClicked&&r.props.contextItemClicked(r.props.items[0]),e.action&&(r.nestedRef&&r.nestedRef.blur(),r.props.hideContextMenu())}},r.state={menuOpen:!0},r}return Object(po.a)(o,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{id:"context-menu-layer",onContextMenu:this.preventDefault,onClick:function(t){var o;(null===(o=t.target)||void 0===o?void 0:o.files)||e.props.hideContextMenu()},children:Object(a.jsx)(No.a,{keepMounted:!0,open:this.state.menuOpen,onClose:this.handleMenuClosed,anchorReference:"anchorPosition",anchorPosition:{top:this.props.position.y+8,left:this.props.position.x+8},children:this.props.items.map((function(t,o){return e.renderMenuItem(t,o)}))})})}}]),o}(r.Component),Fo=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(){var e;Object(ho.a)(this,o);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).touchTimer=null,e.cancelBubble=function(e){e.cancelBubble=!0},e.handleDecrement=function(){e.props.updateCounterValueBy(-1)},e.handleIncrement=function(){e.props.updateCounterValueBy(1)},e.handleTouchStart=function(t){t.cancelBubble=!0,e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout((function(){e.props.handleContextMenu(t)}),750)},e.handleTouchMove=function(t){e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null)},e.handleTouchEnd=function(t){e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null)},e}return Object(po.a)(o,[{key:"render",value:function(){return Object(a.jsxs)(Co.a,{x:this.props.pos.x,y:this.props.pos.y,draggable:!0,onClick:this.cancelBubble,onContextMenu:this.props.handleContextMenu,onDragEnd:this.props.onDragEnd,onTouchStart:this.handleTouchStart,onMouseDown:this.cancelBubble,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,children:[Object(a.jsx)(Co.c,{cornerRadius:30,width:200,height:100,fill:this.props.color}),Object(a.jsx)(Co.e,{width:200,height:100,fontSize:36,text:"".concat(this.props.value),align:"center",verticalAlign:"middle"}),Object(a.jsx)(Co.e,{x:10,y:25,width:50,height:50,fontSize:36,text:"-",align:"center",verticalAlign:"middle",onClick:this.handleDecrement,onTap:this.handleDecrement}),Object(a.jsx)(Co.e,{x:140,y:25,width:50,height:50,fontSize:36,text:"+",align:"center",verticalAlign:"middle",onClick:this.handleIncrement,onTap:this.handleIncrement})]})}}]),o}(r.Component),Bo=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(){var e;Object(ho.a)(this,o);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).inputValue="",e.focusInputField=function(e){e&&setTimeout((function(){e.querySelector("input").focus()}),100)},e.cancelBubble=function(e){e.stopPropagation()},e.handleKeyPress=function(t){"enter"===t.key.toLocaleLowerCase()&&e.props.loadDeckId(+e.inputValue)},e}return Object(po.a)(o,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,className:"token-field-row",children:[Object(a.jsx)(Mo.a,{ref:this.focusInputField,onKeyPress:this.handleKeyPress,onClick:this.cancelBubble,onChange:function(t){e.inputValue=t.target.value},type:"number",variant:"outlined"})," "]})}}]),o}(r.Component),Go=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(){var e;Object(ho.a)(this,o);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).handleSelected=function(t,o){if(o){var a=[],r=[],n=o.cards.filter((function(e){return!o.cards.some((function(t){return t.backLink===e.code}))}));n.filter((function(e){return"quest"===e.typeCode.toLocaleLowerCase()})).forEach((function(e){a=a.concat(Array.from({length:e.quantity}).map((function(t){return e.code})))})),n.filter((function(e){return"quest"!==e.typeCode.toLocaleLowerCase()})).forEach((function(e){r=r.concat(Array.from({length:e.quantity}).map((function(t){return e.code})))}));var s=[r];a.length>0&&(s=[a].concat(s)),e.props.loadCards(s)}},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(po.a)(o,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:Object(a.jsx)(Po.a,{id:"encounter-loader-combobox",options:this.props.encounterData||[],getOptionLabel:function(e){return e.setData.name},style:{width:300},onChange:this.handleSelected,renderInput:function(t){return Object(a.jsx)(Mo.a,Object(M.a)(Object(M.a)({},t),{},{label:ot[e.props.currentGameType].encounterUiName,variant:"outlined"}))}})})}}]),o}(r.Component),Qo=Object(c.c)((function(e,t){return{encounterData:t.currentGameType===d.LordOfTheRingsLivingCardGame?Qe(e):He(e)}}),{})(Go),Ho=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(e){var a;return Object(ho.a)(this,o),(a=t.call(this,e)).cancelBubble=function(e){e.cancelBubble=!0},a.handleDragEnd=function(e){a.props.updatePos({x:e.target.x(),y:e.target.y()})},a.state={img:null},a}return Object(po.a)(o,[{key:"componentDidMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({img:t})},t.src="/card-game-playground/images/table/first_player_token_"+this.props.currentGameType+".png"}},{key:"render",value:function(){var e,t,o,r,n,s,i,c,d;return Object(a.jsx)(Co.c,{x:this.props.pos.x,y:this.props.pos.y,draggable:!0,onTouchStart:this.cancelBubble,onMouseDown:this.cancelBubble,onDragEnd:this.handleDragEnd,scale:{x:160/(null!==(e=null===(t=this.state.img)||void 0===t?void 0:t.naturalWidth)&&void 0!==e?e:1),y:160/(null!==(o=null===(r=this.state.img)||void 0===r?void 0:r.naturalWidth)&&void 0!==o?o:1)},width:null!==(n=null===(s=this.state.img)||void 0===s?void 0:s.naturalWidth)&&void 0!==n?n:0,height:null!==(i=null===(c=this.state.img)||void 0===c?void 0:c.naturalHeight)&&void 0!==i?i:0,fillPatternImage:null!==(d=this.state.img)&&void 0!==d?d:void 0})}}]),o}(r.Component),Wo=function(e){return e.liveState.present.counters},Uo=Object(De.a)(Wo,(function(e){return e.counters})),zo=Object(De.a)(Wo,(function(e){return e.firstPlayerCounterPosition})),Vo=Object(c.c)((function(e){return{pos:zo(e)}}),{updatePos:qt})(Ho),Ko=(o(243),function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(){var e;Object(ho.a)(this,o);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).inputRef=null,e.connect=function(t){var o,a;console.log("connecting with peer id "+(null===(o=e.inputRef)||void 0===o?void 0:o.value)),e.props.connect((null===(a=e.inputRef)||void 0===a?void 0:a.value)||"")},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(po.a)(o,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:[Object(a.jsx)("input",{ref:function(t){t&&(e.inputRef=t)}}),Object(a.jsx)("button",{onClick:this.connect,children:"Connect"})]})}}]),o}(r.Component)),Jo=function(e){return e.game},qo=(Object(De.a)(Jo,(function(e){return e.stageZoom})),Object(De.a)(Jo,(function(e){return e.playerColors}))),Zo=Object(De.a)(Jo,(function(e){return e.peerId})),Yo=Object(De.a)(Jo,(function(e){return e.activeGameType})),Xo=Object(De.a)(Jo,(function(e){return e.radialMenuPosition})),$o=Object(De.a)(Jo,(function(e){return e.menuPreviewCardJsonId?{id:"menu-preview-card",controlledBy:"",exhausted:!1,faceup:!0,fill:"gray",x:0,y:0,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},selected:!1,dragging:!1,shuffling:!1,cardStack:[{jsonId:e.menuPreviewCardJsonId}]}:null})),ea=(o(244),function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(){var e;Object(ho.a)(this,o);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){t.stopPropagation(),e.props.completed()},e.preventDefault=function(e){e.preventDefault()},e}return Object(po.a)(o,[{key:"render",value:function(){var e=this.props.offsetContent?8:0,t={top:"".concat(this.props.position.y+e,"px"),left:"".concat(this.props.position.x+e,"px")};return this.props.trasparentBackground||(t.backgroundColor="white"),Object(a.jsx)("div",{id:"top-layer",onClick:this.props.completed,onContextMenu:this.preventDefault,children:Object(a.jsx)("div",{className:"top-layer-content-wrapper",style:t,onContextMenu:this.preventDefault,onClick:this.handleClick,children:this.props.children})})}}]),o}(r.Component)),ta=o(245),oa=ta.default,aa=ta.Slice;!function(e){e.TopLevelActions="toplevelactions",e.StatusTokenActions="statustokenactions",e.CounterTokenActions="countertokenactions",e.DrawActions="drawactions",e.DrawNumber="drawnumber"}(lo||(lo={})),function(e){e.FaceUp="faceup",e.FaceDown="facedown"}(uo||(uo={}));var ra=!1,na=function(e,t,o,a,r){switch(e){case lo.StatusTokenActions:return ia(r);case lo.CounterTokenActions:return ca(r);case lo.DrawActions:return da(r,t,a);case lo.DrawNumber:return la(r,o);case lo.TopLevelActions:default:return sa(r,t)}},sa=function(e,t){return[Object(a.jsx)(aa,{onSelect:function(){e.flipCards()},children:Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:"Flip"})})},"flip-slice"),Object(a.jsx)(aa,{onSelect:function(){e.exhaustCard()},children:Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:"Exhaust"})})},"exhaust-slice"),Object(a.jsx)(aa,{onSelect:function(){e.shuffleStack()},children:Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:"Shuffle"})})},"shuffle-slice"),Object(a.jsx)(aa,{onSelect:function(){t(lo.StatusTokenActions),ra=!0},children:Object(a.jsx)("div",{children:"Statuses"})},"statuses-slice"),Object(a.jsx)(aa,{onSelect:function(){t(lo.CounterTokenActions),ra=!0},children:Object(a.jsx)("div",{children:"Tokens"})},"tokens-slice"),Object(a.jsx)(aa,{onSelect:function(){e.clearCardTokens()},children:Object(a.jsx)("div",{children:"Clear"})},"clear-slice"),Object(a.jsx)(aa,{onSelect:function(){t(lo.DrawActions),ra=!0},children:Object(a.jsx)("div",{children:"Draw"})},"draw-menu-slice")]},ia=function(e){if(!e.currentGameType)return[Object(a.jsx)(aa,{}),Object(a.jsx)(aa,{}),Object(a.jsx)(aa,{})];for(var t=Object.values(ot[e.currentGameType].tokens).filter((function(e){return!!e&&!e.isNumeric})).map((function(t){var o="touch-menu-slice-".concat(t.menuText.replace(/\s/g,"").toLocaleLowerCase());return Object(a.jsx)(aa,{onSelect:function(){e.toggleToken({tokenType:t.tokenType})},children:Object(a.jsxs)("div",{children:[t.touchMenuIcon?t.touchMenuIcon:null,Object(a.jsx)("div",{children:t.menuText})]})},o)}));t.length<3;)t=t.concat([Object(a.jsx)(aa,{},"extra-slice-".concat(Math.random()))]);return t},ca=function(e){if(!e.currentGameType)return[Object(a.jsx)(aa,{}),Object(a.jsx)(aa,{}),Object(a.jsx)(aa,{})];for(var t=Object.values(ot[e.currentGameType].tokens).filter((function(e){return!!e&&e.isNumeric})).flatMap((function(e){return[Object(M.a)(Object(M.a)({},e),{},{touchMenuLetter:"".concat(e.touchMenuLetter," +")}),Object(M.a)(Object(M.a)({},e),{},{touchMenuLetter:"".concat(e.touchMenuLetter," -")})]})).map((function(t){var o,r="touch-menu-slice-".concat(t.menuText.replace(/\s/g,"").toLocaleLowerCase());return r+=-1!==(null===(o=t.touchMenuLetter)||void 0===o?void 0:o.indexOf("+"))?"-plus":"",Object(a.jsx)(aa,{onSelect:function(){var o;e.adjustCounterToken({tokenType:t.counterTokenType,delta:-1!==(null===(o=t.touchMenuLetter)||void 0===o?void 0:o.indexOf("+"))?1:-1}),ra=!0},children:Object(a.jsxs)("div",{children:[t.touchMenuIcon?t.touchMenuIcon:null,Object(a.jsx)("div",{children:t.touchMenuLetter})]})},r)}));t.length<3;)t=t.concat([Object(a.jsx)(aa,{},"extra-slice-".concat(Math.random()))]);return t},da=function(e,t,o){return[Object(a.jsx)(aa,{onSelect:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:1,facedown:!1})},children:"1 faceup"},"draw-one-faceup-slice"),Object(a.jsx)(aa,{onSelect:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:1,facedown:!0})},children:"1 facedown"},"draw-one-facedown-slice"),Object(a.jsx)(aa,{onSelect:function(){o(uo.FaceUp),t(lo.DrawNumber),ra=!0},children:"X faceup"},"draw-x-faceup-slice"),Object(a.jsx)(aa,{onSelect:function(){o(uo.FaceDown),t(lo.DrawNumber),ra=!0},children:"X facedown"},"draw-x-facedown-slice")]},la=function(e,t){return Array.from({length:10},(function(e,t){return t+1})).map((function(o){return Object(a.jsx)(aa,{onSelect:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:o,facedown:t===uo.FaceDown})},children:o},"draw-".concat(o,"-cards-slice"))}))},ua=function(e){var t=Object(r.useState)(lo.TopLevelActions),o=Object(y.a)(t,2),n=o[0],s=o[1],i=Object(r.useState)(uo.FaceDown),c=Object(y.a)(i,2),d=c[0],l=c[1];return e.position||n===lo.TopLevelActions||s(lo.TopLevelActions),e.position?Object(a.jsx)(ea,{trasparentBackground:!0,offsetContent:!1,position:{x:Math.max(e.position.x-128,0),y:Math.max(e.position.y-128,0)},completed:function(){e.hideRadialMenu()},children:Object(a.jsx)("div",{onClick:function(e){ra&&(e.stopPropagation(),e.preventDefault(),ra=!1)},children:Object(a.jsx)(oa,{radius:"156px",centerRadius:"30px",children:na(n,s,d,l,e)})})}):null},ha=Object(c.c)((function(e){return{selectedCardStacks:(t=T,Object(De.a)(We,(function(e){return e.cards.filter((function(e){return e.selected&&e.controlledBy===t}))})))(e),currentGameType:Jo(e).activeGameType,position:Xo(e)};var t}),{flipCards:Et,exhaustCard:_t,toggleToken:At,shuffleStack:at,adjustCounterToken:Lt,hideRadialMenu:Y,clearCardTokens:Ft,drawCardsOutOfCardStack:rt})(ua),pa=o(288),ma=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(){var e;Object(ho.a)(this,o);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).inputValue="0",e.focusInputField=function(e){e&&setTimeout((function(){e.querySelector("input").focus()}),100)},e.handleKeyPress=function(t){"enter"===t.key.toLocaleLowerCase()&&e.complete(+e.inputValue)},e.handleClick=function(t){e.complete(+e.inputValue)},e.complete=function(t){e.props.updated({id:e.props.id,tokenType:e.props.tokenType,value:t})},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(po.a)(o,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,className:"token-field-row",children:[Object(a.jsx)(Mo.a,{ref:this.focusInputField,onKeyPress:this.handleKeyPress,variant:"outlined",type:"number",onChange:function(t){e.inputValue=t.target.value}}),Object(a.jsx)(pa.a,{onClick:this.handleClick,style:{height:"56px",marginLeft:"5px"},variant:"outlined",color:"primary",children:"Set"})]})}}]),o}(r.Component),ga=o(284),fa=(o(249),o(166)),Ta=o.n(fa),Ca=o(167),va=o.n(Ca),ya=o(168),ba=o.n(ya),ja=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(){return Object(ho.a)(this,o),t.apply(this,arguments)}return Object(po.a)(o,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"touch-menu",children:[Object(a.jsx)(ga.a,{className:this.props.panMode?"toggle-on":"",onClick:function(){e.props.togglePanMode()},children:Object(a.jsx)(Ta.a,{fontSize:"large"})}),Object(a.jsx)(ga.a,{className:this.props.multiselectMode?"toggle-on":"",onClick:function(){e.props.toggleMultiselectMode()},children:Object(a.jsx)(va.a,{fontSize:"large"})}),Object(a.jsx)(ga.a,{onClick:function(){e.props.anyCardsSelected&&e.props.showRadialMenuAtPosition({x:0,y:0})},children:Object(a.jsx)(ba.a,{fontSize:"large"})})]})}}]),o}(r.Component),Sa=Object(c.c)((function(e){return{anyCardsSelected:(t=T,Object(De.a)(We,(function(e){return e.cards.some((function(e){return e.selected&&e.controlledBy===t}))})))(e),currentGameType:Jo(e).activeGameType,panMode:ze(e),multiselectMode:Ve(e)};var t}),{togglePanMode:Nt,toggleMultiselectMode:Rt,flipCards:Et,exhaustCard:_t,toggleToken:At,shuffleStack:at,adjustCounterToken:Lt,showRadialMenuAtPosition:Z})(ja),ka=function(e){navigator.clipboard.writeText(e)},wa=function(e){Object(mo.a)(o,e);var t=Object(go.a)(o);function o(e){var r;return Object(ho.a)(this,o),(r=t.call(this,e)).stage=null,r.touchTimer=null,r.doubleTapTimer=null,r.lastCenter=null,r.lastDist=0,r.componentWillUnmount=function(){window.removeEventListener("resize",r.handleResize)},r.handleCounterValueUpdate=function(e){return function(t){r.props.updateCounterValue({id:e,delta:t})}},r.handleCounterDrag=function(e){return function(t){r.props.moveCounter({id:e,newPos:{x:t.target.x(),y:t.target.y()}})}},r.noOp=function(){},r.renderEmptyMessage=function(){return r.props.cards.cards.length>0?null:Object(a.jsx)("div",{children:Object(a.jsxs)("span",{children:["Right click and select 'Load Deck ID' to load a deck from"," ",ot[r.props.currentGameType].deckSite]})})},r.renderContextMenu=function(){var e;if(!r.state.showContextMenu)return null;var t=null===(e=r.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=r.state.contextMenuPosition;if(!t||!o)throw new Error("Problem computing context menu position");return Object(a.jsx)(Lo,{position:{x:t.left+o.x,y:t.top+o.y},items:r.state.contextMenuItems,hideContextMenu:function(){return r.clearContextMenu()}})},r.renderPreviewCardModal=function(){return r.state.previewCardModal?Object(a.jsx)(ea,{position:{x:0,y:0},completed:function(){r.props.clearPreviewCard(),r.setState({previewCardModal:!1})}}):null},r.renderTouchMenu=function(){return 0===r.props.cards.cards.length?null:Object(a.jsx)(Sa,{})},r.renderDeckImporter=function(){var e;if(!r.state.showDeckImporter)return null;var t=null===(e=r.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=r.state.deckImporterPosition;if(!t||!o)throw new Error("Problem computing deck importer position");return Object(a.jsx)(ea,{position:{x:t.left+o.x,y:t.top+o.y},completed:r.clearDeckImporter,children:Object(a.jsx)(Bo,{loadDeckId:r.handleImportDeck(r.getRelativePositionFromTarget(r.stage))})})},r.renderEncounterImporter=function(){var e;if(!r.state.showEncounterImporter)return null;var t=null===(e=r.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=r.state.encounterImporterPosition;if(!t||!o)throw new Error("Problem computing deck importer position");var n={x:t.left+o.x,y:t.top+o.y};return Object(a.jsx)(ea,{position:n,completed:r.clearEncounterImporter,children:Object(a.jsx)(Qo,{currentGameType:r.props.currentGameType,loadCards:r.handleLoadEncounter(r.getRelativePositionFromTarget(r.stage))})})},r.renderCardSearch=function(){var e;if(!r.state.showCardSearch)return null;var t=null===(e=r.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=r.state.cardSearchPosition;if(!t||!o)throw new Error("Problem computing card search position");var n={x:t.left+o.x,y:t.top+o.y};return r.state.cardStackForSearching?Object(a.jsx)(ea,{position:n,completed:r.clearCardSearch,children:Object(a.jsx)(Do,{card:r.state.cardStackForSearching,cardSelected:r.handleCardSelectedFromCardStack(r.state.cardStackForSearching.id,n)})}):null},r.renderPeerConnector=function(){var e;if(!r.state.showPeerConnector)return null;var t=null===(e=r.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=r.state.peerConnectorPosition;if(!t||!o)throw new Error("Problem computing peer connector position");var n={x:t.left+o.x,y:t.top+o.y};return r.state.showPeerConnector?Object(a.jsx)(ea,{position:n,completed:r.clearPeerConnector,children:Object(a.jsx)(Ko,{connect:r.handlePeerConnect})}):null},r.renderTokenModifier=function(){var e;if(!r.state.showTokenValueModifier)return null;var t=null===(e=r.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=r.state.tokenValueModifierPosition;if(!t||!o)throw new Error("Problem computing token Modifier position");var n={x:t.left+o.x,y:t.top+o.y};return r.state.showTokenValueModifier&&r.state.tokenValueModifierProps?Object(a.jsx)(ea,{position:n,completed:r.clearTokenValueModifier,children:Object(a.jsx)(ma,{id:r.state.tokenValueModifierProps.id,tokenType:r.state.tokenValueModifierProps.tokenType,updated:function(e){r.props.adjustCounterToken(e),r.clearTokenValueModifier()}})}):null},r.handleLoadEncounter=function(e){return function(t){r.clearEncounterImporter(),t.forEach((function(t,o){r.props.addCardStack({position:{x:e.x+(ye+10)*o,y:e.y},cardJsonIds:t})}))}},r.handleImportDeck=function(e){return function(t){r.clearDeckImporter(),r.props.fetchDecklistById({gameType:r.props.currentGameType,decklistId:t,position:e})}},r.handlePeerConnect=function(e){r.clearPeerConnector(),r.props.connectToRemoteGame(e)},r.handleCardSelectedFromCardStack=function(e,t){return function(o){r.clearCardSearch(),r.props.pullCardOutOfCardStack({cardStackId:e,jsonId:o,pos:t})}},r.clearContextMenu=function(){r.setState({showContextMenu:!1,contextMenuPosition:null,contextMenuItems:[]})},r.clearDeckImporter=function(){r.setState({showDeckImporter:!1,deckImporterPosition:null})},r.clearTokenValueModifier=function(){r.setState({showTokenValueModifier:!1,tokenValueModifierProps:null,tokenValueModifierPosition:null})},r.clearEncounterImporter=function(){r.setState({showEncounterImporter:!1,encounterImporterPosition:null})},r.clearCardSearch=function(){r.setState({showCardSearch:!1,cardSearchPosition:null,cardStackForSearching:null})},r.clearPeerConnector=function(){r.setState({showPeerConnector:!1,peerConnectorPosition:null})},r.handleStageClickOrTap=function(e){if(!r.state.showContextMenu){var t=r.getRelativePositionFromTarget(r.stage);(r.props.panMode||we(r.state.selectStartPos,t)<30)&&r.props.unselectAllCards()}},r.handleWheel=function(e){var t;if(e.evt.preventDefault(),r.stage){var o=r.props.gameState.stageZoom.x,a=null!==(t=r.stage.getPointerPosition())&&void 0!==t?t:{x:0,y:0},n=(a.x-r.stage.x())/o,s=(a.y-r.stage.y())/o,i=e.evt.deltaY<0?1.02*o:o/1.02;r.props.updateZoom({x:i,y:i});var c={x:a.x-n*i,y:a.y-s*i};r.props.updatePosition(c)}},r.handleCounterContextMenu=function(e){return function(t){var o,a;t.evt.preventDefault(),t.cancelBubble=!0;var n=r.props.counters.find((function(t){return t.id===e})),s=[{label:"Remove",action:function(){r.props.removeCounter(e)}},{label:"Reset",action:function(){var t;r.props.updateCounterValue({id:e,delta:-1*(null!==(t=null===n||void 0===n?void 0:n.value)&&void 0!==t?t:0)})}},{label:"Set Color",children:v.map((function(t){return{label:t,action:function(){r.props.updateCounterColor({id:e,newColor:t})}}}))}];r.setState({showContextMenu:!0,contextMenuPosition:null!==(o=null===(a=r.stage)||void 0===a?void 0:a.getPointerPosition())&&void 0!==o?o:null,contextMenuItems:s})}},r.handleCardContextMenu=function(e,t){var o,a,n;t.evt.preventDefault(),t.cancelBubble=!0;var s=r.props.cards.cards.find((function(t){return t.id===e}));r.props.selectCard({id:e,unselectOtherCards:!s||!s.selected});var i=r.props.cards.cards.find((function(t){return t.id===e})),c=(null===i||void 0===i||null===(o=i.cardStack)||void 0===o?void 0:o.length)||0,d=(null===i||void 0===i?void 0:i.statusTokens)||{stunned:!1,confused:!1,tough:!1},l=[{label:"Flip",action:function(){r.props.flipCards()}}];c>1&&(l.push({label:"Shuffle",action:function(){r.props.shuffleStack()}}),l.push({label:"Find Specific Card",action:function(){var e,t;i&&r.setState({showCardSearch:!0,cardSearchPosition:null!==(e=null===(t=r.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null,cardStackForSearching:i})}}));var u=ot[r.props.currentGameType].tokens;u.stunned&&l.push({label:d.stunned?u.stunned.menuRemoveText:u.stunned.menuText,action:function(){r.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:N.Stunned,value:!d.stunned})}}),u.confused&&l.push({label:d.confused?u.confused.menuRemoveText:u.confused.menuText,action:function(){r.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:N.Confused,value:!d.confused})}}),u.tough&&l.push({label:d.tough?u.tough.menuRemoveText:u.tough.menuText,action:function(){r.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:N.Tough,value:!d.tough})}}),u.damage&&l.push({label:u.damage.menuText,action:function(){var e,t;r.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:R.Damage},tokenValueModifierPosition:null!==(e=null===(t=r.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}}),u.threat&&l.push({label:u.threat.menuText,action:function(){var e,t;r.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:R.Threat},tokenValueModifierPosition:null!==(e=null===(t=r.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}}),u.generic&&l.push({label:u.generic.menuText,action:function(){var e,t;r.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:R.Generic},tokenValueModifierPosition:null!==(e=null===(t=r.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}}),l.push({label:"Remove All Tokens",action:function(){r.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:R.Damage,value:0}),r.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:R.Threat,value:0}),r.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:R.Generic,value:0})}}),r.setState({showContextMenu:!0,contextMenuPosition:null!==(a=null===(n=r.stage)||void 0===n?void 0:n.getPointerPosition())&&void 0!==a?a:null,contextMenuItems:l})},r.handleCardClick=function(e){return function(t,o,a){var n=o.evt.shiftKey||o.evt.metaKey||o.evt.ctrlKey;e.selected&&(n||r.props.multiselectMode)?r.props.toggleSelectCard(t):(r.props.selectCard({id:t,unselectOtherCards:!n&&!r.props.multiselectMode}),!a||n||r.props.multiselectMode||r.doubleTapTimer||r.state.showContextMenu||(r.doubleTapTimer=setTimeout((function(){var e;r.props.showRadialMenuAtPosition((null===(e=r.stage)||void 0===e?void 0:e.getPointerPosition())||{x:0,y:0}),r.doubleTapTimer=null}),200)))}},r.handleSelectAndExhaust=function(e,t){var o=t.evt.shiftKey||t.evt.metaKey||t.evt.ctrlKey;r.props.selectCard({id:e,unselectOtherCards:!o}),r.props.exhaustCard(e)},r.showOrToggleModalPreviewCard=function(e,t){r.doubleTapTimer&&(clearTimeout(r.doubleTapTimer),r.doubleTapTimer=null),r.props.gameState.previewCard&&r.props.gameState.previewCard.id===e?r.props.clearPreviewCard():(r.setState({previewCardModal:!0}),r.props.setPreviewCardId(e))},r.handleCardDragStart=function(e,t){var o=!1;if(!(r.props.cards.cards.filter((function(e){return e.selected&&e.controlledBy===T})).length>1)){var a=r.props.cards.cards.find((function(t){return t.id===e})),n=((null===a||void 0===a?void 0:a.cardStack)||[]).length>1;if(a&&n){var s={x:a.x+(a.exhausted?ve:ye)/2,y:a.y-(a.exhausted?ye:ve)/2};we(s,r.getRelativePositionFromTarget(r.stage))<50&&(o=!0)}}r.props.startCardMove({id:e,splitTopCard:o})},r.handleKeyPress=function(e){var t=e.ctrlKey||e.metaKey,o=e.key.toLocaleLowerCase(),a=parseInt(o);if("p"===o)r.props.togglePanMode();else if("f"===o)r.props.flipCards();else if("e"===o)r.props.exhaustCard();else if("s"===o)r.props.shuffleStack();else if(!Number.isNaN(a))if(t);else{var n=r.props.cards.cards.filter((function(e){return e.selected&&e.controlledBy===T}));1!==n.length?console.log("will not be drawing any cards because the number of selected stacks is "+n.length):r.props.drawCardsOutOfCardStack({cardStackId:n[0].id,numberToDraw:a})}},r.handleKeyDown=function(e){var t=e.key.toLocaleLowerCase(),o=parseInt(t);if((e.ctrlKey||e.metaKey)&&!Number.isNaN(o)){var a=ot[r.props.currentGameType].tokens;switch(o){case 1:a.damage&&r.props.adjustCounterToken({tokenType:R.Damage,delta:1});break;case 2:a.threat&&r.props.adjustCounterToken({tokenType:R.Threat,delta:1});break;case 3:a.generic&&r.props.adjustCounterToken({tokenType:R.Generic,delta:1});break;case 4:a.damage&&r.props.adjustCounterToken({tokenType:R.Damage,delta:-1});break;case 5:a.threat&&r.props.adjustCounterToken({tokenType:R.Threat,delta:-1});break;case 6:a.generic&&r.props.adjustCounterToken({tokenType:R.Generic,delta:-1})}e.preventDefault()}e.shiftKey&&(e.ctrlKey||e.metaKey)&&"z"===e.key?r.props.redo():(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.preventDefault(),r.props.undo())},r.getRawPreviewCardPosition=function(e){var t,o,a=null!==(t=null===(o=r.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==t?t:{x:0,y:0},n=window.innerWidth/2,s=window.innerHeight/2,i=e?be:je,c=e?je:be;return r.state.previewCardModal?{x:n,y:s}:a.x<n?{x:window.innerWidth-i/2,y:c/2}:{x:i/2,y:c/2}},r.getRelativePositionFromTarget=function(e,t){var o=e.getAbsoluteTransform().copy();o.invert();var a=t||e.getPointerPosition();return o.point(a)},r.handleMouseDown=function(e){if(e.evt instanceof MouseEvent&&0===e.evt.button||e.evt instanceof TouchEvent){var t=r.getRelativePositionFromTarget(r.stage);r.setState({selectStartPos:{x:t.x,y:t.y},selecting:!0})}return!1},r.getSelectionRectInfo=function(){var e=r.state.selectStartPos,t=r.state.selectRect;return{height:Math.abs(t.height),width:Math.abs(t.width),x:t.width<0?e.x+t.width:e.x,y:t.height<0?e.y+t.height:e.y}},r.handleMouseUp=function(){if(r.state.drewASelectionRect){var e=r.getSelectionRectInfo(),t=r.props.cards.cards.reduce((function(t,o){return fo.boxBox(e.x,e.y,e.width,e.height,o.x-50,o.y-75,ye,ve)&&t.push(o),t}),[]);r.props.selectMultipleCards({ids:t.map((function(e){return e.id}))})}return r.setState({drewASelectionRect:!1,selectRect:{height:0,width:0},selecting:!1}),!1},r.handleTouchStart=function(e){r.touchTimer&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.touchTimer=setTimeout((function(){r.handleContextMenu(e)}),750),r.props.panMode||r.handleMouseDown(e)},r.handleTouchMove=function(e){e.evt.preventDefault();var t=e.evt.touches[0],o=e.evt.touches[1];r.touchTimer&&(clearTimeout(r.touchTimer),r.touchTimer=null),t&&o?r.handleMultiTouch(t,o):r.handleMouseMove(e)},r.handleMultiTouch=function(e,t){if(r.stage){r.stage.isDragging()&&r.stage.stopDrag();var o={x:e.clientX,y:e.clientY},a={x:t.clientX,y:t.clientY};if(r.lastCenter){var n=xe(o,a),s=we(o,a);r.lastDist||(r.lastDist=s);var i=(n.x-r.stage.x())/r.props.gameState.stageZoom.x,c=(n.y-r.stage.y())/r.props.gameState.stageZoom.y,d=r.props.gameState.stageZoom.x*(s/r.lastDist);r.props.updateZoom({x:d,y:d});var l=n.x-r.lastCenter.x,u=n.y-r.lastCenter.y,h={x:n.x-i*d+l,y:n.y-c*d+u};r.props.updatePosition(h),r.lastDist=s,r.lastCenter=n}else r.lastCenter=xe(o,a)}},r.handleTouchEnd=function(e){r.lastDist=0,r.lastCenter=null,r.touchTimer&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.props.panMode||r.handleMouseUp()},r.handleMouseMove=function(e){if(r.state.selecting){var t=r.getRelativePositionFromTarget(e.currentTarget);r.setState({drewASelectionRect:!0,selectRect:{height:t.y-r.state.selectStartPos.y,width:t.x-r.state.selectStartPos.x}})}e.cancelBubble=!0},r.handleContextMenu=function(e){var t,o;r.touchTimer&&(clearTimeout(r.touchTimer),r.touchTimer=null),e.evt.preventDefault(),e.cancelBubble=!0;var a=[{label:"Undo",action:r.props.undo},{label:"Redo",action:r.props.redo},{label:"Load Deck by ID",action:function(){var e,t;r.setState({showDeckImporter:!0,deckImporterPosition:null!==(e=null===(t=r.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}},{label:"Load Deck from txt file",fileLoadedAction:function(e){var t,o;r.props.createDeckFromTxt({gameType:r.props.currentGameType,position:null!==(t=null===(o=r.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==t?t:{x:0,y:0},txtContents:e})},fileUploader:!0},{label:"Load ".concat(ot[r.props.currentGameType].encounterUiName),action:function(){var e,t;r.setState({showEncounterImporter:!0,encounterImporterPosition:null!==(e=null===(t=r.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}},{label:"Create new counter",action:function(){var e;r.props.addNewCounter(null!==(e=r.getRelativePositionFromTarget(r.stage))&&void 0!==e?e:{x:0,y:0})}},{label:"Reset Game",action:r.props.resetApp},{label:"Quit Game",action:function(){r.props.quitGame(),r.props.resetApp()}},{label:"Connect to Remote Game",action:function(){var e,t;r.setState({showPeerConnector:!0,peerConnectorPosition:null!==(e=null===(t=r.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}},{label:"Request resync from Remote Game",action:r.props.requestResync},{label:"Peer id is ".concat(r.props.peerId),action:function(){var e;r.props.peerId&&ka((e=r.props.peerId,"".concat(window.location.origin).concat(window.location.pathname,"?remote=").concat(e)))}},{label:"Copy game state as url",action:function(){r.props.generateGameStateUrl()}}];r.setState({showContextMenu:!0,contextMenuPosition:null!==(t=null===(o=r.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==t?t:null,contextMenuItems:a})},r.getCardType=function(e){var t;if(0===Object.keys(r.props.cardsData).length)return"";var o=r.props.cardsData[e.cardStack[0].jsonId];return(null!==(t=null===o||void 0===o?void 0:o.typeCode)&&void 0!==t?t:"").toLocaleLowerCase()},r.getCardName=function(e){var t,o,a=e.faceup?e.cardStack[0]:e.cardStack[e.cardStack.length-1];return null!==(t=null===(o=r.props.cardsData[a.jsonId])||void 0===o?void 0:o.name)&&void 0!==t?t:""},r.getCardCode=function(e){var t,o,a,n=e.faceup?e.cardStack[0]:e.cardStack[e.cardStack.length-1];n||console.error("Could not get card in question for stack:",e);var s=null!==(t=null===n||void 0===n?void 0:n.jsonId)&&void 0!==t?t:"missing-id";return null!==(o=null===(a=r.props.cardsData[s])||void 0===a?void 0:a.code)&&void 0!==o?o:"code missing for ".concat(s)},r.getImgUrls=function(e){if(0===Object.keys(r.props.cardsData).length)return[];var t=[],o=r.props.cardsData[e.cardStack[0].jsonId];if(!o)return[];var a=o;if(a.images)return e.faceup?[a.images.front]:a.images.back?[a.images.back]:["encounter"===o.extraInfo.factionCode?"/card-game-playground/images/standard/encounter_card_back_"+r.props.currentGameType+".png":"/card-game-playground/images/standard/card_back_"+r.props.currentGameType+".png"];e.faceup||o.backLink||o.doubleSided?t=[r.generateLCGCDNImageUrl(o,e.faceup)]:(a=null,t=["encounter"===o.extraInfo.factionCode?"/card-game-playground/images/standard/encounter_card_back_"+r.props.currentGameType+".png":"/card-game-playground/images/standard/card_back_"+r.props.currentGameType+".png"]);var n="";a&&(e.faceup?n=a.code:a.backLink?n=a.backLink:a.doubleSided&&(n="".concat(a.code,"_double_sided_back")));var s=a?r.checkMissingImageMap(n):null;return s&&t.unshift(s),t},r.handleResize=function(){r.setState({stageHeight:window.innerHeight,stageWidth:window.innerWidth})},To.a&&(To.a.hitOnDragEnabled=!0),r.state={drewASelectionRect:!1,selectRect:{height:0,width:0},selectStartPos:{x:0,y:0},selecting:!1,showContextMenu:!1,contextMenuPosition:null,contextMenuItems:[],showDeckImporter:!1,deckImporterPosition:null,showEncounterImporter:!1,encounterImporterPosition:null,showCardSearch:!1,cardSearchPosition:null,cardStackForSearching:null,showPeerConnector:!1,peerConnectorPosition:null,showTokenValueModifier:!1,tokenValueModifierProps:null,tokenValueModifierPosition:null,playmatImage:null,playmatImageLoaded:!1,previewCardModal:!1,stageWidth:window.innerWidth,stageHeight:window.innerHeight},r}return Object(po.a)(o,[{key:"componentDidMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({playmatImage:t,playmatImageLoaded:!0})},t.onerror=function(e){console.error(e)},t.src=ot[this.props.currentGameType].backgroundImageLocation,this.props.loadCardsData(),this.props.allJsonData(""),window.addEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e,t,o=this;document.activeElement===document.body&&setTimeout((function(){var e=document.querySelector(".play-area");null===e||void 0===e||e.focus()}),0);var r=this.props.cards.cards.filter((function(e){return!e.dragging})).map((function(e){var t,r,n;return Object(a.jsx)(_o,{currentGameType:o.props.currentGameType,code:o.getCardCode(e),name:o.getCardName(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:e.selected,dropTargetColor:null!==(r=o.props.playerColors[null===(n=o.props.dropTargetCardsById[e.id])||void 0===n?void 0:n.ownerRef])&&void 0!==r?r:"",dragging:e.dragging,shuffling:e.shuffling,handleDragStart:o.handleCardDragStart,handleDragMove:o.props.cardMove,handleDragEnd:o.props.endCardMove,handleDoubleClick:o.handleSelectAndExhaust,handleDoubleTap:o.showOrToggleModalPreviewCard,handleClick:o.handleCardClick(e),handleHover:o.props.setPreviewCardId,handleHoverLeave:o.props.clearPreviewCard,handleContextMenu:o.handleCardContextMenu,imgUrls:o.getImgUrls(e),typeCode:o.getCardType(e),faceup:e.faceup,numCardsInStack:e.cardStack.length,cardState:{stunned:e.statusTokens.stunned,confused:e.statusTokens.confused,tough:e.statusTokens.tough,tokens:{damage:0,threat:0,generic:0}}},e.id)})),n=this.props.cards.ghostCards.map((function(e){var t;return Object(a.jsx)(_o,{currentGameType:o.props.currentGameType,name:o.getCardName(e),code:o.getCardCode(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:!1,dragging:!1,shuffling:!1,imgUrls:o.getImgUrls(e),typeCode:o.getCardType(e),faceup:e.faceup,isGhost:!0},"ghost".concat(e.id))})),s=this.props.cards.cards.filter((function(e){return e.dragging})).map((function(e){var t;return Object(a.jsx)(_o,{currentGameType:o.props.currentGameType,name:o.getCardName(e),code:o.getCardCode(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:e.selected,dragging:e.dragging,shuffling:e.shuffling,handleDragStart:o.handleCardDragStart,handleDragMove:o.props.cardMove,handleDragEnd:o.props.endCardMove,imgUrls:o.getImgUrls(e),typeCode:o.getCardType(e),faceup:e.faceup,numCardsInStack:e.cardStack.length},e.id)})),i=this.props.cards.cards.some((function(e){return e.dragging&&e.controlledBy===T})),d=this.props.menuPreviewCard?[this.props.menuPreviewCard]:this.props.cards.cards.filter((function(e){return!!o.props.gameState.previewCard&&e.id===o.props.gameState.previewCard.id})),l=this.stage?d.filter((function(e){return!o.state.selecting&&!i})).map((function(e){var t,r,n=xo.includes(o.getCardType(e)),s=o.getImgUrls(e),i=o.getRawPreviewCardPosition(n),c=o.getRelativePositionFromTarget(o.stage,i),d=je;return d*=(r=Math.min(be,n?window.innerWidth:window.innerHeight))/be,s.some((function(e){return-1!==e.indexOf("card_back")}))?null:Object(a.jsx)(_o,{currentGameType:o.props.currentGameType,name:o.getCardName(e),code:o.getCardCode(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:c.x,y:c.y,exhausted:n,fill:e.fill,selected:!1,dragging:!1,shuffling:!1,imgUrls:s,typeCode:o.getCardType(e),faceup:e.faceup,height:r/o.props.gameState.stageZoom.y,width:d/o.props.gameState.stageZoom.x},"preview".concat(e.id))})).filter((function(e){return null!==e})):[],u=this.state.playmatImageLoaded&&(null===(e=this.state.playmatImage)||void 0===e?void 0:e.naturalWidth)?2880/(null===(t=this.state.playmatImage)||void 0===t?void 0:t.naturalWidth):1;return Object(a.jsxs)("div",{className:"play-area",tabIndex:1,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,children:[Object(a.jsx)(ha,{}),this.renderEmptyMessage(),this.renderContextMenu(),this.renderPreviewCardModal(),this.renderTouchMenu(),this.renderDeckImporter(),this.renderEncounterImporter(),this.renderCardSearch(),this.renderPeerConnector(),this.renderTokenModifier(),Object(a.jsx)(c.b.Consumer,{children:function(e){var t,i,d=e.store;return Object(a.jsx)(Co.d,{ref:function(e){e&&(o.stage=e)},x:o.props.gameState.stagePosition.x,y:o.props.gameState.stagePosition.y,width:o.state.stageWidth,height:o.state.stageHeight,onClick:o.handleStageClickOrTap,onTap:o.handleStageClickOrTap,onMouseDown:o.props.panMode?o.noOp:o.handleMouseDown,onMouseUp:o.props.panMode?o.noOp:o.handleMouseUp,onMouseMove:o.props.panMode?o.noOp:o.handleMouseMove,onTouchStart:o.handleTouchStart,onTouchMove:o.handleTouchMove,onTouchEnd:o.handleTouchEnd,onContextMenu:o.handleContextMenu,scale:o.props.gameState.stageZoom,onWheel:o.handleWheel,draggable:o.props.panMode,onDragMove:o.noOp,onDragEnd:o.noOp,preventDefault:!0,children:Object(a.jsxs)(c.a,{store:d,children:[Object(a.jsx)(Co.b,{children:Object(a.jsx)(Co.c,{fill:o.state.playmatImageLoaded?void 0:"lightgray",scale:{x:u,y:u},width:o.state.playmatImageLoaded?null===(t=o.state.playmatImage)||void 0===t?void 0:t.naturalWidth:2880,height:o.state.playmatImageLoaded?null===(i=o.state.playmatImage)||void 0===i?void 0:i.naturalHeight:1440,fillPatternImage:o.state.playmatImageLoaded&&o.state.playmatImage?o.state.playmatImage:void 0})}),Object(a.jsx)(Co.b,{children:o.props.counters.map((function(e){return Object(a.jsx)(Fo,{id:e.id,pos:e.position,value:e.value,color:e.color,updateCounterValueBy:o.handleCounterValueUpdate(e.id),handleContextMenu:o.handleCounterContextMenu(e.id),onDragEnd:o.handleCounterDrag(e.id)},"".concat(e.id,"-counter"))}))}),Object(a.jsxs)(Co.b,{preventDefault:!0,children:[n.concat(r).concat(s),Object(a.jsx)(Vo,{currentGameType:o.props.currentGameType}),l]}),Object(a.jsx)(Co.b,{children:Object(a.jsx)(Co.c,{x:o.state.selectStartPos.x,y:o.state.selectStartPos.y,width:o.state.selectRect.width,height:o.state.selectRect.height,stroke:"yellow",strokeWidth:4})})]})})}})]})}},{key:"checkMissingImageMap",value:function(e){var t;return null!==(t=wo[e])&&void 0!==t?t:null}},{key:"generateLCGCDNImageUrl",value:function(e,t){var o,a;if(!e)return"https://lcgcdn.s3.amazonaws.com/mc/NOPE.jpg";var r=e.code;!t&&e.backLink&&(r=e.backLink);for(var n=null!==(o=Je[null!==(a=e.extraInfo.packCode)&&void 0!==a?a:""])&&void 0!==o?o:r.substring(0,2),s=r.substring(2);"0"===s[0];)s=s.substring(1);s=s.toLocaleUpperCase();var i="";return e.doubleSided&&(i=t?"A":"B"),"https://lcgcdn.s3.amazonaws.com/mc/MC".concat(n,"en_").concat(s).concat(i,".jpg")}}]),o}(r.Component),xa=["ant.json","ant_encounter.json","bkw.json","bkw_encounter.json","cap.json","cap_encounter.json","core.json","core_encounter.json","drs.json","drs_encounter.json","gam.json","gam_encounter.json","gmw.json","gmw_encounter.json","gob_encounter.json","hlk.json","hlk_encounter.json","msm.json","msm_encounter.json","qsv.json","qsv_encounter.json","ron_encounter.json","scw.json","scw_encounter.json","stld.json","stld_encounter.json","thor.json","thor_encounter.json","toafk_encounter.json","trors.json","trors_encounter.json","twc_encounter.json","wsp.json","wsp_encounter.json"],Oa=["A Journey To Rhosgobel.json","A Journey to Rhosgobel Nightmare.json","A Knife in the Dark Nightmare.json","A Shadow in the East.json","A Shadow of the Past Nightmare.json","A Storm on Cobas Haven Nightmare.json","A Storm on Cobas Haven.json","Across the Ettenmoors Nightmare.json","Across the Ettenmoors.json","Among the Outlaws.json","Assault on Osgiliath Nightmare.json","Assault on Osgiliath.json","Attack on Dol Guldur.json","Beneath the Sands.json","Breaking of the Fellowship Nightmare.json","Celebrimbor's Secret Nightmare.json","Celebrimbor's Secret.json","Challenge of the Wainriders.json","Children of Eorl.json","Conflict at the Carrock Nightmare.json","Conflict at the Carrock.json","Core Set.json","Deadmen's Dike Nightmare.json","Dungeons Deep and Caverns Dim Nightmare.json","Encounter at Amon D\xeen Nightmare.json","Encounter at Amon D\xeen.json","Escape From Dol Guldur Nightmare.json","Escape from Khazad-d\xfbm.json","Escape from Mount Gram Nightmare.json","Escape from Mount Gram.json","Fire in the Night.json","First Age.json","Flies and Spiders Nightmare.json","Flight from Moria Nightmare.json","Flight of the Stormcaller Nightmare.json","Flight of the Stormcaller.json","Flight to the Ford Nightmare.json","Fog on the Barrow-downs.json","Foundations of Stone Nightmare.json","Foundations of Stone.json","Heirs of N\xfamenor.json","Helm's Deep Nightmare.json","Into Fangorn Nightmare.json","Into Ithilien Nightmare.json","Into the Pit Nightmare.json","Intruders in Chetwood Nightmare.json","Journey Along the Anduin Nightmare.json","Journey in the Dark Nightmare.json","Journey to the Cross-roads Nightmare.json","Khazad-d\xfbm.json","Mount Gundabad.json","Murder at the Prancing Pony.json","Over the Misty Mountains Grim Nightmare.json","Passage Through Mirkwood Nightmare.json","Peril in Pelargir Nightmare.json","Race Across Harad.json","Raid on the Grey Havens Nightmare.json","Return to Mirkwood Nightmare.json","Return to Mirkwood.json","Road to Rivendell Nightmare.json","Road to Rivendell.json","Roam Across Rhovanion.json","Shadow and Flame Nightmare.json","Shadow and Flame.json","Shelob's Lair Nightmare.json","Temple of the Deceived Nightmare.json","Temple of the Deceived.json","The Antlered Crown Nightmare.json","The Antlered Crown.json","The Battle of Carn D\xfbm Nightmare.json","The Battle of Carn D\xfbm.json","The Battle of Five Armies Nightmare.json","The Battle of Lake-town.json","The Betrayal of M\xeem.json","The Black Riders.json","The Black Serpent.json","The Blood of Gondor Nightmare.json","The Blood of Gondor.json","The City of Corsairs Nightmare.json","The City of Corsairs.json","The City of Ulfast.json","The Crossings of Poros.json","The Dead Marshes Nightmare.json","The Dead Marshes.json","The Dread Realm Nightmare.json","The Dread Realm.json","The Drowned Ruins Nightmare.json","The Drowned Ruins.json","The Dr\xfaadan Forest Nightmare.json","The Dr\xfaadan Forest.json","The Dungeons of Cirith Gurat.json","The Dunland Trap Nightmare.json","The Dunland Trap.json","The Fall of Nargothrond.json","The Fate of N\xfamenor Nightmare.json","The Fate of Wilderland.json","The Flame of the West.json","The Fords of Isen Nightmare.json","The Fortress of Nurn.json","The Ghost of Framsburg.json","The Grey Havens.json","The Hills of Emyn Muil Nightmare.json","The Hills of Emyn Muil.json","The Hobbit: On the Doorstep.json","The Hobbit: Over Hill and Under Hill.json","The Hunt for Gollum Nightmare.json","The Hunt for Gollum.json","The Hunt for the Dreadnaught.json","The Land of Shadow.json","The Land of Sorrow.json","The Lonely Mountain Nightmare.json","The Long Dark Nightmare.json","The Long Dark.json","The Lost Realm.json","The Massing at Osgiliath.json","The Mines of Moria.json","The Morgul Vale Nightmare.json","The Morgul Vale.json","The Mountain of Fire.json","The M\xfbmakil.json","The N\xeen-in-Eilph Nightmare.json","The N\xeen-in-Eilph.json","The Old Forest.json","The Passage of the Marshes Nightmare.json","The Redhorn Gate Nightmare.json","The Redhorn Gate.json","The Ring Goes South Nightmare.json","The Road Darkens.json","The Road to Isengard Nightmare.json","The Ruins of Belegost.json","The Sands of Harad.json","The Seventh Level Nightmare.json","The Siege of Ann\xfaminas.json","The Siege of Cair Andros Nightmare.json","The Steward's Fear Nightmare.json","The Steward's Fear.json","The Stone of Erech.json","The Thing in the Depths Nightmare.json","The Thing in the Depths.json","The Three Trials Nightmare.json","The Three Trials.json","The Treachery of Rhudaur Nightmare.json","The Treachery of Rhudaur.json","The Treason of Saruman.json","The Uruk-hai Nightmare.json","The Voice of Isengard.json","The Wastes of Eriador Nightmare.json","The Wastes of Eriador.json","The Watcher in the Water Nightmare.json","The Watcher in the Water.json","The Weather Hills Nightmare.json","The Wilds of Rhovanion.json","The Withered Heath.json","The Wizard's Quest.json","The Woodland Realm.json","To Catch an Orc Nightmare.json","Trial Upon the Marches.json","Trouble in Tharbad Nightmare.json","Trouble in Tharbad.json","Two-Player Limited Edition Starter.json","Under the Ash Mountains.json","Voyage Across Belegaer Nightmare.json","We Must Away, Ere Break of Day Nightmare.json","Wrath and Ruin.json"],_a=function(){var e=Object(Pe.a)(_e.a.mark((function e(t){var o;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.a.get("/card-game-playground/json_data/"+t);case 2:return o=e.sent,e.abrupt("return",{res:o,packCode:t.split(".json")[0]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pa=function(){var e=Object(Pe.a)(_e.a.mark((function e(t){var o;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.a.get("/card-game-playground/json_data/"+t);case 2:return o=e.sent,e.abrupt("return",{res:o,packCode:t.split(".json")[0]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ma=function(){var e=Object(Pe.a)(_e.a.mark((function e(t){var o;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.a.get("/card-game-playground/json_data/scenarios/"+t+".json");case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ia=Object(c.c)((function(e){return{playerColors:qo(e),cards:We(e),cardsData:Ee(e),panMode:ze(e),multiselectMode:Ve(e),gameState:Jo(e),counters:Uo(e),peerId:Zo(e),dropTargetCardsById:Ke(e),menuPreviewCard:$o(e)}}),{cardMove:Pt,endCardMove:Mt,exhaustCard:_t,loadCardsData:re,allJsonData:function(){return function(){var e=Object(Pe.a)(_e.a.mark((function e(t){return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(xa.map((function(e){return _a(e)})));case 2:return e.sent.forEach((function(e){200===e.res.status?t(ne({packType:d.MarvelChampions,pack:e.res.data,pack_code:e.packCode})):console.error("Failed to load some json data")})),e.next=6,Promise.all(Oa.map((function(e){return Pa(e)})));case 6:return e.sent.forEach((function(e){200===e.res.status?t(ne({packType:d.LordOfTheRingsLivingCardGame,pack:e.res.data,pack_code:e.packCode})):console.error("Failed to load some json data")})),e.next=10,Promise.all(x.map((function(e){return Ma(e.Title)})));case 10:e.sent.forEach((function(e){200===e.status?t(se({setCode:e.data.Slug,cards:e.data.AllCards})):console.error("Failed to load some json data")}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},selectCard:wt,unselectCard:xt,toggleSelectCard:Ot,selectMultipleCards:It,startCardMove:function(e){return function(t){var o=Object(M.a)(Object(M.a)({},e),{},{splitCardId:Object(f.a)()});t(ue(o))}},unselectAllCards:Dt,togglePanMode:Nt,flipCards:Et,shuffleStack:at,fetchDecklistById:nt,updateZoom:F,updatePosition:B,resetApp:O,addCardStack:function(e){return function(t){var o=Object(M.a)(Object(M.a)({},e),{},{id:Object(f.a)()});t(ce(o))}},toggleToken:At,adjustCounterToken:Lt,pullCardOutOfCardStack:function(e){return function(t){var o=Object(M.a)(Object(M.a)({},e),{},{id:Object(f.a)()});t(de(o))}},addNewCounter:function(e){return function(t){var o={pos:e,id:Object(f.a)()};t(Gt(o))}},updateCounterValue:Vt,removeCounter:Kt,moveCounter:Jt,connectToRemoteGame:G,requestResync:W,undo:m.ActionCreators.undo,redo:m.ActionCreators.redo,drawCardsOutOfCardStack:rt,setPreviewCardId:U,clearPreviewCard:z,quitGame:q,updateCounterColor:Zt,createDeckFromTxt:function(e){return function(t,o){if(e.gameType===d.MarvelChampions){var a=Le(o()),r=Fe(o());t(me(st(function(e,t,o,a){var r=a.split("\n").map((function(e){return e.trim()})).filter((function(e){return!!e})),n="",s=r.findIndex((function(e){return e.toLocaleLowerCase().startsWith("pack")}));-1!==s&&(n=r[s-1]);var i=e[n];if(!i)throw new Error("Could not find hero with name ".concat(n));var c=/^\dx/,d=r.filter((function(e){var t;return 0===(null===(t=e.match(c))||void 0===t?void 0:t.index)})),l={};return d.forEach((function(e){var o=parseInt(e[0]);if(Number.isNaN(o))throw new Error("Could not get number from txt file for card");var a=e.split(c)[1].split("(")[0].trim(),r=t[a];l[r.code]=o})),console.log(n),{data:{investigator_code:i.code,slots:l}}}(a,r,e.position,e.txtContents),o(),{gameType:e.gameType,decklistId:-1,position:e.position})))}}},generateGameStateUrl:function(){return function(e,t){var o=t(),a=o.liveState.present.cards.cards,r=o.liveState.present.counters,n=o.game.activeGameType,s=dt.a(JSON.stringify(a)),i=dt.a(JSON.stringify(r));ka("".concat("".concat(window.location.origin).concat(window.location.pathname),"?gameType=").concat(n,"&cards=").concat(s,"&counters=").concat(i))}},showRadialMenuAtPosition:Z})(wa),Da=(o(250),o(291)),Na=o(287),Ra=o(293),Ea=function(e){return Object(a.jsxs)("div",{className:"game-picker",children:[Object(a.jsx)("h1",{children:"Card Game Playground"}),Object(a.jsxs)(Na.a,{className:"select",children:[Object(a.jsx)(Ra.a,{id:"game-picker-label",children:"Select Game"}),Object(a.jsx)(Da.a,{id:"game-picker",labelId:"game-picker-label",onChange:function(t){e.updateActiveGameType(t.target.value)},children:Object.entries(d).map((function(e){var t=Object(y.a)(e,2),o=t[0],r=t[1],n=o.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return Object(a.jsx)(Ro.a,{value:r,children:n})}))})]})]})},Aa=function(e){var t=e.clearQueryParams;return Object(r.useEffect)((function(){t()}),[t]),e.activeGameType?Object(a.jsx)(Ia,{currentGameType:e.activeGameType}):Ea(e)},La=Object(c.c)((function(e){return{activeGameType:Yo(e)}}),{updateActiveGameType:J,clearQueryParams:function(){return function(){new URLSearchParams(window.location.search).get("gameType")&&window.history.replaceState({},document.title,window.location.pathname||"/")}}})(Aa),Fa=function(){console.log("configuring store. NODE_ENV is production");var e=Object(h.a)({reducer:$t,middleware:co,devTools:!1});return e.subscribe(u()((function(){!function(e){var t=["cardsData"];try{Object.entries(e).forEach((function(e){var o=Object(y.a)(e,2),a=o[0],r=o[1];if(!t.includes(a)){var n=JSON.stringify(r);localStorage.setItem(a,n)}}))}catch(o){console.error("Error writing state to local storage")}}(e.getState())}),1e3)),e}();i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(c.a,{store:Fa,children:Object(a.jsx)(La,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e){e.exports=JSON.parse('[{"Title":"Passage Through Mirkwood","Slug":"Passage-Through-Mirkwood","Product":"Core Set","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey Along the Anduin","Slug":"Journey-Along-the-Anduin","Product":"Core Set","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Dol Guldur","Slug":"Escape-from-Dol-Guldur","Product":"Core Set","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Oath","Slug":"The-Oath","Product":"Two-Player Limited Edition Starter","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Caves of Nibin-D\xfbm","Slug":"The-Caves-of-Nibin-D\xfbm","Product":"Two-Player Limited Edition Starter","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hunt for Gollum","Slug":"The-Hunt-for-Gollum","Product":"The Hunt for Gollum","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Conflict at the Carrock","Slug":"Conflict-at-the-Carrock","Product":"Conflict at the Carrock","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Journey to Rhosgobel","Slug":"A-Journey-to-Rhosgobel","Product":"A Journey to Rhosgobel","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hills of Emyn Muil","Slug":"The-Hills-of-Emyn-Muil","Product":"The Hills of Emyn Muil","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dead Marshes","Slug":"The-Dead-Marshes","Product":"The Dead Marshes","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Return to Mirkwood","Slug":"Return-to-Mirkwood","Product":"Return to Mirkwood","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into the Pit","Slug":"Into-the-Pit","Product":"Khazad-d\xfbm","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Seventh Level","Slug":"The-Seventh-Level","Product":"Khazad-d\xfbm","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight from Moria","Slug":"Flight-from-Moria","Product":"Khazad-d\xfbm","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Redhorn Gate","Slug":"The-Redhorn-Gate","Product":"The Redhorn Gate","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Road to Rivendell","Slug":"Road-to-Rivendell","Product":"Road to Rivendell","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Watcher in the Water","Slug":"The-Watcher-in-the-Water","Product":"The Watcher in the Water","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Long Dark","Slug":"The-Long-Dark","Product":"The Long Dark","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Foundations of Stone","Slug":"Foundations-of-Stone","Product":"Foundations of Stone","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Shadow and Flame","Slug":"Shadow-and-Flame","Product":"Shadow and Flame","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Peril in Pelargir","Slug":"Peril-in-Pelargir","Product":"Heirs of N\xfamenor","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into Ithilien","Slug":"Into-Ithilien","Product":"Heirs of N\xfamenor","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Cair Andros","Slug":"The-Siege-of-Cair-Andros","Product":"Heirs of N\xfamenor","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Steward\'s Fear","Slug":"The-Steward\'s-Fear","Product":"The Steward\'s Fear","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dr\xfaadan Forest","Slug":"The-Dr\xfaadan-Forest","Product":"The Dr\xfaadan Forest","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Encounter at Amon D\xeen","Slug":"Encounter-at-Amon-D\xeen","Product":"Encounter at Amon D\xeen","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Assault on Osgiliath","Slug":"Assault-on-Osgiliath","Product":"Assault on Osgiliath","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Blood of Gondor","Slug":"The-Blood-of-Gondor","Product":"The Blood of Gondor","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Morgul Vale","Slug":"The-Morgul-Vale","Product":"The Morgul Vale","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fords of Isen","Slug":"The-Fords-of-Isen","Product":"The Voice of Isengard","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"To Catch an Orc","Slug":"To-Catch-an-Orc","Product":"The Voice of Isengard","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into Fangorn","Slug":"Into-Fangorn","Product":"The Voice of Isengard","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dunland Trap","Slug":"The-Dunland-Trap","Product":"The Dunland Trap","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Three Trials","Slug":"The-Three-Trials","Product":"The Three Trials","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Trouble in Tharbad","Slug":"Trouble-in-Tharbad","Product":"Trouble in Tharbad","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The N\xeen-in-Eilph","Slug":"The-N\xeen-in-Eilph","Product":"The N\xeen-in-Eilph","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Celebrimbor\'s Secret","Slug":"Celebrimbor\'s-Secret","Product":"Celebrimbor\'s Secret","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Antlered Crown","Slug":"The-Antlered-Crown","Product":"The Antlered Crown","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Intruders in Chetwood","Slug":"Intruders-in-Chetwood","Product":"The Lost Realm","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Weather Hills","Slug":"The-Weather-Hills","Product":"The Lost Realm","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Deadmen\'s Dike","Slug":"Deadmen\'s-Dike","Product":"The Lost Realm","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Wastes of Eriador","Slug":"The-Wastes-of-Eriador","Product":"The Wastes of Eriador","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Mount Gram","Slug":"Escape-from-Mount-Gram","Product":"Escape from Mount Gram","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Across the Ettenmoors","Slug":"Across-the-Ettenmoors","Product":"Across the Ettenmoors","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Treachery of Rhudaur","Slug":"The-Treachery-of-Rhudaur","Product":"Treachery of Rhudaur","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Carn D\xfbm","Slug":"The-Battle-of-Carn-D\xfbm","Product":"The Battle of Carn D\xfbm","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dread Realm","Slug":"The-Dread-Realm","Product":"The Dread Realm","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Voyage Across Belegaer","Slug":"Voyage-Across-Belegaer","Product":"The Grey Havens","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fate of N\xfamenor","Slug":"The-Fate-of-N\xfamenor","Product":"The Grey Havens","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Raid on the Grey Havens","Slug":"Raid-on-the-Grey-Havens","Product":"The Grey Havens","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight of the Stormcaller","Slug":"Flight-of-the-Stormcaller","Product":"Flight of the Stormcaller","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Thing in the Depths","Slug":"The-Thing-in-the-Depths","Product":"The Thing in the Depths","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Temple of the Deceived","Slug":"Temple-of-the-Deceived","Product":"Temple of the Deceived","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Drowned Ruins","Slug":"The-Drowned-Ruins","Product":"The Drowned Ruins","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Storm on Cobas Haven","Slug":"A-Storm-on-Cobas-Haven","Product":"A Storm on Cobas Haven","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The City of Corsairs","Slug":"The-City-of-Corsairs","Product":"The City of Corsairs","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Umbar","Slug":"Escape-from-Umbar","Product":"The Sands of Harad","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Desert Crossing","Slug":"Desert-Crossing","Product":"The Sands of Harad","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Long Arm of Mordor","Slug":"The-Long-Arm-of-Mordor","Product":"The Sands of Harad","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The M\xfbmakil","Slug":"The-M\xfbmakil","Product":"The M\xfbmakil","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Race Across Harad","Slug":"Race-Across-Harad","Product":"Race Across Harad","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Beneath the Sands","Slug":"Beneath-the-Sands","Product":"Beneath the Sands","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Black Serpent","Slug":"The-Black-Serpent","Product":"The Black Serpent","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dungeons of Cirith Gurat","Slug":"The-Dungeons-of-Cirith-Gurat","Product":"The Dungeons of Cirith Gurat","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Crossings of Poros","Slug":"The-Crossings-of-Poros","Product":"The Crossings of Poros","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey Up the Anduin","Slug":"Journey-Up-the-Anduin","Product":"The Wilds of Rhovanion","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Lost in Mirkwood","Slug":"Lost-in-Mirkwood","Product":"The Wilds of Rhovanion","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The King\'s Quest","Slug":"The-King\'s-Quest","Product":"The Wilds of Rhovanion","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Withered Heath","Slug":"The-Withered-Heath","Product":"The Withered Heath","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Roam Across Rhovanion","Slug":"Roam-Across-Rhovanion","Product":"Roam Across Rhovanion","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Fire in the Night","Slug":"Fire-in-the-Night","Product":"Fire in the Night","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ghost of Framsburg","Slug":"The-Ghost-of-Framsburg","Product":"The Ghost of Framsburg","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Mount Gundabad","Slug":"Mount-Gundabad","Product":"Mount Gundabad","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fate of Wilderland","Slug":"The-Fate-of-Wilderland","Product":"The Fate of Wilderland","Number":9,"QuestCards":[],"ScenarioCards":[]},{"Title":"The River Running","Slug":"The-River-Running","Product":"A Shadow in the East","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Danger in Dorwinion","Slug":"Danger-in-Dorwinion","Product":"A Shadow in the East","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Temple of Doom","Slug":"Temple-of-Doom","Product":"A Shadow in the East","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Wrath and Ruin","Slug":"Wrath-and-Ruin","Product":"Wrath and Ruin","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The City of Ulfast","Slug":"The-City-of-Ulfast","Product":"The City of Ulfast","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Challenge of the Wainriders","Slug":"Challenge-of-the-Wainriders","Product":"Challenge of the Wainriders","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Under the Ash Mountains","Slug":"Under-the-Ash-Mountains","Product":"Under the Ash Mountains","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Land of Sorrow","Slug":"The-Land-of-Sorrow","Product":"The Land of Sorrow","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fortress of Nurn","Slug":"The-Fortress-of-Nurn","Product":"The Fortress of Nurn","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"We Must Away, Ere Break of Day","Slug":"We-Must-Away,-Ere-Break-of-Day","Product":"The Hobbit: Over Hill and Under Hill","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Over the Misty Mountains Grim","Slug":"Over-the-Misty-Mountains-Grim","Product":"The Hobbit: Over Hill and Under Hill","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Dungeons Deep and Caverns Dim","Slug":"Dungeons-Deep-and-Caverns-Dim","Product":"The Hobbit: Over Hill and Under Hill","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flies and Spiders","Slug":"Flies-and-Spiders","Product":"The Hobbit: On the Doorstep","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Lonely Mountain","Slug":"The-Lonely-Mountain","Product":"The Hobbit: On the Doorstep","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Five Armies","Slug":"The-Battle-of-Five-Armies","Product":"The Hobbit: On the Doorstep","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Shadow of the Past","Slug":"A-Shadow-of-the-Past","Product":"The Black Riders","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Knife in the Dark","Slug":"A-Knife-in-the-Dark","Product":"The Black Riders","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight to the Ford","Slug":"Flight-to-the-Ford","Product":"The Black Riders","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ring Goes South","Slug":"The-Ring-Goes-South","Product":"The Road Darkens","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey in the Dark","Slug":"Journey-in-the-Dark","Product":"The Road Darkens","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Breaking of the Fellowship","Slug":"Breaking-of-the-Fellowship","Product":"The Road Darkens","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Uruk-hai","Slug":"The-Uruk-hai","Product":"The Treason of Saruman","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Helm\'s Deep","Slug":"Helm\'s-Deep","Product":"The Treason of Saruman","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Road to Isengard","Slug":"The-Road-to-Isengard","Product":"The Treason of Saruman","Number":9,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Passage of the Marshes","Slug":"The-Passage-of-the-Marshes","Product":"The Land of Shadow","Number":10,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey to the Cross-roads","Slug":"Journey-to-the-Cross-roads","Product":"The Land of Shadow","Number":11,"QuestCards":[],"ScenarioCards":[]},{"Title":"Shelob\'s Lair","Slug":"Shelob\'s-Lair","Product":"The Land of Shadow","Number":12,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Passing of the Grey Company","Slug":"The-Passing-of-the-Grey-Company","Product":"The Flame of the West","Number":13,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Gondor","Slug":"The-Siege-of-Gondor","Product":"The Flame of the West","Number":14,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of the Pelennor Fields","Slug":"The-Battle-of-the-Pelennor-Fields","Product":"The Flame of the West","Number":15,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Tower of Cirith Ungol","Slug":"The-Tower-of-Cirith-Ungol","Product":"The Mountain of Fire","Number":16,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Black Gate Opens","Slug":"The-Black-Gate-Opens","Product":"The Mountain of Fire","Number":17,"QuestCards":[],"ScenarioCards":[]},{"Title":"Mount Doom","Slug":"Mount-Doom","Product":"The Mountain of Fire","Number":18,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Massing at Osgiliath","Slug":"The-Massing-at-Osgiliath","Product":"2011","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Lake-town","Slug":"The-Battle-of-Lake-town","Product":"2012","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Stone of Erech","Slug":"The-Stone-of-Erech","Product":"2013","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Old Forest","Slug":"The-Old-Forest","Product":"2014","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ruins of Belegost","Slug":"The-Ruins-of-Belegost","Product":"2015","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Fog on the Barrow-downs","Slug":"Fog-on-the-Barrow-downs","Product":"2014","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Murder at the Prancing Pony","Slug":"Murder-at-the-Prancing-Pony","Product":"2015","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Ann\xfaminas","Slug":"The-Siege-of-Ann\xfaminas","Product":"2016","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Attack on Dol Guldur","Slug":"Attack-on-Dol-Guldur","Product":"2017","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hunt for the Dreadnaught","Slug":"The-Hunt-for-the-Dreadnaught","Product":"The Hunt for the Dreadnaught","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Hunting of the Wolf","Slug":"Hunting-of-the-Wolf","Product":"First Age","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Isle of Werewolves","Slug":"The-Isle-of-Werewolves","Product":"First Age","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Seat of Morgoth","Slug":"The-Seat-of-Morgoth","Product":"First Age","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Trial Upon the Marches","Slug":"Trial-Upon-the-Marches","Product":"Trial Upon the Marches","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Among the Outlaws","Slug":"Among-the-Outlaws","Product":"Among the Outlaws","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Betrayal of M\xeem","Slug":"The-Betrayal-of-M\xeem","Product":"The Betrayal of M\xeem","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fall of Nargothrond","Slug":"The-Fall-of-Nargothrond","Product":"The Fall of Nargothrond","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Ambush at Erelas","Slug":"Ambush-at-Erelas","Product":"Children of Eorl","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle for the Beacon","Slug":"The-Battle-for-the-Beacon","Product":"Children of Eorl","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Horse Lord\'s Ire","Slug":"The-Horse-Lord\'s-Ire","Product":"Children of Eorl","Number":3,"QuestCards":[],"ScenarioCards":[]}]')}},[[251,1,2]]]);
//# sourceMappingURL=main.a9198e5b.chunk.js.map