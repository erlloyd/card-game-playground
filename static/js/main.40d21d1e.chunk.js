(this["webpackJsonpcard-game-playground"]=this["webpackJsonpcard-game-playground"]||[]).push([[0],{152:function(e){e.exports=JSON.parse('[{"code":"rhino","name":"Rhino","card_set_type_code":"villain"},{"code":"klaw","name":"Klaw","card_set_type_code":"villain"},{"code":"ultron","name":"Ultron","card_set_type_code":"villain"},{"code":"she_hulk_nemesis","name":"She-Hulk Nemesis","card_set_type_code":"nemesis"},{"code":"iron_man_nemesis","name":"Iron Man Nemesis","card_set_type_code":"nemesis"},{"code":"spider_man_nemesis","name":"Spider-Man Nemesis","card_set_type_code":"nemesis"},{"code":"black_panther_nemesis","name":"Black Panther Nemesis","card_set_type_code":"nemesis"},{"code":"captain_marvel_nemesis","name":"Captain Marvel Nemesis","card_set_type_code":"nemesis"},{"code":"she_hulk","name":"She-Hulk","card_set_type_code":"hero"},{"code":"iron_man","name":"Iron Man","card_set_type_code":"hero"},{"code":"spider_man","name":"Spider-Man","card_set_type_code":"hero"},{"code":"black_panther","name":"Black Panther","card_set_type_code":"hero"},{"code":"captain_marvel","name":"Captain Marvel","card_set_type_code":"hero"},{"code":"bomb_scare","name":"Bomb Scare","card_set_type_code":"modular"},{"code":"standard","name":"Standard","card_set_type_code":"standard"},{"code":"expert","name":"Expert","card_set_type_code":"expert"},{"code":"masters_of_evil","name":"Masters of Evil","card_set_type_code":"modular"},{"code":"under_attack","name":"Under Attack","card_set_type_code":"modular"},{"code":"legions_of_hydra","name":"Legions of Hydra","card_set_type_code":"modular"},{"code":"the_doomsday_chair","name":"The Doomsday Chair","card_set_type_code":"modular"},{"code":"risky_business","name":"Risky Business","card_set_type_code":"villain"},{"code":"mutagen_formula","name":"Mutagen Formula","card_set_type_code":"villain"},{"code":"goblin_gimmicks","name":"Goblin Gimmicks","card_set_type_code":"modular"},{"code":"running_interference","name":"Running Interference","card_set_type_code":"modular"},{"code":"power_drain","name":"Power Drain","card_set_type_code":"modular"},{"code":"a_mess_of_things","name":"A Mess of Things","card_set_type_code":"modular"},{"code":"captain_america","name":"Captain America","card_set_type_code":"hero"},{"code":"captain_america_nemesis","name":"Captain America Nemesis","card_set_type_code":"nemesis"},{"code":"ms_marvel","name":"Ms. Marvel","card_set_type_code":"hero"},{"code":"ms_marvel_nemesis","name":"Ms. Marvel Nemesis","card_set_type_code":"nemesis"},{"code":"thor","name":"Thor","card_set_type_code":"hero"},{"code":"thor_nemesis","name":"Thor Nemesis","card_set_type_code":"nemesis"},{"code":"wrecking_crew","name":"Wrecking Crew","card_set_type_code":"villain"},{"code":"piledriver","name":"Piledriver","card_set_type_code":"villain"},{"code":"wrecker","name":"Wrecker","card_set_type_code":"villain"},{"code":"thunderball","name":"Thunderball","card_set_type_code":"villain"},{"code":"bulldozer","name":"Bulldozer","card_set_type_code":"villain"},{"code":"black_widow","name":"Black Widow","card_set_type_code":"hero"},{"code":"black_widow_nemesis","name":"Black Widow Nemesis","card_set_type_code":"nemesis"},{"code":"doctor_strange","name":"Doctor Strange","card_set_type_code":"hero"},{"code":"invocation","name":"Invocation","card_set_type_code":"hero"},{"code":"doctor_strange_nemesis","name":"Doctor Strange Nemesis","card_set_type_code":"nemesis"},{"code":"hulk","name":"Hulk","card_set_type_code":"hero"},{"code":"hulk_nemesis","name":"Hulk Nemesis","card_set_type_code":"nemesis"},{"code":"kree_fanatic","name":"Kree Fanatic","card_set_type_code":"modular"},{"code":"hawkeye","name":"Hawkeye","card_set_type_code":"hero"},{"code":"hawkeye_nemesis","name":"Hawkeye Nemesis","card_set_type_code":"nemesis"},{"code":"spider_woman","name":"Spider-Woman","card_set_type_code":"hero"},{"code":"spider_woman_nemesis","name":"Spider-Woman Nemesis","card_set_type_code":"nemesis"},{"code":"crossbones","name":"Crossbones","card_set_type_code":"villain"},{"code":"exper_weapon","name":"Experimental Weapons","card_set_type_code":"modular"},{"code":"absorbing_man","name":"Absorbing Man","card_set_type_code":"villain"},{"code":"taskmaster","name":"Taskmaster","card_set_type_code":"villain"},{"code":"zola","name":"Zola","card_set_type_code":"villain"},{"code":"red_skull","name":"Red Skull","card_set_type_code":"villain"},{"code":"hydra_assault","name":"Hydra Assault","card_set_type_code":"modular"},{"code":"weap_master","name":"Weapon Master","card_set_type_code":"modular"},{"code":"hydra_patrol","name":"Hydra Patrol","card_set_type_code":"modular"},{"code":"hydra_camp","name":"Hydra Campaign","card_set_type_code":"modular"},{"code":"expcamp","name":"Expert Campaign","card_set_type_code":"modular"},{"code":"kang","name":"Kang","card_set_type_code":"villain"},{"code":"temporal","name":"Temporal","card_set_type_code":"modular"},{"code":"exp_kang","name":"Expert Kang","card_set_type_code":"modular"},{"code":"anachronauts","name":"Anachronauts","card_set_type_code":"modular"},{"code":"mot","name":"Master of Time","card_set_type_code":"modular"},{"code":"ant","name":"Ant-Man","card_set_type_code":"hero"},{"code":"ant_nemesis","name":"Ant-Man Nemesis","card_set_type_code":"nemesis"},{"code":"wsp","name":"Wasp","card_set_type_code":"hero"},{"code":"wsp_nemesis","name":"Wasp Nemesis","card_set_type_code":"nemesis"},{"code":"qsv","name":"Quicksilver","card_set_type_code":"hero"},{"code":"qsv_nemesis","name":"Quicksilver Nemesis","card_set_type_code":"nemesis"},{"code":"scw","name":"Scarlet Witch","card_set_type_code":"hero"},{"code":"scw_nemesis","name":"Scarlet Witch Nemesis","card_set_type_code":"nemesis"},{"code":"groot","name":"Groot","card_set_type_code":"hero"},{"code":"groot_nemesis","name":"Groot Nemesis","card_set_type_code":"nemesis"},{"code":"rocket","name":"Rocket Raccoon","card_set_type_code":"hero"},{"code":"rocket_nemesis","name":"Rocket Raccoon Nemesis","card_set_type_code":"nemesis"},{"code":"brotherhood_of_badoon","name":"Brotherhood of Badoon","card_set_type_code":"villain"},{"code":"ship_command","name":"Ship Command","card_set_type_code":"modular"},{"code":"band_of_badoon","name":"Band of Badoon","card_set_type_code":"modular"},{"code":"stld","name":"Star-Lord","card_set_type_code":"hero"},{"code":"stld_nemesis","name":"Star-Lord Nemesis","card_set_type_code":"nemesis"},{"code":"gam","name":"Gamora","card_set_type_code":"hero"},{"code":"gam_nemesis","name":"Gamora Nemesis","card_set_type_code":"nemesis"},{"code":"drax","name":"Drax","card_set_type_code":"hero"},{"code":"drax_nemesis","name":"Drax Nemesis","card_set_type_code":"nemesis"}]')},191:function(e,t,o){},218:function(e,t){function o(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=218},242:function(e,t,o){},243:function(e,t,o){},248:function(e,t,o){},249:function(e,t,o){},250:function(e,t,o){"use strict";o.r(t);var r=o(3),a=o(0),n=o.n(a),s=o(28),i=o.n(s),d=(o(191),o(29)),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var o=e.installing;null!=o&&(o.onstatechange=function(){"installed"===o.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u,h=o(151),p=o.n(h),m=o(24),f=o(42),g=o(52),v=o.n(g),T=o(291),C=Object(T.a)();!function(e){e.MarvelChampions="marvelchampions",e.LordOfTheRingsLivingCardGame="lotrlcg"}(u||(u={}));var b,y=["red","cyan","green","blue","magenta","yellow"],j=o(21),S=function(e){try{var t,o=localStorage.getItem(e);if(null===o)return{};var r=JSON.parse(o||"{}");return null!==(t=r.present)&&void 0!==t?t:r}catch(a){return console.error("problem parsing"),{}}},k=new URLSearchParams(window.location.search).get("gameType"),w=S("game"),x={activeDataType:null!==(b=null!==k&&void 0!==k?k:w.activeGameType)&&void 0!==b?b:u.MarvelChampions,data:{}},O=o(152),_=o(97),M=Object(m.b)("resetAction"),P=Object(m.b)("receiveRemoteGameState"),I=Object(m.b)("verifyRemoteGameState"),D=o(19),N=new URLSearchParams(window.location.search).get("gameType"),R=N?{activeGameType:N}:S("game");R.playerColors={},R.playerColors[C]="red",R.peerId="",R.previewCard=null,R.menuPreviewCardJsonId=null,R.radialMenuPosition=null;var E,A,L=Object(D.a)(Object(D.a)({},{playerColors:{},stageZoom:{x:.5,y:.5},stagePosition:{x:0,y:0},peerId:"",previewCard:null,menuPreviewCardJsonId:null,activeGameType:null,radialMenuPosition:null}),R),F=Object(m.d)({name:"game",initialState:L,reducers:{updateZoom:function(e,t){return e.stageZoom=t.payload,e},updatePosition:function(e,t){return e.stagePosition=t.payload,e},connectToRemoteGame:function(){},setPlayerColor:function(e,t){e.playerColors[t.payload.ref]=t.payload.color},setPeerId:function(e,t){e.peerId=t.payload},requestResync:function(){},setPreviewCardId:function(e,t){e.previewCard?e.previewCard.id!==t.payload&&(e.previewCard.id=t.payload):e.previewCard={id:t.payload}},clearPreviewCard:function(e){e.previewCard=null},setMenuPreviewCardJsonId:function(e,t){e.menuPreviewCardJsonId=t.payload},clearMenuPreviewCardJsonId:function(e){e.menuPreviewCardJsonId=null},updateActiveGameType:function(e,t){e.activeGameType=t.payload},quitGame:function(e){e.activeGameType=null},showRadialMenuAtPosition:function(e,t){e.radialMenuPosition=t.payload},hideRadialMenu:function(e){e.radialMenuPosition=null}},extraReducers:function(e){e.addCase(P,(function(e,t){e.activeGameType=t.payload.game.activeGameType})),e.addCase(M,(function(e,t){e.stagePosition={x:0,y:0},e.stageZoom={x:.5,y:.5},e.previewCard=null}))}}),B=F.actions,G=B.updateZoom,Q=B.updatePosition,W=B.connectToRemoteGame,H=B.setPlayerColor,U=B.setPeerId,z=B.requestResync,V=B.setPreviewCardId,K=B.clearPreviewCard,J=B.setMenuPreviewCardJsonId,q=B.clearMenuPreviewCardJsonId,Z=B.updateActiveGameType,Y=B.quitGame,X=B.showRadialMenuAtPosition,$=B.hideRadialMenu,ee=F.reducer,te=function(e){var t,o,r;return{code:e.code,name:e.name,images:null,octgnId:null!==(t=e.octgn_id)&&void 0!==t?t:null,quantity:e.quantity,doubleSided:!!e.double_sided,backLink:null!==(o=e.back_link)&&void 0!==o?o:null,typeCode:e.type_code,subTypeCode:null,extraInfo:{setCode:null!==(r=e.set_code)&&void 0!==r?r:null,packCode:e.pack_code,factionCode:e.faction_code}}},oe=function(e){return function(t){var o,r,a,n,s,i=null===(o=t.Back)||void 0===o?void 0:o.ImagePath;if(t.Back&&!t.Back.ImagePath){var d=t.Front.ImagePath,c=d.split(".").slice(0,-1).join(".");"A"!==c[c.length-1]?console.log("No Non-B Back Image Path for ".concat(t.Slug," from ").concat(t.CardSet)):i=d.replaceAll("A.","B.")}return{code:e?t.Slug:t.RingsDbCardId,name:t.Title,images:{front:t.Front.ImagePath,back:null!==(r=i)&&void 0!==r?r:null},octgnId:null!==(a=t.OctgnGuid)&&void 0!==a?a:null,quantity:null!==(n=t.Quantity)&&void 0!==n?n:1,doubleSided:!!t.Back,backLink:null,typeCode:t.CardType,subTypeCode:t.CardSubType,extraInfo:{setCode:null!==(s=t.CardSet)&&void 0!==s?s:null,packCode:"TODO - lotr",factionCode:e?"encounter":"player"}}}},re=function(e,t){return function(o){var r=e?o.location.entities:o.location.encounterEntities;"0"===o.card.code[0]&&"0"===o.card.code[1]||(r[o.card.code]&&t&&console.error("Found multiple cards with code "+o.card.code+" "+o.card.name+" "+o.card.extraInfo.setCode+" Existing card is "+r[o.card.code].name+" "+r[o.card.code].extraInfo.setCode),r[o.card.code]=o.card)}},ae=Object(m.d)({name:"cardsData",initialState:x,reducers:{loadCardsData:function(e){e.data={};var t=e.data[u.MarvelChampions];return t?t.setData={}:(e.data[u.MarvelChampions]={entities:{},encounterEntities:{},setData:{}},t=e.data[u.MarvelChampions]),O.forEach((function(e){t&&(t.setData[e.code]={name:e.name,setTypeCode:e.card_set_type_code,cardsInSet:[]})})),(t=e.data[u.LordOfTheRingsLivingCardGame])?t.setData={}:(e.data[u.LordOfTheRingsLivingCardGame]={entities:{},encounterEntities:{},setData:{}},t=e.data[u.LordOfTheRingsLivingCardGame]),_.forEach((function(e){t&&(t.setData[e.Slug]={name:e.Title,setTypeCode:e.Product,cardsInSet:[]})})),e},loadCardsDataForPack:function(e,t){if(e.data[t.payload.packType]||(e.data[t.payload.packType]={entities:{},encounterEntities:{},setData:{}}),t.payload.packType===u.MarvelChampions){var o=!t.payload.pack_code.includes("_encounter");t.payload.pack.map(te).map((function(o){return{location:e.data[t.payload.packType],card:o}})).forEach(re(o,!0))}else if(t.payload.packType===u.LordOfTheRingsLivingCardGame){var r=t.payload.pack;r.cards||console.log(r),r.cards.map(oe(!1)).map((function(o){return{location:e.data[t.payload.packType],card:o}})).forEach(re(!0,!0))}return e},loadCardsForEncounterSet:function(e,t){var o=e.data[u.LordOfTheRingsLivingCardGame],r=null===o||void 0===o?void 0:o.setData[t.payload.setCode];if(t.payload.cards.map)return t.payload.cards.map(oe(!0)).map((function(t){return{location:e.data[u.LordOfTheRingsLivingCardGame],card:t}})).forEach(re(!1,!1)),r&&(r.cardsInSet=r.cardsInSet.concat(t.payload.cards.filter((function(e){return-1===e.CardSet.toLocaleLowerCase().indexOf("nightmare")})).map((function(e){return{code:e.Slug,quantity:e.Quantity}})))),e;console.log("No cards found for scenario "+t.payload.setCode)}},extraReducers:function(e){e.addCase(P,(function(e,t){var o;e.activeDataType=null!==(o=t.payload.game.activeGameType)&&void 0!==o?o:u.MarvelChampions})),e.addCase(Z,(function(e,t){e.activeDataType=t.payload}))}}),ne=ae.actions,se=ne.loadCardsData,ie=ne.loadCardsDataForPack,de=ne.loadCardsForEncounterSet,ce=ae.reducer,le=Object(m.b)("addCardStackWithId"),ue=Object(m.b)("pullCardOutOfCardStackWithId"),he=Object(m.b)("drawCardsOutOfCardStackWithIds"),pe=Object(m.b)("startCardMoveWithSplitStackId"),me=Object(m.b)("replaceCardStack"),fe=Object(m.b)("setStackShuffling"),ge=Object(m.b)("createDeckFromTextFileWithIds"),ve=o(43),Te=o(115),Ce=o.n(Te),be=o(34),ye=209,je=150,Se=418,ke=300;!function(e){e.Stunned="stunned",e.Confused="confused",e.Tough="tough"}(E||(E={})),function(e){e.Damage="damage",e.Threat="threat",e.Generic="generic"}(A||(A={}));var we,xe,Oe=function(e,t){var o=e.x-t.x,r=e.y-t.y;return Math.sqrt(o*o+r*r)},_e=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},Me=o(33),Pe=o.n(Me),Ie=o(47),De=o(77),Ne=o.n(De),Re=o(92),Ee=function(e){var t;return null!==(t=e.data[e.activeDataType])&&void 0!==t?t:{entities:{},encounterEntities:{},setData:{}}},Ae=function(e){return e.cardsData},Le=Object(Re.a)(Ae,(function(e){var t=Ee(e);return Object(D.a)(Object(D.a)({},t.entities),t.encounterEntities)})),Fe=Object(Re.a)(Ae,(function(e){return Ee(e).entities})),Be=Object(Re.a)(Ae,(function(e){var t=Ee(e),o={};return Object.values(t.entities).forEach((function(e){"hero"===e.typeCode&&(o[e.name]=e)})),o})),Ge=Object(Re.a)(Ae,(function(e){var t=Ee(e),o={};return Object.values(t.entities).forEach((function(e){"hero"!==e.typeCode&&(o[e.name]=e)})),o})),Qe=Object(Re.a)(Ae,(function(e){return Ee(e).encounterEntities})),We=Object(Re.a)(Ae,(function(e){return Ee(e).setData})),He=Object(Re.a)(We,Qe,(function(e,t){return Object.entries(e).map((function(e){var o=Object(j.a)(e,2),r=o[0],a=o[1];return{setCode:r,setData:a,cards:a.cardsInSet.map((function(e){return t[e.code]}))}}))})),Ue=Object(Re.a)(Qe,Fe,We,(function(e,t,o){var r={},a=Object.values(t).filter((function(e){return"campaign"===e.extraInfo.factionCode}));return Object.values(e).concat(a).forEach((function(e){var t=e.extraInfo.setCode||"unknown";r[t]?r[t].push(e):r[t]=[e]})),Object.entries(r).map((function(e){var t=Object(j.a)(e,2),r=t[0],a=t[1];return{setCode:r,setData:o[r],cards:a}})).filter((function(e){return"nemesis"!==e.setData.setTypeCode&&"hero"!==e.setData.setTypeCode})).sort((function(e,t){return e.setData.name>t.setData.name?1:-1}))})),ze=function(e){return e.liveState.present.cards},Ve=Object(Re.a)(ze,(function(e){return e.cards.reduce((function(e,t){return e[t.id]=t,e}),{})})),Ke=function(e){return e.liveState.present.cards.panMode},Je=function(e){return e.liveState.present.cards.multiselectMode},qe=Object(Re.a)(ze,(function(e){var t={};return Object.entries(e.dropTargetCards).forEach((function(e){var o=Object(j.a)(e,2),r=o[0],a=o[1];a&&(t[a.id]={ownerRef:r,card:a})})),t})),Ze={bkw:"07",cap:"04",drs:"08",hlk:"09",trors:"10",twc:"03"},Ye={doctor_strange:[{jsonId:"09032"},{jsonId:"09033"},{jsonId:"09034"},{jsonId:"09035"},{jsonId:"09036"}],ant:[{jsonId:"12001c"}],wsp:[{jsonId:"13001c"}]},Xe=o(153),$e=o.n(Xe),et=o(154),tt=o.n(et),ot=o(155),rt=o.n(ot),at={marvelchampions:{deckSite:"marvelcdb.com",decklistApi:"https://marvelcdb.com/api/public/decklist/",encounterUiName:"Encounter Set",backgroundImageLocation:"/card-game-playground/images/table/background_marvelchampions.png",modifiers:[],tokens:{stunned:{tokenType:E.Stunned,touchMenuLetter:null,touchMenuIcon:Object(r.jsx)($e.a,{fontSize:"large"}),menuText:"Stun",menuRemoveText:"Remove Stun",imagePath:"/card-game-playground/images/standard/stunned.png"},confused:{tokenType:E.Confused,touchMenuLetter:null,touchMenuIcon:Object(r.jsx)(tt.a,{fontSize:"large"}),menuText:"Confuse",menuRemoveText:"Remove Confuse",imagePath:"/card-game-playground/images/standard/confused.png"},tough:{tokenType:E.Tough,touchMenuLetter:null,touchMenuIcon:Object(r.jsx)(rt.a,{fontSize:"large"}),menuText:"Tough",menuRemoveText:"Remove Tough",imagePath:"/card-game-playground/images/standard/tough.png"},damage:{counterTokenType:A.Damage,isNumeric:!0,touchMenuLetter:"D",touchMenuIcon:null,menuText:"Set Damage",imagePath:"/card-game-playground/images/standard/damage.png"},threat:{counterTokenType:A.Threat,isNumeric:!0,touchMenuLetter:"T",touchMenuIcon:null,menuText:"Set Threat",imagePath:"/card-game-playground/images/standard/threat.png"},generic:{counterTokenType:A.Generic,isNumeric:!0,touchMenuLetter:"G",touchMenuIcon:null,menuText:"Set Generic Tokens",imagePath:"/card-game-playground/images/standard/generic_counter.png"}}},lotrlcg:{deckSite:"ringsdb.com",decklistApi:"https://ringsdb.com/api/public/decklist/",encounterUiName:"Scenario",backgroundImageLocation:"/card-game-playground/images/table/background_lotrlcg.jpg",modifiers:[{attributeId:"threat",attributeName:"Threat",icon:"/card-game-playground/images/standard/lotr/threat.png",slot:1},{attributeId:"willpower",attributeName:"Willpower",icon:"/card-game-playground/images/standard/lotr/willpower.png",slot:2},{attributeId:"attack",attributeName:"Attack",icon:"/card-game-playground/images/standard/lotr/attack.png",slot:3},{attributeId:"defense",attributeName:"Defense",icon:"/card-game-playground/images/standard/lotr/defense.png",slot:4},{attributeId:"hitpoints",attributeName:"Hit Points",icon:"/card-game-playground/images/standard/lotr/hitpoints.png",slot:5}],tokens:{stunned:{tokenType:E.Stunned,touchMenuLetter:"Q",touchMenuIcon:null,menuText:"Quest",menuRemoveText:"Remove From Quest",imagePath:"/card-game-playground/images/standard/quest.png"},confused:null,tough:null,damage:{counterTokenType:A.Damage,isNumeric:!0,touchMenuLetter:"D",touchMenuIcon:null,menuText:"Set Damage",imagePath:"/card-game-playground/images/standard/damage_lotr.png"},threat:{counterTokenType:A.Threat,isNumeric:!0,touchMenuLetter:"P",touchMenuIcon:null,menuText:"Set Progress",imagePath:"/card-game-playground/images/standard/progress.png"},generic:{counterTokenType:A.Generic,isNumeric:!0,touchMenuLetter:"R",touchMenuIcon:null,menuText:"Set Resource Tokens",imagePath:"/card-game-playground/images/standard/resource.png"}}}},nt=function(e){return function(t,o){var r=ze(o());(e?[r.cards.find((function(t){return t.id===e}))]:r.cards.filter((function(e){return e.selected&&e.controlledBy===C}))).filter((function(e){return!!e&&e.cardStack.length>1})).forEach((function(e){t(fe({id:e.id,shuffling:!0}));var o=lt(e.cardStack);t(me({id:e.id,newStack:o})),setTimeout((function(){t(fe({id:e.id,shuffling:!1}))}))}))}},st=function(e){return function(t){var o=Array.from({length:e.numberToDraw}).map((function(e){return Object(T.a)()})),r=Object(D.a)(Object(D.a)({},e),{},{idsToUse:o});t(he(r))}},it=Object(m.c)("decklist/fetchByIdStatus",function(){var e=Object(Ie.a)(Pe.a.mark((function e(t,o){var r,a;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("".concat(at[t.gameType].decklistApi).concat(t.decklistId));case 2:r=e.sent,a=o.getState(),e.t0=t.gameType,e.next=e.t0===u.MarvelChampions?7:e.t0===u.LordOfTheRingsLivingCardGame?8:9;break;case 7:return e.abrupt("return",dt(r,a,t));case 8:return e.abrupt("return",ct(r,a,t));case 9:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}()),dt=function(e,t,o){var r,a=Fe(t)[e.data.investigator_code].extraInfo.setCode,n=Qe(t),s=[];Object.entries(n).filter((function(e){var t=Object(j.a)(e,2),o=(t[0],t[1]);return(o.extraInfo.setCode==="".concat(a)||o.extraInfo.setCode==="".concat(a,"_nemesis"))&&"obligation"===o.typeCode})).forEach((function(e){var t=Object(j.a)(e,2),o=t[0],r=t[1];s=s.concat(Array.from({length:r.quantity}).map((function(e){return o})))}));var i=Object.values(n).filter((function(e){return e.extraInfo.setCode==="".concat(a,"_nemesis")&&"obligation"!==e.typeCode})),d=[];i.forEach((function(e){d=d.concat(Array.from({length:e.quantity}).map((function(t){return e.code})))}));var c=null!==(r=Ye[null!==a&&void 0!==a?a:""])&&void 0!==r?r:[];return{position:o.position,heroId:Object(T.a)(),data:e.data,dataId:Object(T.a)(),extraHeroCards:c,relatedEncounterDeck:d,encounterDeckId:Object(T.a)(),relatedObligationDeck:s,obligationDeckId:Object(T.a)()}},ct=function(e,t,o){var r=Fe(t),a=[];Object.entries(e.data.heroes).forEach((function(e){var t=Object(j.a)(e,2),o=t[0],r=t[1],n=Array.from(Array(r).keys()).map((function(){return{jsonId:o}}));a=a.concat(n)}));var n={};return Object.entries(e.data.slots).forEach((function(e){var t=Object(j.a)(e,2),o=t[0],a=t[1],s=r[o];if(!s)throw new Error("Couldn't find card data for ".concat(o));"Hero"!==s.typeCode&&(n[o]=a)})),e.data.slots=n,{position:o.position,heroId:Object(T.a)(),data:e.data,dataId:Object(T.a)(),extraHeroCards:a,relatedEncounterDeck:[],encounterDeckId:Object(T.a)(),relatedObligationDeck:[],obligationDeckId:Object(T.a)()}},lt=function(e){for(var t,o,r=JSON.parse(JSON.stringify(e)),a=r.length;0!==a;)o=Math.floor(Math.random()*a),t=r[a-=1],r[a]=r[o],r[o]=t;return r},ut=o(64),ht=new URLSearchParams(window.location.search).get("cards"),pt=(ht?{cards:JSON.parse(ut.b(ht))}:null)||(null!==(we=null===(xe=S("liveState"))||void 0===xe?void 0:xe.cards)&&void 0!==we?we:{});pt.cards&&pt.cards.forEach((function(e){e.controlledBy="",e.selected=!1,e.shuffling=!1,e.modifiers||(e.modifiers={})})),pt.attachTargetCards={},pt.dropTargetCards={},pt.ghostCards=[],pt.outOfSyncWithRemote=!1;var mt,ft,gt,vt=Object(D.a)(Object(D.a)({},{outOfSyncWithRemote:!1,cards:[],ghostCards:[],dropTargetCards:{},attachTargetCards:{},panMode:!0,multiselectMode:!1}),pt),Tt=function(e,t){return e.cards.find((function(e){return e.id===t}))},Ct=function(e,t,o,r){var a=Tt(e,t);!a||""!==a.controlledBy&&a.controlledBy!==o||r(a)},bt=function(e,t,o){e.cards.filter((function(e){return e.selected&&e.controlledBy===t})).forEach((function(e){return o(e)}))},yt=function(e,t){e.cards.filter((function(e){return!e.selected})).forEach((function(e){return t(e)}))},jt=function(e,t){for(var o={x:0,y:0},r=!0,a=function(a){var n=t.x+50*(a+1),s=t.y-50*(a+1);o={x:n,y:s},r=!!e.cards.find((function(e){return e.x===n&&e.y===s}))},n=0;r;n++)a(n);return o},St=function(e,t){e.cards.filter((function(e){return""===e.controlledBy||e.controlledBy===t.ACTOR_REF})).forEach((function(e){e.selected=!1,e.controlledBy=""}))},kt=Object(m.d)({name:"cards",initialState:vt,reducers:{selectCard:function(e,t){t.payload.unselectOtherCards&&St(e,t),Ct(e,t.payload.id,t.ACTOR_REF,(function(e){e.selected=!0,e.controlledBy=t.ACTOR_REF}))},unselectCard:function(e,t){Ct(e,t.payload,t.ACTOR_REF,(function(e){e.selected=!1,e.controlledBy=""}))},toggleSelectCard:function(e,t){Ct(e,t.payload,t.ACTOR_REF,(function(e){e.selected=!e.selected,e.selected?e.controlledBy=t.ACTOR_REF:e.controlledBy=""}))},exhaustCard:function(e,t){e.cards.filter((function(e){var o;return e.controlledBy===t.ACTOR_REF&&(e.id===(null!==(o=t.payload)&&void 0!==o?o:"")||e.selected)})).forEach((function(e){e.exhausted=!e.exhausted}))},cardMove:function(e,t){var o,r,a,n,s=[],i=null;e.cards.filter((function(e){return e.id===t.payload.id||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(e){e.id===t.payload.id&&(i=e),e.x+=t.payload.dx,e.y+=t.payload.dy,s.push(e)}));var d=[];i&&i.controlledBy===t.ACTOR_REF&&yt(e,(function(e){var t=Oe({x:e.x,y:e.y},i?{x:i.x,y:i.y}:{x:0,y:0});t<30&&d.push({distance:t,card:e})})),e.dropTargetCards[t.ACTOR_REF]=null!==(o=null===(r=d.sort((function(e,t){return e.distance-t.distance}))[0])||void 0===r?void 0:r.card)&&void 0!==o?o:null;var c=[];i&&i.controlledBy===t.ACTOR_REF&&yt(e,(function(e){var t,o,r,a,n=Oe(i?{x:i.x,y:i.y}:{x:0,y:0},{x:e.x,y:e.y});n<150&&n>50&&e.x<(null!==(t=null===(o=i)||void 0===o?void 0:o.x)&&void 0!==t?t:0)&&e.y>(null!==(r=null===(a=i)||void 0===a?void 0:a.y)&&void 0!==r?r:0)&&c.push({distance:n,card:e})})),e.attachTargetCards[t.ACTOR_REF]=null!==(a=null===(n=c.sort((function(e,t){return e.distance-t.distance}))[0])||void 0===n?void 0:n.card)&&void 0!==a?a:null;var l=e.attachTargetCards[t.ACTOR_REF];if(l){var u=jt(e,l);if(!e.ghostCards.find((function(e){return e.x===u.x&&e.y===u.y&&e.cardStack.length>0&&"-1"===e.cardStack[0].jsonId}))){var h=JSON.parse(JSON.stringify(l));h.id=Object(T.a)(),h.x=u.x,h.y=u.y,h.cardStack=[{jsonId:"-1"}],e.ghostCards.push(h)}}else e.ghostCards=e.ghostCards.filter((function(e){return e.cardStack.length>0&&"-1"!==e.cardStack[0].jsonId}));s.forEach((function(t){e.cards.push(e.cards.splice(e.cards.indexOf(t),1)[0])}))},endCardMove:function(e,t){var o=[],r=[];e.cards.filter((function(e){return e.id===t.payload||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(a){a.dragging=!1,e.attachTargetCards[t.ACTOR_REF]?r.push(a):e.dropTargetCards[t.ACTOR_REF]&&(o=o.concat(a.cardStack))}));var a=e.attachTargetCards[t.ACTOR_REF];if(a){var n=jt(e,a);r.forEach((function(t,o){t.x=n.x+50*o,t.y=n.y-50*o,e.cards.unshift(e.cards.splice(e.cards.indexOf(t),1)[0])}))}else if(e.dropTargetCards[t.ACTOR_REF]){e.cards=e.cards.filter((function(e){return!(e.id===t.payload||e.selected&&e.controlledBy===t.ACTOR_REF)}));var s=e.cards.find((function(o){var r;return o.id===(null===(r=e.dropTargetCards[t.ACTOR_REF])||void 0===r?void 0:r.id)}));s&&o.length>0&&(s.cardStack=o.concat(s.cardStack))}e.ghostCards=[],e.dropTargetCards[t.ACTOR_REF]=null,e.attachTargetCards[t.ACTOR_REF]=null},selectMultipleCards:function(e,t){t.payload.unselectOtherCards&&St(e,t),t.payload.ids.map((function(t){return e.cards.find((function(e){return e.id===t}))})).forEach((function(e){!e||""!==e.controlledBy&&e.controlledBy!==t.ACTOR_REF||(e.selected=!0,e.controlledBy=t.ACTOR_REF)}))},unselectAllCards:St,togglePanMode:function(e){e.panMode=!e.panMode},toggleMultiselectMode:function(e){e.multiselectMode=!e.multiselectMode},flipCards:function(e,t){e.cards.filter((function(e){return e.selected&&(""===e.controlledBy||e.controlledBy===t.ACTOR_REF)})).forEach((function(e){e.faceup=!e.faceup,e.cardStack=e.cardStack.reverse()}))},resetCards:function(e){e.cards=[]},toggleToken:function(e,t){bt(e,t.ACTOR_REF,(function(e){void 0!==t.payload.value?e.statusTokens[t.payload.tokenType]=t.payload.value:e.statusTokens[t.payload.tokenType]=!e.statusTokens[t.payload.tokenType]}))},adjustCounterToken:function(e,t){e.cards.filter((function(e){return!!t.payload.id&&t.payload.id===e.id||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(e){void 0!==t.payload.value?e.counterTokens[t.payload.tokenType]=t.payload.value:void 0!==t.payload.delta&&(e.counterTokens[t.payload.tokenType]+=t.payload.delta),e.counterTokens[t.payload.tokenType]<0&&(e.counterTokens[t.payload.tokenType]=0)}))},adjustModifier:function(e,t){e.cards.filter((function(e){return!!t.payload.id&&t.payload.id===e.id||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(e){void 0!==t.payload.value?e.modifiers[t.payload.modifierId]=t.payload.value:void 0!==t.payload.delta&&(void 0===e.modifiers[t.payload.modifierId]&&(e.modifiers[t.payload.modifierId]=0),e.modifiers[t.payload.modifierId]+=t.payload.delta)}))},clearAllModifiers:function(e,t){e.cards.filter((function(e){return!!t.payload.id&&t.payload.id===e.id||e.selected&&e.controlledBy===t.ACTOR_REF})).forEach((function(e){e.modifiers={}}))},clearCardTokens:function(e,t){e.cards.filter((function(e){var o;return e.controlledBy===t.ACTOR_REF&&(e.id===(null!==(o=t.payload)&&void 0!==o?o:"")||e.selected)})).forEach((function(e){e.statusTokens={tough:!1,stunned:!1,confused:!1},e.counterTokens={damage:0,threat:0,generic:0},e.modifiers={}}))}},extraReducers:function(e){e.addCase(P,(function(e,t){e.cards=t.payload.liveState.present.cards.cards,e.ghostCards=t.payload.liveState.present.cards.ghostCards})),e.addCase(I,(function(e,t){var o;e.outOfSyncWithRemote=!(Ce()(null===(o=Object(be.f)(e.cards))||void 0===o?void 0:o.filter((function(e){return!e.dragging})),t.payload.liveState.present.cards.cards.filter((function(e){return!e.dragging})))&&Ce()(Object(be.f)(e.ghostCards),t.payload.liveState.present.cards.ghostCards)),e.outOfSyncWithRemote?console.error("CARDS state is out of synce with remote!!!",Object(be.f)(e),t.payload.liveState.present.cards):console.log("CARDS state is in sync")})),e.addCase(me,(function(e,t){var o=e.cards.find((function(e){return e.id===t.payload.id}));o&&(o.cardStack=t.payload.newStack)})),e.addCase(M,(function(e){e.cards=[],e.dropTargetCards={},e.ghostCards=[],e.panMode=!0})),e.addCase(le,(function(e,t){var o={controlledBy:"",x:t.payload.position.x,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.id,cardStack:t.payload.cardJsonIds.map((function(e){return{jsonId:e}})),selected:!1,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}};e.cards.push(o)})),e.addCase(ue,(function(e,t){var o=e.cards.find((function(e){return e.id===t.payload.cardStackId}));if(o&&o.cardStack.length>1){var r=[{jsonId:t.payload.jsonId}],a=Object.assign({},o,{cardStack:r});a.id=t.payload.id,a.selected=!0,a.controlledBy=t.ACTOR_REF,a.x=a.x+je+5;var n=o.cardStack.findIndex((function(e){return e.jsonId===t.payload.jsonId}));-1!==n&&o.cardStack.splice(n,1),o.selected=!1,o.controlledBy="",e.cards.push(a)}})),e.addCase(pe,(function(e,t){var o=Tt(e,t.payload.id);if(o&&!o.selected&&(e.cards=e.cards.map((function(e){return""!==e.controlledBy&&e.controlledBy!==t.ACTOR_REF||(e.selected=e.id===t.payload.id,e.selected?e.controlledBy=t.ACTOR_REF:e.controlledBy=""),e}))),t.payload.splitTopCard){var r=e.cards.find((function(e){return e.id===t.payload.id}));if(!r)throw new Error("Expected to find card");r.selected=!1,r.controlledBy="";var a=r.cardStack.shift(),n=Object.assign({},r,{selected:!0,controlledBy:t.ACTOR_REF,dragging:!0,cardStack:[a]});r.id=t.payload.splitCardId,e.cards.push(n)}e.ghostCards=[],t.payload.splitTopCard||bt(e,t.ACTOR_REF,(function(t){t.dragging=!0,e.ghostCards.push(Object.assign({},t))}))})),e.addCase(he,(function(e,t){if(t.payload.numberToDraw!==t.payload.idsToUse.length)throw new Error("Did not receive the expected number of ids");St(e,t);var o=e.cards.find((function(e){return e.id===t.payload.cardStackId}));if(!o)throw new Error("Couldn't find card stack with id ".concat(t.payload.cardStackId));for(var r=o.id,a=0;a<t.payload.numberToDraw;a++)if(o){var n=o.cardStack.shift();if(!n)throw new Error("Expected to find a top card, but didn't");var s=[{jsonId:n.jsonId}],i=Object.assign({},o,{cardStack:s});i.id=t.payload.idsToUse[a],i.selected=!0,i.controlledBy=t.ACTOR_REF,i.faceup=!t.payload.facedown,i.x=i.x+(je+5)*(a+1),i.y+=ye,0===o.cardStack.length&&(e.cards=e.cards.filter((function(e){return e.id!==r})),o=void 0),e.cards.push(i)}})),e.addCase(fe,(function(e,t){var o=e.cards.find((function(e){return e.id===t.payload.id}));o&&(o.shuffling=t.payload.shuffling)})),e.addCase(ge,(function(e,t){return wt(e,t)})),e.addCase(it.fulfilled,(function(e,t){return wt(e,t)}))}}),wt=function(e,t){console.log("got decklist"),console.log(t);var o=t.payload.data.investigator_code?[{jsonId:t.payload.data.investigator_code}]:[],r=[].concat(o,Object(ve.a)(t.payload.extraHeroCards)),a={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.heroId,cardStack:r,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}},n=[];Object.entries(t.payload.data.slots).forEach((function(e){var t=Object(j.a)(e,2),o=t[0],r=t[1],a=Array.from(Array(r).keys()).map((function(){return{jsonId:o}}));n=n.concat(a)}));var s=je+10,i={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x+s,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.dataId,cardStack:n,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}},d={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x+2*s,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.encounterDeckId,cardStack:t.payload.relatedEncounterDeck.map((function(e){return{jsonId:e}})),statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}},c={controlledBy:t.ACTOR_REF,selected:!0,x:t.payload.position.x+3*s,y:t.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:t.payload.obligationDeckId,cardStack:t.payload.relatedObligationDeck.map((function(e){return{jsonId:e}})),statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}};a.cardStack.length>0&&e.cards.push(a),i.cardStack.length>0&&e.cards.push(i),d.cardStack.length>0&&e.cards.push(d),c.cardStack.length>0&&e.cards.push(c)},xt=kt.actions,Ot=xt.selectCard,_t=xt.unselectCard,Mt=xt.toggleSelectCard,Pt=xt.exhaustCard,It=xt.cardMove,Dt=xt.endCardMove,Nt=xt.selectMultipleCards,Rt=xt.unselectAllCards,Et=xt.togglePanMode,At=xt.toggleMultiselectMode,Lt=xt.flipCards,Ft=(xt.resetCards,xt.toggleToken),Bt=xt.adjustCounterToken,Gt=xt.clearCardTokens,Qt=xt.adjustModifier,Wt=xt.clearAllModifiers,Ht=kt.reducer,Ut=Object(m.b)("addNewCounterWithId"),zt=new URLSearchParams(window.location.search).get("counters"),Vt=(zt?JSON.parse(ut.b(zt)):null)||(null!==(mt=null===(ft=S("liveState"))||void 0===ft?void 0:ft.counters)&&void 0!==mt?mt:{}),Kt=Object(D.a)(Object(D.a)({},{counters:[],firstPlayerCounterPosition:{x:0,y:0}}),Vt),Jt=Object(m.d)({name:"counters",initialState:Kt,reducers:{updateCounterValue:function(e,t){var o=e.counters.find((function(e){return e.id===t.payload.id}));o&&(o.value+=t.payload.delta,o.value<0&&(o.value=0))},removeCounter:function(e,t){e.counters=e.counters.filter((function(e){return e.id!==t.payload}))},moveCounter:function(e,t){var o=e.counters.find((function(e){return e.id===t.payload.id}));o&&(o.position={x:t.payload.newPos.x,y:t.payload.newPos.y})},moveFirstPlayerCounter:function(e,t){e.firstPlayerCounterPosition={x:t.payload.x,y:t.payload.y}},updateCounterColor:function(e,t){var o=e.counters.find((function(e){return e.id===t.payload.id}));o&&(o.color=t.payload.newColor)}},extraReducers:function(e){e.addCase(P,(function(e,t){e.counters=t.payload.liveState.present.counters.counters,e.firstPlayerCounterPosition=t.payload.liveState.present.counters.firstPlayerCounterPosition})),e.addCase(M,(function(e,t){e.counters=[],e.firstPlayerCounterPosition={x:0,y:0}})),e.addCase(Ut,(function(e,t){e.counters.push({id:t.payload.id,position:t.payload.pos,value:0,color:"red"})}))}}),qt=Jt.actions,Zt=qt.updateCounterValue,Yt=qt.removeCounter,Xt=qt.moveCounter,$t=qt.moveFirstPlayerCounter,eo=qt.updateCounterColor,to=Jt.reducer,oo=Object(f.b)({counters:to,cards:Ht}),ro=Object(f.b)({game:ee,cardsData:ce,liveState:v()(oo,{limit:20,groupBy:Object(g.groupByActionTypes)([Xt.type]),filter:Object(g.excludeAction)([pe.type,It.type,V.type,K.type])})}),ao=o(16),no=o(156),so=o.n(no),io=o(85),co=o.n(io),lo=(gt={},Object(ao.a)(gt,W.type,!0),Object(ao.a)(gt,Q.type,!0),Object(ao.a)(gt,G.type,!0),Object(ao.a)(gt,V.type,!0),Object(ao.a)(gt,K.type,!0),Object(ao.a)(gt,J.type,!0),Object(ao.a)(gt,q.type,!0),Object(ao.a)(gt,Et.type,!0),Object(ao.a)(gt,P.type,!0),Object(ao.a)(gt,z.type,!0),Object(ao.a)(gt,se.type,!0),Object(ao.a)(gt,ie.type,!0),Object(ao.a)(gt,de.type,!0),gt),uo=function(){false},ho=function(e,t){e.on("data",(function(o){o.INITIAL_STATE_MSG?(console.log("going to replace (most of) state with",o.state),setTimeout((function(){t.dispatch(P(o.state))}),0)):o.RESYNC?(uo("received request for resync"),e.send({INITIAL_STATE_MSG:!0,state:t.getState()})):o.PING?(o.REMOTE_ACTION=!0,t.dispatch(I(o.state))):(uo("recieved remote action",o),o.REMOTE_ACTION=!0,uo("dispatching remote action",o),t.dispatch(o))}))},po=Object(m.e)({thunk:!0,immutableCheck:!1,serializableCheck:!1}).concat((function(e){var t,o=new so.a(void 0,{host:"peerjs.middle-earth.house",path:"/cgp",secure:!0,debug:0,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",username:"webrtc@live.com",credential:"muazkh"}]}});return o.on("error",(function(e){console.error("*****************Server error"),console.error(e)})),o.on("disconnected",(function(){console.log("****Peer server connection disconnected")})),o.on("open",(function(r){console.log("My peer ID is: "+r),e.dispatch(U(r));var a=window.location.href.split("remote=");if(a.length>1){var n=a[1].split("&")[0];console.log("FOUND QUERY PARAM. Going to connect to peer "+n),t=o.connect(n,{metadata:{ref:C}}),ho(t,e)}})),o.on("connection",(function(o){console.log("Connection received!"),ho(t=o,e),t.on("open",(function(){console.log("connection ready for data");var o=co()(e.getState());delete o.cardsData,uo("going to send initial state",o),t.send({INITIAL_STATE_MSG:!0,state:o});var r=H({ref:t.metadata.ref,color:"blue"});t.send(r),t.send(H({ref:C,color:"red"})),e.dispatch(r),setInterval((function(){var o=co()(e.getState());delete o.cardsData,t.send({PING:!0,state:o})}),5e3)})),t.on("error",(function(e){console.error("****************Connection error:",e)})),t.on("close",(function(){console.log("******connection closed for ref "+t.metadata.ref)})),t.peerConnection.onconnectionstatechange=function(e){console.log("connection state changed"),console.log(e),console.log(t.peerConnection.connectionState),"closed"!==t.peerConnection.connectionState&&"disconnected"!==t.peerConnection.connectionState||console.log("CLEARING CLIENT OWNED CARDS for "+t.metadata.ref)}})),function(r){return function(a){return uo("received local action",a),a.REMOTE_ACTION?a.ACTOR_REF||(console.error("Received a REMOTE action without an ACTOR_REF:"),console.log(a)):a.ACTOR_REF=C,a.type===W.type?(console.log("going to connect to peer "+a.payload),t=o.connect(a.payload,{metadata:{ref:C}}),ho(t,e)):a.type===z.type&&t&&t.send({RESYNC:!0}),a.REMOTE_ACTION||!t||lo[a.type]||(uo("going to send action to peer!"),t.send(a)),r(a)}}}));var mo,fo,go=o(8),vo=o(9),To=o(10),Co=o(11),bo=o(157),yo=o(103),jo=o(25),So=o(87),ko=47,wo=47,xo=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(e){var r,a,n,s;Object(go.a)(this,o),(s=t.call(this,e)).damageImg=void 0,s.threatImg=void 0,s.genericImg=void 0,s.unmounted=void 0,s.unmounted=!0,s.state={imagesLoaded:{damage:!1,threat:!1,generic:!1}},s.damageImg=new Image,s.threatImg=new Image,s.genericImg=new Image;var i=at[s.props.currentGameType].tokens;return s.damageImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:!0,threat:s.state.imagesLoaded.threat,generic:s.state.imagesLoaded.generic}})},(null===(r=s.props.card)||void 0===r?void 0:r.counterTokens.damage)&&i.damage&&(s.damageImg.src=i.damage.imagePath),s.threatImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:s.state.imagesLoaded.damage,threat:!0,generic:s.state.imagesLoaded.generic}})},(null===(a=s.props.card)||void 0===a?void 0:a.counterTokens.threat)&&i.threat&&(s.threatImg.src=i.threat.imagePath),s.genericImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:s.state.imagesLoaded.damage,threat:s.state.imagesLoaded.threat,generic:!0}})},(null===(n=s.props.card)||void 0===n?void 0:n.counterTokens.generic)&&i.generic&&(s.genericImg.src=i.generic.imagePath),s}return Object(vo.a)(o,[{key:"componentDidUpdate",value:function(e,t){var o,r,a,n,s,i,d=at[this.props.currentGameType].tokens;!this.state.imagesLoaded.damage&&!(null===(o=e.card)||void 0===o?void 0:o.counterTokens.damage)&&(null===(r=this.props.card)||void 0===r?void 0:r.counterTokens.damage)&&d.damage&&(this.damageImg.src=d.damage.imagePath),!this.state.imagesLoaded.threat&&!(null===(a=e.card)||void 0===a?void 0:a.counterTokens.threat)&&(null===(n=this.props.card)||void 0===n?void 0:n.counterTokens.threat)&&d.threat&&(this.threatImg.src=d.threat.imagePath),!this.state.imagesLoaded.generic&&!(null===(s=e.card)||void 0===s?void 0:s.counterTokens.generic)&&(null===(i=this.props.card)||void 0===i?void 0:i.counterTokens.generic)&&d.generic&&(this.genericImg.src=d.generic.imagePath)}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){if(!this.props.card)return null;var e=this.props.x-23.5,t=this.props.y-ye/2+20,o=this.state.imagesLoaded.damage&&!!this.props.card.counterTokens.damage,a=o?Object(r.jsx)(jo.c,{x:e,y:t,scale:{x:ko/this.damageImg.naturalWidth,y:wo/this.damageImg.naturalHeight},width:this.damageImg.naturalWidth,height:this.damageImg.naturalHeight,fillPatternImage:this.damageImg},"".concat(this.props.card.id,"-damageToken")):null,n=o?Object(r.jsx)(jo.e,{x:e,y:t,width:this.damageImg.naturalWidth*(ko/this.damageImg.naturalWidth),height:this.damageImg.naturalHeight*(wo/this.damageImg.naturalHeight),text:"".concat(this.props.card.counterTokens.damage),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-damageText")):null,s=this.props.x-23.5,i=t+wo+5,d=this.state.imagesLoaded.threat&&!!this.props.card.counterTokens.threat,c=d?Object(r.jsx)(jo.c,{x:s,y:i,scale:{x:ko/this.threatImg.naturalWidth,y:wo/this.threatImg.naturalHeight},width:this.threatImg.naturalWidth,height:this.threatImg.naturalHeight,fillPatternImage:this.threatImg},"".concat(this.props.card.id,"-threatToken")):null,l=d?Object(r.jsx)(jo.e,{x:s,y:i,width:this.threatImg.naturalWidth*(ko/this.threatImg.naturalWidth),height:this.threatImg.naturalHeight*(wo/this.threatImg.naturalHeight),text:"".concat(this.props.card.counterTokens.threat),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-threatText")):null,u=this.props.x-23.5,h=i+wo+5,p=this.state.imagesLoaded.generic&&!!this.props.card.counterTokens.generic;return[a,n,c,l,p?Object(r.jsx)(jo.c,{x:u,y:h,scale:{x:ko/this.genericImg.naturalWidth,y:wo/this.genericImg.naturalHeight},width:this.genericImg.naturalWidth,height:this.genericImg.naturalHeight,fillPatternImage:this.genericImg},"".concat(this.props.card.id,"-genericToken")):null,p?Object(r.jsx)(jo.e,{x:u,y:h,width:this.genericImg.naturalWidth*(ko/this.genericImg.naturalWidth),height:this.genericImg.naturalHeight*(wo/this.genericImg.naturalHeight),text:"".concat(this.props.card.counterTokens.generic),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-genericText")):null]}}]),o}(a.Component),Oo=Object(d.c)((function(e,t){return{card:Ve(e)[t.id]}}),{})(xo),_o={"05026":!0},Mo={"02001a":"/card-game-playground/images/cards/8665869b-fae4-494e-91d1-1e8c308220c2.jpg","02001b":"/card-game-playground/images/cards/8665869b-fae4-494e-91d1-1e8c308220c2.b.jpg","02002a":"/card-game-playground/images/cards/cfd051be-4ade-4cf8-b575-4b673cfa9a92.jpg","02002b":"/card-game-playground/images/cards/cfd051be-4ade-4cf8-b575-4b673cfa9a92.b.jpg","02003a":"/card-game-playground/images/cards/b16187a4-3f29-4a4b-8b66-6e8c7524c402.jpg","02003b":"/card-game-playground/images/cards/b16187a4-3f29-4a4b-8b66-6e8c7524c402.b.jpg","02004":"/card-game-playground/images/cards/b35084d9-3a2b-418c-b1a4-e4929de16a2c.jpg","02004_double_sided_back":"/card-game-playground/images/cards/b35084d9-3a2b-418c-b1a4-e4929de16a2c.b.jpg","02005":"/card-game-playground/images/cards/1eae757a-25b2-4b29-a8e7-f43b12c531b0.jpg","02005_double_sided_back":"/card-game-playground/images/cards/1eae757a-25b2-4b29-a8e7-f43b12c531b0.b.jpg","02006a":"/card-game-playground/images/cards/0a59161d-7db6-4328-9eeb-1906ce8715a5.jpg","02006b":"/card-game-playground/images/cards/0a59161d-7db6-4328-9eeb-1906ce8715a5.b.jpg",12020:"https://lcgcdn.s3.amazonaws.com/mc/MC13en_20.jpg","15001a":"https://marvelcdb.com/bundles/cards/15001a.png","15001b":"https://marvelcdb.com/bundles/cards/15001b.png",15002:"https://hallofheroeshome.files.wordpress.com/2021/03/s1.jpg",15003:"https://hallofheroeshome.files.wordpress.com/2021/03/s2.jpg",15004:"https://hallofheroeshome.files.wordpress.com/2021/03/s6.jpg",15005:"https://hallofheroeshome.files.wordpress.com/2021/03/s7.jpg",15006:"https://hallofheroeshome.files.wordpress.com/2021/03/s10.jpg",15007:"https://hallofheroeshome.files.wordpress.com/2021/03/s11.jpg",15008:"https://hallofheroeshome.files.wordpress.com/2021/03/s12.jpg",15009:"https://hallofheroeshome.files.wordpress.com/2021/03/s15.jpg",15010:"https://hallofheroeshome.files.wordpress.com/2021/03/w1.jpg",15011:"https://hallofheroeshome.files.wordpress.com/2021/03/w2.jpg",15012:"https://hallofheroeshome.files.wordpress.com/2021/03/w3.jpg",15013:"https://hallofheroeshome.files.wordpress.com/2021/03/w4.jpg",15014:"https://hallofheroeshome.files.wordpress.com/2021/03/w5.jpg",15015:"https://hallofheroeshome.files.wordpress.com/2021/03/w6.jpg",15019:"https://hallofheroeshome.files.wordpress.com/2021/03/w10.jpg",15023:"https://hallofheroeshome.files.wordpress.com/2021/03/n2.jpg",15024:"https://hallofheroeshome.files.wordpress.com/2021/03/n3.jpg",15025:"https://hallofheroeshome.files.wordpress.com/2021/03/n4.jpg",15026:"https://hallofheroeshome.files.wordpress.com/2021/03/n5.jpg",15027:"https://hallofheroeshome.files.wordpress.com/2021/03/n6.jpg",15028:"https://hallofheroeshome.files.wordpress.com/2021/03/z1.jpg",15029:"https://hallofheroeshome.files.wordpress.com/2021/03/z2.jpg",15030:"https://hallofheroeshome.files.wordpress.com/2021/03/z3.jpg",15031:"https://hallofheroeshome.files.wordpress.com/2021/03/z4.jpg","16001a":"https://marvelcdb.com/bundles/cards/16001a.png","16001b":"https://marvelcdb.com/bundles/cards/16001b.png",16002:"https://hallofheroeshome.files.wordpress.com/2021/04/g1.jpg",16003:"https://hallofheroeshome.files.wordpress.com/2021/04/g3.jpg",16004:"https://hallofheroeshome.files.wordpress.com/2021/04/g5.jpg",16005:"https://hallofheroeshome.files.wordpress.com/2021/04/g7.jpg",16006:"https://hallofheroeshome.files.wordpress.com/2021/04/g10.jpg",16007:"https://hallofheroeshome.files.wordpress.com/2021/04/g11.jpg",16008:"https://hallofheroeshome.files.wordpress.com/2021/04/g12.jpg",16009:"https://hallofheroeshome.files.wordpress.com/2021/04/g13.jpg",16010:"https://hallofheroeshome.files.wordpress.com/2021/04/g14.jpg",16011:"https://hallofheroeshome.files.wordpress.com/2021/04/g15.jpg",16012:"https://hallofheroeshome.files.wordpress.com/2021/04/z1.jpg",16014:"https://hallofheroeshome.files.wordpress.com/2021/04/z3.jpg",16016:"https://hallofheroeshome.files.wordpress.com/2021/04/z5.jpg",16017:"https://hallofheroeshome.files.wordpress.com/2021/04/z6.jpg",16019:"https://hallofheroeshome.files.wordpress.com/2021/04/z8.jpg",16020:"https://hallofheroeshome.files.wordpress.com/2021/04/z9.jpg",16024:"https://hallofheroeshome.files.wordpress.com/2021/04/z13.jpg",16025:"https://hallofheroeshome.files.wordpress.com/2021/04/n1.jpg",16026:"https://hallofheroeshome.files.wordpress.com/2021/04/n2.jpg",16027:"https://hallofheroeshome.files.wordpress.com/2021/04/n3.jpg",16028:"https://hallofheroeshome.files.wordpress.com/2021/04/n4.jpg","16029a":"https://marvelcdb.com/bundles/cards/16029a.png","16029b":"https://hallofheroeshome.files.wordpress.com/2021/04/r0a.jpg",16030:"https://hallofheroeshome.files.wordpress.com/2021/04/r1.jpg",16031:"https://hallofheroeshome.files.wordpress.com/2021/04/r3.jpg",16032:"https://hallofheroeshome.files.wordpress.com/2021/04/r5.jpg",16033:"https://hallofheroeshome.files.wordpress.com/2021/04/r6.jpg",16034:"https://hallofheroeshome.files.wordpress.com/2021/04/r8.jpg",16035:"https://hallofheroeshome.files.wordpress.com/2021/04/r10.jpg",16036:"https://hallofheroeshome.files.wordpress.com/2021/04/r11.jpg",16037:"https://hallofheroeshome.files.wordpress.com/2021/04/r12.jpg",16038:"https://hallofheroeshome.files.wordpress.com/2021/04/r13.jpg",16039:"https://hallofheroeshome.files.wordpress.com/2021/04/r15.jpg",16040:"https://hallofheroeshome.files.wordpress.com/2021/04/z1-1.jpg",16043:"https://hallofheroeshome.files.wordpress.com/2021/04/z4-1.jpg",16045:"https://hallofheroeshome.files.wordpress.com/2021/04/z6-1.jpg",16046:"https://hallofheroeshome.files.wordpress.com/2021/04/z7-1.jpg",16047:"https://hallofheroeshome.files.wordpress.com/2021/04/z8-1.jpg",16048:"https://hallofheroeshome.files.wordpress.com/2021/04/z9-1.jpg",16052:"https://hallofheroeshome.files.wordpress.com/2021/04/z13-1.jpg",16053:"https://hallofheroeshome.files.wordpress.com/2021/04/n0.jpg",16054:"https://hallofheroeshome.files.wordpress.com/2021/04/n1-1.jpg",16055:"https://hallofheroeshome.files.wordpress.com/2021/04/n2-1.jpg",16056:"https://hallofheroeshome.files.wordpress.com/2021/04/n3-1.jpg",16057:"https://hallofheroeshome.files.wordpress.com/2021/04/n4-1.jpg",16058:"https://hallofheroeshome.files.wordpress.com/2021/04/d1.jpg",16059:"https://hallofheroeshome.files.wordpress.com/2021/04/d2.jpg",16060:"https://hallofheroeshome.files.wordpress.com/2021/04/d3.jpg",16061:"https://hallofheroeshome.files.wordpress.com/2021/04/d4a.jpg","16061_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2021/04/d4b.jpg",16062:"https://hallofheroeshome.files.wordpress.com/2021/04/d5a.jpg","16062_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2021/04/d5b.jpg",16063:"https://hallofheroeshome.files.wordpress.com/2021/04/d6.jpg",16064:"https://hallofheroeshome.files.wordpress.com/2021/04/d7.jpg",16065:"https://hallofheroeshome.files.wordpress.com/2021/04/d8.jpg",16066:"https://hallofheroeshome.files.wordpress.com/2021/04/d10.jpg",16067:"https://hallofheroeshome.files.wordpress.com/2021/04/d11.jpg",16068:"https://hallofheroeshome.files.wordpress.com/2021/04/d12.jpg",16069:"https://hallofheroeshome.files.wordpress.com/2021/04/d13.jpg",16117:"https://hallofheroeshome.files.wordpress.com/2021/04/bb1.jpg",16118:"https://hallofheroeshome.files.wordpress.com/2021/04/bb3.jpg",16119:"https://hallofheroeshome.files.wordpress.com/2021/04/bb6.jpg",16120:"https://hallofheroeshome.files.wordpress.com/2021/04/bb7.jpg",16121:"https://hallofheroeshome.files.wordpress.com/2021/04/bb9.jpg",16142:"https://hallofheroeshome.files.wordpress.com/2021/04/sc1.jpg",16143:"https://hallofheroeshome.files.wordpress.com/2021/04/sc2.jpg",16144:"https://hallofheroeshome.files.wordpress.com/2021/04/sc3.jpg",16145:"https://hallofheroeshome.files.wordpress.com/2021/04/sc4.jpg",16146:"https://hallofheroeshome.files.wordpress.com/2021/04/sc5.jpg",16147:"https://hallofheroeshome.files.wordpress.com/2021/04/sc6.jpg",16148:"https://hallofheroeshome.files.wordpress.com/2021/04/sc7.jpg","17001a":"https://marvelcdb.com/bundles/cards/17001a.png","17001b":"https://marvelcdb.com/bundles/cards/17001b.png",17002:"https://hallofheroeshome.files.wordpress.com/2021/05/1-1.jpg",17003:"https://hallofheroeshome.files.wordpress.com/2021/05/2-1.jpg",17004:"https://hallofheroeshome.files.wordpress.com/2021/05/5.jpg",17005:"https://hallofheroeshome.files.wordpress.com/2021/05/7.jpg",17006:"https://hallofheroeshome.files.wordpress.com/2021/05/10.jpg",17007:"https://hallofheroeshome.files.wordpress.com/2021/05/11.jpg",17008:"https://hallofheroeshome.files.wordpress.com/2021/05/13.jpg",17009:"https://hallofheroeshome.files.wordpress.com/2021/05/14.jpg",17010:"https://hallofheroeshome.files.wordpress.com/2021/05/15.jpg",17011:"https://hallofheroeshome.files.wordpress.com/2021/05/a1.jpg",17012:"https://hallofheroeshome.files.wordpress.com/2021/05/a2.jpg",17013:"https://hallofheroeshome.files.wordpress.com/2021/05/a3.jpg",17014:"https://hallofheroeshome.files.wordpress.com/2021/05/a4.jpg",17015:"https://hallofheroeshome.files.wordpress.com/2021/05/a5.jpg",17017:"https://hallofheroeshome.files.wordpress.com/2021/05/a7.jpg",17019:"https://hallofheroeshome.files.wordpress.com/2021/05/a9.jpg",17020:"https://hallofheroeshome.files.wordpress.com/2021/05/a10.jpg",17021:"https://hallofheroeshome.files.wordpress.com/2021/05/a11.jpg",17022:"https://hallofheroeshome.files.wordpress.com/2021/05/a12.jpg",17023:"https://hallofheroeshome.files.wordpress.com/2021/05/a13.jpg",17024:"https://hallofheroeshome.files.wordpress.com/2021/05/o0.jpg",17025:"https://hallofheroeshome.files.wordpress.com/2021/05/o1.jpg",17026:"https://hallofheroeshome.files.wordpress.com/2021/05/o2.jpg",17027:"https://hallofheroeshome.files.wordpress.com/2021/05/o3.jpg",17028:"https://hallofheroeshome.files.wordpress.com/2021/05/bb1.jpg",17029:"https://hallofheroeshome.files.wordpress.com/2021/05/bb2.jpg",17030:"https://hallofheroeshome.files.wordpress.com/2021/05/bb3.jpg","18001a":"https://marvelcdb.com/bundles/cards/18001a.png","18001b":"https://marvelcdb.com/bundles/cards/18001b.png",18002:"https://hallofheroeshome.files.wordpress.com/2021/05/g1-1.jpg",18003:"https://hallofheroeshome.files.wordpress.com/2021/05/g2-1.jpg",18004:"https://hallofheroeshome.files.wordpress.com/2021/05/g4-1.jpg",18005:"https://hallofheroeshome.files.wordpress.com/2021/05/g6-1.jpg",18006:"https://hallofheroeshome.files.wordpress.com/2021/05/g8-1.jpg",18007:"https://hallofheroeshome.files.wordpress.com/2021/05/g10-1.jpg",18008:"https://hallofheroeshome.files.wordpress.com/2021/05/g12-1.jpg",18009:"https://hallofheroeshome.files.wordpress.com/2021/05/g13-1.jpg",18010:"https://hallofheroeshome.files.wordpress.com/2021/05/g15-1.jpg",18011:"https://hallofheroeshome.files.wordpress.com/2021/05/z0.png",18012:"https://hallofheroeshome.files.wordpress.com/2021/05/c1.jpg",18013:"https://hallofheroeshome.files.wordpress.com/2021/05/d1.jpg",18015:"https://hallofheroeshome.files.wordpress.com/2021/05/f1.jpg",18016:"https://hallofheroeshome.files.wordpress.com/2021/05/i111.jpg",18018:"https://hallofheroeshome.files.wordpress.com/2021/05/aaa1.jpg",18019:"https://hallofheroeshome.files.wordpress.com/2021/05/gamora-spoilers-41024_1.jpg",18020:"https://hallofheroeshome.files.wordpress.com/2021/05/h1.jpg",18024:"https://hallofheroeshome.files.wordpress.com/2021/05/n1.jpg",18025:"https://hallofheroeshome.files.wordpress.com/2021/05/s1.jpg",18026:"https://hallofheroeshome.files.wordpress.com/2021/05/n3.jpg",18027:"https://hallofheroeshome.files.wordpress.com/2021/05/n4.jpg",18028:"https://hallofheroeshome.files.wordpress.com/2021/05/n5.jpg",18029:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz1.jpg",18030:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz2.jpg",18031:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz3.jpg","19001a":"https://marvelcdb.com/bundles/cards/19001a.png","19001b":"https://marvelcdb.com/bundles/cards/19001b.png",19002:"https://hallofheroeshome.files.wordpress.com/2021/06/d1.jpg",19003:"https://hallofheroeshome.files.wordpress.com/2021/06/d2.jpg",19004:"https://hallofheroeshome.files.wordpress.com/2021/06/d4.jpg",19005:"https://hallofheroeshome.files.wordpress.com/2021/06/d6.jpg",19006:"https://hallofheroeshome.files.wordpress.com/2021/06/d8.jpg",19007:"https://hallofheroeshome.files.wordpress.com/2021/06/d10.jpg",19008:"https://hallofheroeshome.files.wordpress.com/2021/06/d12.jpg",19009:"https://hallofheroeshome.files.wordpress.com/2021/06/d13.jpg",19010:"https://hallofheroeshome.files.wordpress.com/2021/06/d14.jpg",19011:"https://hallofheroeshome.files.wordpress.com/2021/06/d15.jpg",19012:"https://hallofheroeshome.files.wordpress.com/2021/06/z1.jpg",19013:"https://hallofheroeshome.files.wordpress.com/2021/06/z2.jpg",19015:"https://hallofheroeshome.files.wordpress.com/2021/06/z4.jpg",19016:"https://hallofheroeshome.files.wordpress.com/2021/06/z5.jpg",19017:"https://hallofheroeshome.files.wordpress.com/2021/06/z6.jpg",19018:"https://hallofheroeshome.files.wordpress.com/2021/06/z7.jpg",19020:"https://hallofheroeshome.files.wordpress.com/2021/06/z9.jpg",19025:"https://hallofheroeshome.files.wordpress.com/2021/06/n1.jpg",19026:"https://hallofheroeshome.files.wordpress.com/2021/06/n2.jpg",19027:"https://hallofheroeshome.files.wordpress.com/2021/06/n3.jpg",19028:"https://hallofheroeshome.files.wordpress.com/2021/06/n4.jpg",19029:"https://hallofheroeshome.files.wordpress.com/2021/06/n5.jpg",19030:"https://hallofheroeshome.files.wordpress.com/2021/06/zz1.jpg",19031:"https://hallofheroeshome.files.wordpress.com/2021/06/zz2.jpg",19032:"https://hallofheroeshome.files.wordpress.com/2021/06/zz3.jpg"},Po=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(e){var r;Object(go.a)(this,o),(r=t.call(this,e)).imgs=void 0,r.unmounted=void 0,r.unmounted=!0,r.imgs={};var a=at[r.props.currentGameType].modifiers,n={};return a.forEach((function(e){r.imgs[e.attributeId]=new Image,n[e.attributeId]=!1})),r.state={imagesLoaded:n},a.forEach((function(e){r.imgs[e.attributeId].onload=function(){if(!r.unmounted){var t=co()(r.state.imagesLoaded);t[e.attributeId]=!0,r.setState({imagesLoaded:t})}}})),a.forEach((function(e){var t;(null===(t=r.props.card)||void 0===t?void 0:t.modifiers[e.attributeId])&&(r.imgs[e.attributeId].src=e.icon)})),r}return Object(vo.a)(o,[{key:"componentDidUpdate",value:function(e,t){var o=this;at[this.props.currentGameType].modifiers.forEach((function(t){var r,a;o.state.imagesLoaded[t.attributeId]||(null===(r=e.card)||void 0===r?void 0:r.modifiers[t.attributeId])||!(null===(a=o.props.card)||void 0===a?void 0:a.modifiers[t.attributeId])||(o.imgs[t.attributeId].src=t.icon)}))}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e,t=this;if(!this.props.card)return null;if(!(null===(e=this.props.card)||void 0===e?void 0:e.modifiers))return null;var o=at[this.props.currentGameType].modifiers,a=[];return o.forEach((function(e){var o,n,s,i,d=t.props.isPreview?t.props.x+(t.props.cardWidth||0)/2-36-40:t.props.x+je/2-18,c=d+36-2,l=t.props.y-ye/2+10*(e.slot-1)+36*(e.slot-1),u=t.state.imagesLoaded[e.attributeId]&&!!(null===(o=t.props.card)||void 0===o?void 0:o.modifiers[e.attributeId]),h=t.imgs[e.attributeId],p=null===(n=t.props.card)||void 0===n?void 0:n.modifiers[e.attributeId],m=u?Object(r.jsx)(jo.c,{x:d,y:l,scale:{x:36/h.naturalWidth,y:36/h.naturalHeight},width:h.naturalWidth,height:h.naturalHeight,fillPatternImage:h},"".concat(null===(s=t.props.card)||void 0===s?void 0:s.id,"-").concat(e.attributeId,"-modifier-token")):null,f=u?Object(r.jsxs)(jo.a,{x:c,y:l,width:40,height:36,children:[Object(r.jsx)(jo.c,{width:40,height:36,fill:"white"}),Object(r.jsx)(jo.e,{width:40,height:36,text:"".concat(p&&p>0?"+":"").concat(null!==p&&void 0!==p?p:"?"),fill:"black",background:"white",align:"center",verticalAlign:"middle",fontSize:24})]},"".concat(null===(i=t.props.card)||void 0===i?void 0:i.id,"-").concat(e.attributeId,"-modifier-text")):null;m&&a.push(m),f&&a.push(f)})),a}}]),o}(a.Component),Io=Object(d.c)((function(e,t){return{card:Ve(e)[t.id]}}),{})(Po),Do=["main_scheme","side_scheme","quest","player_side_quest"],No=function(e,t){return e.length===t.length&&e.every((function(e,o){return e===t[o]}))},Ro=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(e){var a,n,s,i;Object(go.a)(this,o),(i=t.call(this,e)).imgs=[],i.stunnedImg=void 0,i.confusedImg=void 0,i.toughImg=void 0,i.unmounted=void 0,i.touchTimer=null,i.rect=null,i.shuffleToggle=!1,i.initCardImages=function(e){i.imgs=e.imgUrls.map((function(){return new Image})),i.imgs.forEach((function(e){return e.onload=function(){i.unmounted||i.setState({imageLoaded:!0})}})),i.imgs.forEach((function(e){return e.onerror=function(){i.unmounted||i.setState({imageLoadFailed:i.state.imageLoadFailed+1})}})),e.imgUrls.forEach((function(e,t){return i.imgs[t].src=e}))},i.getStrokeColor=function(){return i.props.dropTargetColor?i.props.dropTargetColor:i.props.selected?i.props.selectedColor:""},i.renderUnanimatedCard=function(e,t,o){var a,n,s,d=o?i.imgs.find((function(e){return e.complete&&0!==e.naturalHeight})):void 0,c=i.getScale(d,t,e),l={x:t/2,y:e/2},u=Object(r.jsx)(So.Spring,{to:{rotation:i.props.exhausted?90:0},children:function(a){return Object(r.jsx)(So.animated.Rect,Object(D.a)(Object(D.a)({},a),{},{ref:function(e){e&&(i.rect=e)},cornerRadius:9,x:i.props.x,y:i.props.y,width:t,height:e,offset:l,stroke:i.getStrokeColor(),strokeWidth:i.getStrokeColor()?4:0,fillPatternRotation:!o||i.shouldRenderImageHorizontal(i.props.code,i.props.typeCode||"",Do)?270:0,fillPatternImage:d,fillPatternScaleX:c.width,fillPatternScaleY:c.height,fill:o?void 0:"gray",shadowForStrokeEnabled:!1,hitStrokeWidth:0,opacity:i.props.isGhost?.5:1,draggable:""===i.props.controlledBy||i.props.controlledBy===C,onDragStart:i.handleDragStart,onDragMove:i.handleDragMove,onDragEnd:i.handleDragEnd,onDblClick:i.handleDoubleClick,onDblTap:i.handleDoubleTap,onClick:i.handleClick,onTap:i.handleTap,onMouseDown:i.handleMouseDown,onTouchStart:i.handleTouchStart,onTouchMove:i.handleTouchMove,onTouchEnd:i.handleTouchEnd,onMouseOver:i.handleMouseOver,onMouseOut:i.handleMouseOut,onContextMenu:i.handleContextMenu}))}},"".concat(i.props.id,"-card")),h={x:l.x+4,y:l.y-4},p=(i.props.numCardsInStack||1)>1?Object(r.jsx)(So.Spring,{to:{rotation:i.props.exhausted?90:0},children:function(o){return Object(r.jsx)(So.animated.Rect,Object(D.a)(Object(D.a)({},o),{},{cornerRadius:[9,9,9,9],x:i.props.x,y:i.props.y,width:t,height:e,offset:h,opacity:i.props.isGhost?.5:1,fill:"gray",shadowForStrokeEnabled:!1,hitStrokeWidth:0}))}},"".concat(i.props.id,"-cardStack")):null,m=!!(null===(a=i.props.cardState)||void 0===a?void 0:a.stunned)&&i.state.tokenImagesLoaded.stunned,f=i.getTokenInSlot(m,i.stunnedImg,l,0),g=i.getTokenInSlot(!!(null===(n=i.props.cardState)||void 0===n?void 0:n.confused)&&i.state.tokenImagesLoaded.confused,i.confusedImg,l,1),v=i.getTokenInSlot(!!(null===(s=i.props.cardState)||void 0===s?void 0:s.tough)&&i.state.tokenImagesLoaded.tough,i.toughImg,l,2),T=i.props.dragging||i.props.isGhost?null:Object(r.jsx)(Oo,{currentGameType:i.props.currentGameType,id:i.props.id,x:i.props.x,y:i.props.y},"".concat(i.props.id,"-cardTokens")),b=i.props.dragging||i.props.isGhost?null:Object(r.jsx)(Io,{currentGameType:i.props.currentGameType,id:i.props.id,x:i.props.x,y:i.props.y,cardHeight:i.props.height,cardWidth:i.props.width,isPreview:!!i.props.isPreview},"".concat(i.props.id,"-cardModifiers"));return[p,u,i.renderCardName(l,t,e),f,g,v,T,b]},i.handleContextMenu=function(e){i.props.handleContextMenu&&i.props.handleContextMenu(i.props.id,e)},i.handleDoubleClick=function(e){i.props.handleDoubleClick&&i.props.handleDoubleClick(i.props.id,e)},i.handleDoubleTap=function(e){i.props.handleDoubleTap&&i.props.handleDoubleTap(i.props.id,e)},i.handleDragStart=function(e){i.props.handleDragStart&&i.props.handleDragStart(i.props.id,e)},i.handleDragMove=function(e){i.props.handleDragMove&&i.props.handleDragMove({id:i.props.id,dx:e.target.x()-i.props.x,dy:e.target.y()-i.props.y})},i.handleDragEnd=function(){i.props.handleDragEnd&&i.props.dragging&&i.props.handleDragEnd(i.props.id)},i.handleTap=function(e){i.handleTapOrClick(e,!0)},i.handleClick=function(e){i.handleTapOrClick(e,!1)},i.handleTapOrClick=function(e,t){i.props.handleClick&&(i.props.handleClick(i.props.id,e,t),e.cancelBubble=!0)},i.handleMouseDown=function(e){e.cancelBubble=!0},i.handleTouchStart=function(e){e.cancelBubble=!0,i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout((function(){i.handleContextMenu(e)}),750)},i.handleTouchMove=function(e){i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null)},i.handleTouchEnd=function(e){i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null)},i.handleMouseOver=function(){i.props.handleHover&&i.props.handleHover(i.props.id)},i.handleMouseOut=function(){i.props.handleHoverLeave&&i.props.handleHoverLeave(i.props.id)},i.unmounted=!0,i.state={imageLoaded:!1,imageLoadFailed:0,prevImgUrls:i.props.imgUrls,tokenImagesLoaded:{stunned:!1,confused:!1,tough:!1}},i.initCardImages(e),i.stunnedImg=new Image,i.confusedImg=new Image,i.toughImg=new Image,i.stunnedImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:!0,confused:i.state.tokenImagesLoaded.confused,tough:i.state.tokenImagesLoaded.tough}})};var d=at[e.currentGameType].tokens;return(null===(a=e.cardState)||void 0===a?void 0:a.stunned)&&d.stunned&&(i.stunnedImg.src=d.stunned.imagePath),i.confusedImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:i.state.tokenImagesLoaded.stunned,confused:!0,tough:i.state.tokenImagesLoaded.tough}})},(null===(n=e.cardState)||void 0===n?void 0:n.confused)&&d.confused&&(i.confusedImg.src=d.confused.imagePath),i.toughImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:i.state.tokenImagesLoaded.stunned,confused:i.state.tokenImagesLoaded.confused,tough:!0}})},(null===(s=e.cardState)||void 0===s?void 0:s.tough)&&d.tough&&(i.toughImg.src=d.tough.imagePath),i}return Object(vo.a)(o,null,[{key:"getDerivedStateFromProps",value:function(e,t){var o;return No(e.imgUrls,null!==(o=t.prevImgUrls)&&void 0!==o?o:[])?null:{imageLoaded:!1,imageLoadFailed:0,prevImgUrls:e.imgUrls,tokenImagesLoaded:{stunned:t.tokenImagesLoaded.stunned,confused:t.tokenImagesLoaded.confused,tough:t.tokenImagesLoaded.tough}}}}]),Object(vo.a)(o,[{key:"componentDidUpdate",value:function(e,t){var o,r,a,n,s,i;!e.shuffling&&this.props.shuffling&&this.rect&&(this.shuffleToggle=!this.shuffleToggle,this.rect.to({rotation:this.currentRotation+(this.shuffleToggle?360:-360),duration:.2})),this.state.imageLoaded||No(e.imgUrls,this.props.imgUrls)||(this.setState({imageLoaded:!1,imageLoadFailed:0}),this.initCardImages(this.props));var d=at[this.props.currentGameType].tokens;!this.state.tokenImagesLoaded.stunned&&!(null===(o=e.cardState)||void 0===o?void 0:o.stunned)&&(null===(r=this.props.cardState)||void 0===r?void 0:r.stunned)&&d.stunned&&(this.stunnedImg.src=d.stunned.imagePath),!this.state.tokenImagesLoaded.confused&&!(null===(a=e.cardState)||void 0===a?void 0:a.confused)&&(null===(n=this.props.cardState)||void 0===n?void 0:n.confused)&&d.confused&&(this.confusedImg.src=d.confused.imagePath),!this.state.tokenImagesLoaded.tough&&!(null===(s=e.cardState)||void 0===s?void 0:s.tough)&&(null===(i=this.props.cardState)||void 0===i?void 0:i.tough)&&d.tough&&(this.toughImg.src=d.tough.imagePath)}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return this.renderCard(this.state.imageLoaded)}},{key:"renderCard",value:function(e){var t=this.props.height||ye,o=this.props.width||je;return this.renderUnanimatedCard(t,o,e)}},{key:"renderCardName",value:function(e,t,o){var a={x:e.x-10,y:e.y-20};return this.state.imageLoadFailed===this.props.imgUrls.length&&0!==this.state.imageLoadFailed?Object(r.jsx)(jo.e,{offset:a,x:this.props.x,y:this.props.y,width:t-10,height:o-20,fontSize:24,text:"".concat(this.props.name," ").concat(this.props.code),draggable:""===this.props.controlledBy||this.props.controlledBy===C,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,onDblClick:this.handleDoubleClick,onDblTap:this.handleDoubleClick,onClick:this.handleClick,onTap:this.handleClick,onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onContextMenu:this.handleContextMenu},"".concat(this.props.id,"-cardnametext")):null}},{key:"getTokenInSlot",value:function(e,t,o,a){var n={width:t.naturalWidth/2,height:t.naturalHeight/2},s={x:o.x-je+n.width/2,y:o.y-n.height*a-5*(a+1)-10};return e?Object(r.jsx)(jo.c,{native:!0,cornerRadius:8,x:this.props.x,y:this.props.y,width:n.width,height:n.height,fillPatternScaleX:.5,fillPatternScaleY:.5,offset:s,fillPatternImage:t},"".concat(this.props.id,"-status").concat(a)):null}},{key:"shouldRenderImageHorizontal",value:function(e,t,o){return o.includes(t.toLocaleLowerCase())&&!this.plainCardBack&&!_o[e]}},{key:"getScale",value:function(e,t,o){var r=e?t/e.naturalWidth:t,a=e?o/e.naturalWidth:t,n=e?o/e.naturalHeight:o,s=e?t/e.naturalHeight:o;return this.shouldRenderImageHorizontal(this.props.code,this.props.typeCode||"",Do)?{width:a,height:s}:{width:r,height:n}}},{key:"plainCardBack",get:function(){return this.props.imgUrls.some((function(e){return e.includes("standard")}))&&this.props.imgUrls.some((function(e){return e.includes("_back")}))}},{key:"currentRotation",get:function(){return this.props.exhausted?90:0}}]),o}(a.Component),Eo=o(289),Ao=o(295),Lo=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(e){var r;return Object(go.a)(this,o),(r=t.call(this,e)).cardsDataInStack=[],r.handleHighlightChange=function(e,t,o){t?r.props.preview(t.code):r.props.clearPreview()},r.handleSelected=function(e,t){r.props.clearPreview(),t&&r.props.cardSelected&&r.props.cardSelected(t.code)},r.cancelBubble=function(e){e.stopPropagation()},r.cardsDataInStack=e.card.cardStack.map((function(e){return r.props.cardsDataEntities[e.jsonId]})),r}return Object(vo.a)(o,[{key:"componentWillUnmount",value:function(){this.props.clearPreview()}},{key:"render",value:function(){return Object(r.jsx)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:Object(r.jsx)(Eo.a,{id:"cardstack-card-selector-combobox",options:this.cardsDataInStack,getOptionLabel:function(e){return e.name},style:{width:300},onChange:this.handleSelected,onHighlightChange:this.handleHighlightChange,renderInput:function(e){return Object(r.jsx)(Ao.a,Object(D.a)(Object(D.a)({},e),{},{label:"Find Card...",variant:"outlined"}))}})})}}]),o}(a.Component),Fo=Object(d.c)((function(e){return{cardsDataEntities:Le(e)}}),{preview:J,clearPreview:q})(Lo),Bo=o(169),Go=o(293),Qo=o(170),Wo=function(e){var t=n.a.useRef(null);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Go.a,{onClick:function(e){if(null===t||void 0===t?void 0:t.current){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!1),t.current.dispatchEvent(o)}e.stopPropagation()},children:e.label}),Object(r.jsx)("input",{type:"file",ref:t,onChange:function(t){if(t.target.files&&t.target.files.length>0){var o=t.target.files[0];e.handleFile(o)}},style:{display:"none"}})]})},Ho=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(e){var a;return Object(go.a)(this,o),(a=t.call(this,e)).nestedRef=void 0,a.renderMenuItem=function(e,t){return e.children?Object(r.jsx)(Qo.a,{ref:function(e){a.nestedRef=e},parentMenuOpen:a.state.menuOpen,label:e.label,onClick:function(e){a.nestedRef&&(e.stopPropagation(),a.nestedRef.parentElement.focus())},children:e.children.map((function(e,o){return a.renderMenuItem(e,1e3*t+o)}))},"contextMenu-item-".concat(t)):e.fileUploader?Object(r.jsx)(Wo,{label:e.label,handleFile:function(t){var o=new FileReader;o.readAsText(t,"UTF-8"),o.onload=function(t){var o,r=null===(o=t.target)||void 0===o?void 0:o.result;e.fileLoadedAction&&e.fileLoadedAction(r),a.props.hideContextMenu()}}},"contextMenu-item-".concat(t)):Object(r.jsx)(Go.a,{onClick:a.handleContextItemClicked(e),children:e.label},"contextMenu-item-".concat(t))},a.handleMenuClosed=function(){a.setState({menuOpen:!1}),a.props.hideContextMenu()},a.preventDefault=function(e){e.preventDefault()},a.handleContextItemClicked=function(e){return function(){e.action&&e.action(),a.props.contextItemClicked&&a.props.contextItemClicked(a.props.items[0]),e.action&&(a.nestedRef&&a.nestedRef.blur(),a.props.hideContextMenu())}},a.state={menuOpen:!0},a}return Object(vo.a)(o,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{id:"context-menu-layer",onContextMenu:this.preventDefault,onClick:function(t){var o;(null===(o=t.target)||void 0===o?void 0:o.files)||e.props.hideContextMenu()},children:Object(r.jsx)(Bo.a,{keepMounted:!0,open:this.state.menuOpen,onClose:this.handleMenuClosed,anchorReference:"anchorPosition",anchorPosition:{top:this.props.position.y+8,left:this.props.position.x+8},children:this.props.items.map((function(t,o){return e.renderMenuItem(t,o)}))})})}}]),o}(a.Component),Uo=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(){var e;Object(go.a)(this,o);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).touchTimer=null,e.cancelBubble=function(e){e.cancelBubble=!0},e.handleDecrement=function(){e.props.updateCounterValueBy(-1)},e.handleIncrement=function(){e.props.updateCounterValueBy(1)},e.handleTouchStart=function(t){t.cancelBubble=!0,e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout((function(){e.props.handleContextMenu(t)}),750)},e.handleTouchMove=function(t){e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null)},e.handleTouchEnd=function(t){e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null)},e}return Object(vo.a)(o,[{key:"render",value:function(){return Object(r.jsxs)(jo.a,{x:this.props.pos.x,y:this.props.pos.y,draggable:!0,onClick:this.cancelBubble,onContextMenu:this.props.handleContextMenu,onDragEnd:this.props.onDragEnd,onTouchStart:this.handleTouchStart,onMouseDown:this.cancelBubble,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,children:[Object(r.jsx)(jo.c,{cornerRadius:30,width:200,height:100,fill:this.props.color}),Object(r.jsx)(jo.e,{width:200,height:100,fontSize:36,text:"".concat(this.props.value),align:"center",verticalAlign:"middle"}),Object(r.jsx)(jo.e,{x:10,y:25,width:50,height:50,fontSize:36,text:"-",align:"center",verticalAlign:"middle",onClick:this.handleDecrement,onTap:this.handleDecrement}),Object(r.jsx)(jo.e,{x:140,y:25,width:50,height:50,fontSize:36,text:"+",align:"center",verticalAlign:"middle",onClick:this.handleIncrement,onTap:this.handleIncrement})]})}}]),o}(a.Component),zo=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(){var e;Object(go.a)(this,o);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).inputValue="",e.focusInputField=function(e){e&&setTimeout((function(){e.querySelector("input").focus()}),100)},e.cancelBubble=function(e){e.stopPropagation()},e.handleKeyPress=function(t){"enter"===t.key.toLocaleLowerCase()&&e.props.loadDeckId(+e.inputValue)},e}return Object(vo.a)(o,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,className:"token-field-row",children:[Object(r.jsx)(Ao.a,{ref:this.focusInputField,onKeyPress:this.handleKeyPress,onClick:this.cancelBubble,onChange:function(t){e.inputValue=t.target.value},type:"number",variant:"outlined"})," "]})}}]),o}(a.Component),Vo=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(){var e;Object(go.a)(this,o);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).handleSelected=function(t,o){if(o){var r=[],a=[],n=o.cards.filter((function(e){return!o.cards.some((function(t){return t.backLink===e.code}))}));n.filter((function(e){return"quest"===e.typeCode.toLocaleLowerCase()})).forEach((function(e){r=r.concat(Array.from({length:e.quantity}).map((function(t){return e.code})))})),n.filter((function(e){return"quest"!==e.typeCode.toLocaleLowerCase()})).forEach((function(e){a=a.concat(Array.from({length:e.quantity}).map((function(t){return e.code})))}));var s=[a];r.length>0&&(s=[r].concat(s)),e.props.loadCards(s)}},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(vo.a)(o,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:Object(r.jsx)(Eo.a,{id:"encounter-loader-combobox",options:this.props.encounterData||[],getOptionLabel:function(e){return e.setData.name},style:{width:300},onChange:this.handleSelected,renderInput:function(t){return Object(r.jsx)(Ao.a,Object(D.a)(Object(D.a)({},t),{},{label:at[e.props.currentGameType].encounterUiName,variant:"outlined"}))}})})}}]),o}(a.Component),Ko=Object(d.c)((function(e,t){return{encounterData:t.currentGameType===u.LordOfTheRingsLivingCardGame?He(e):Ue(e)}}),{})(Vo),Jo=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(e){var r;return Object(go.a)(this,o),(r=t.call(this,e)).cancelBubble=function(e){e.cancelBubble=!0},r.handleDragEnd=function(e){r.props.updatePos({x:e.target.x(),y:e.target.y()})},r.state={img:null},r}return Object(vo.a)(o,[{key:"componentDidMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({img:t})},t.src="/card-game-playground/images/table/first_player_token_"+this.props.currentGameType+".png"}},{key:"render",value:function(){var e,t,o,a,n,s,i,d,c;return Object(r.jsx)(jo.c,{x:this.props.pos.x,y:this.props.pos.y,draggable:!0,onTouchStart:this.cancelBubble,onMouseDown:this.cancelBubble,onDragEnd:this.handleDragEnd,scale:{x:160/(null!==(e=null===(t=this.state.img)||void 0===t?void 0:t.naturalWidth)&&void 0!==e?e:1),y:160/(null!==(o=null===(a=this.state.img)||void 0===a?void 0:a.naturalWidth)&&void 0!==o?o:1)},width:null!==(n=null===(s=this.state.img)||void 0===s?void 0:s.naturalWidth)&&void 0!==n?n:0,height:null!==(i=null===(d=this.state.img)||void 0===d?void 0:d.naturalHeight)&&void 0!==i?i:0,fillPatternImage:null!==(c=this.state.img)&&void 0!==c?c:void 0})}}]),o}(a.Component),qo=function(e){return e.liveState.present.counters},Zo=Object(Re.a)(qo,(function(e){return e.counters})),Yo=Object(Re.a)(qo,(function(e){return e.firstPlayerCounterPosition})),Xo=Object(d.c)((function(e){return{pos:Yo(e)}}),{updatePos:$t})(Jo),$o=(o(242),function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(){var e;Object(go.a)(this,o);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).inputRef=null,e.connect=function(t){var o,r;console.log("connecting with peer id "+(null===(o=e.inputRef)||void 0===o?void 0:o.value)),e.props.connect((null===(r=e.inputRef)||void 0===r?void 0:r.value)||"")},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(vo.a)(o,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:[Object(r.jsx)("input",{ref:function(t){t&&(e.inputRef=t)}}),Object(r.jsx)("button",{onClick:this.connect,children:"Connect"})]})}}]),o}(a.Component)),er=function(e){return e.game},tr=(Object(Re.a)(er,(function(e){return e.stageZoom})),Object(Re.a)(er,(function(e){return e.playerColors}))),or=Object(Re.a)(er,(function(e){return e.peerId})),rr=Object(Re.a)(er,(function(e){return e.activeGameType})),ar=Object(Re.a)(er,(function(e){return e.radialMenuPosition})),nr=(Object(Re.a)(er,(function(e){return e.previewCard})),Object(Re.a)(er,(function(e){return e.menuPreviewCardJsonId?{id:"menu-preview-card",controlledBy:"",exhausted:!1,faceup:!0,fill:"gray",x:0,y:0,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},selected:!1,dragging:!1,shuffling:!1,cardStack:[{jsonId:e.menuPreviewCardJsonId}],modifiers:{}}:null}))),sr=(o(243),function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(){var e;Object(go.a)(this,o);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(t){t.stopPropagation(),e.props.completed()},e.preventDefault=function(e){e.preventDefault()},e}return Object(vo.a)(o,[{key:"render",value:function(){var e=this.props.offsetContent?8:0,t={top:"".concat(this.props.position.y+e,"px"),left:"".concat(this.props.position.x+e,"px")};return this.props.trasparentBackground||(t.backgroundColor="white"),Object(r.jsx)("div",{id:"top-layer",onClick:this.props.completed,onContextMenu:this.preventDefault,children:Object(r.jsx)("div",{className:"top-layer-content-wrapper",style:t,onContextMenu:this.preventDefault,onClick:this.handleClick,children:this.props.children})})}}]),o}(a.Component)),ir=function(e,t){return t.length>0&&t.some((function(t){return t.statusTokens[e]}))},dr=function(e){return e.filter((function(e){return e.selected&&e.controlledBy===C}))},cr=o(244),lr=cr.default,ur=cr.Slice;!function(e){e.TopLevelActions="toplevelactions",e.StatusTokenActions="statustokenactions",e.CounterTokenActions="countertokenactions",e.ModifierActions="modifieractions",e.DrawActions="drawactions",e.DrawNumber="drawnumber",e.ModifierNumber="modifiernumber"}(mo||(mo={})),function(e){e.FaceUp="faceup",e.FaceDown="facedown"}(fo||(fo={}));var hr=function(e,t,o,r,a,n,s){var i=null,d=null;switch(e){case mo.StatusTokenActions:i=fr(s),d=mo.TopLevelActions;break;case mo.CounterTokenActions:i=gr(s),d=mo.TopLevelActions;break;case mo.DrawActions:i=vr(s,t,r),d=mo.TopLevelActions;break;case mo.DrawNumber:i=Tr(s,o),d=mo.DrawActions;break;case mo.ModifierActions:i=Cr(s,t,n),d=mo.TopLevelActions;break;case mo.ModifierNumber:i=br(s,a),d=mo.ModifierActions;break;case mo.TopLevelActions:default:i=mr(s,t)}return d&&(i=pr(i,d,t)),i},pr=function(e,t,o){return e?[Object(r.jsx)(ur,{onSelect:function(){o(t)},children:"Back"},"back-slice")].concat(e):null},mr=function(e,t){if(!e.currentGameType)return null;var o=at[e.currentGameType].modifiers,a=[Object(r.jsx)(ur,{onSelect:function(){e.flipCards()},children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:"Flip"})})},"flip-slice"),Object(r.jsx)(ur,{onSelect:function(){e.exhaustCard()},children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:"Exhaust"})})},"exhaust-slice"),Object(r.jsx)(ur,{onSelect:function(){e.shuffleStack()},children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:"Shuffle"})})},"shuffle-slice"),Object(r.jsx)(ur,{onSelect:function(){t(mo.StatusTokenActions)},children:Object(r.jsx)("div",{children:"Statuses"})},"statuses-slice"),Object(r.jsx)(ur,{onSelect:function(){t(mo.CounterTokenActions)},children:Object(r.jsx)("div",{children:"Tokens"})},"tokens-slice"),Object(r.jsx)(ur,{onSelect:function(){e.clearCardTokens()},children:Object(r.jsx)("div",{children:"Clear"})},"clear-slice"),Object(r.jsx)(ur,{onSelect:function(){t(mo.DrawActions)},children:Object(r.jsx)("div",{children:"Draw"})},"draw-menu-slice")];return o.length>0&&a.push(Object(r.jsx)(ur,{onSelect:function(){t(mo.ModifierActions)},children:Object(r.jsx)("div",{children:"Modifiers"})},"modifiers-menu-slice")),a},fr=function(e){if(!e.currentGameType)return[Object(r.jsx)(ur,{}),Object(r.jsx)(ur,{}),Object(r.jsx)(ur,{})];for(var t=Object.values(at[e.currentGameType].tokens).filter((function(e){return!!e&&!e.isNumeric})).map((function(t){var o="touch-menu-slice-".concat(t.menuText.replace(/\s/g,"").toLocaleLowerCase());return Object(r.jsx)(ur,{onSelect:function(){e.toggleToken({tokenType:t.tokenType,value:!ir(t.tokenType,e.selectedCardStacks)})},children:Object(r.jsxs)("div",{children:[t.touchMenuIcon?t.touchMenuIcon:null,Object(r.jsx)("div",{children:t.menuText})]})},o)}));t.length<3;)t=t.concat([Object(r.jsx)(ur,{},"extra-slice-".concat(Math.random()))]);return t},gr=function(e){if(!e.currentGameType)return[Object(r.jsx)(ur,{}),Object(r.jsx)(ur,{}),Object(r.jsx)(ur,{})];for(var t=Object.values(at[e.currentGameType].tokens).filter((function(e){return!!e&&e.isNumeric})).flatMap((function(e){return[Object(D.a)(Object(D.a)({},e),{},{touchMenuLetter:"".concat(e.touchMenuLetter," +")}),Object(D.a)(Object(D.a)({},e),{},{touchMenuLetter:"".concat(e.touchMenuLetter," -")})]})).map((function(t){var o,a="touch-menu-slice-".concat(t.menuText.replace(/\s/g,"").toLocaleLowerCase());return a+=-1!==(null===(o=t.touchMenuLetter)||void 0===o?void 0:o.indexOf("+"))?"-plus":"",Object(r.jsx)(ur,{onSelect:function(){var o;e.adjustCounterToken({tokenType:t.counterTokenType,delta:-1!==(null===(o=t.touchMenuLetter)||void 0===o?void 0:o.indexOf("+"))?1:-1})},children:Object(r.jsxs)("div",{children:[t.touchMenuIcon?t.touchMenuIcon:null,Object(r.jsx)("div",{children:t.touchMenuLetter})]})},a)}));t.length<3;)t=t.concat([Object(r.jsx)(ur,{},"extra-slice-".concat(Math.random()))]);return t},vr=function(e,t,o){return[Object(r.jsx)(ur,{onSelect:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:1,facedown:!1})},children:"1 faceup"},"draw-one-faceup-slice"),Object(r.jsx)(ur,{onSelect:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:1,facedown:!0})},children:"1 facedown"},"draw-one-facedown-slice"),Object(r.jsx)(ur,{onSelect:function(){o(fo.FaceUp),t(mo.DrawNumber)},children:"X faceup"},"draw-x-faceup-slice"),Object(r.jsx)(ur,{onSelect:function(){o(fo.FaceDown),t(mo.DrawNumber)},children:"X facedown"},"draw-x-facedown-slice")]},Tr=function(e,t){return Array.from({length:10},(function(e,t){return t+1})).map((function(o){return Object(r.jsx)(ur,{onSelect:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:o,facedown:t===fo.FaceDown})},children:o},"draw-".concat(o,"-cards-slice"))}))},Cr=function(e,t,o){return e.currentGameType?at[e.currentGameType].modifiers.map((function(e){return Object(r.jsx)(ur,{onSelect:function(){o(e.attributeId),t(mo.ModifierNumber)},children:e.attributeName},"modifier-slice")})):null},br=function(e,t){return[Object(r.jsx)(ur,{onSelect:function(){e.adjustModifier({modifierId:t,delta:1})},children:"Add 1"},"modifier-plus-one-slice"),Object(r.jsx)(ur,{onSelect:function(){e.adjustModifier({modifierId:t,delta:-1})},children:"Remove 1"},"modifier-minus-one-slice"),Object(r.jsx)(ur,{onSelect:function(){e.adjustModifier({modifierId:t,value:0})},children:"0"},"modifier-zero-slice")].concat(Array.from({length:3},(function(e,t){return t+1})).map((function(o){return Object(r.jsx)(ur,{onSelect:function(){e.adjustModifier({modifierId:t,value:o})},children:o},"modifier-pos-".concat(o,"-cards-slice"))}))).concat(Array.from({length:3},(function(e,t){return t+1})).map((function(o){return Object(r.jsx)(ur,{onSelect:function(){e.adjustModifier({modifierId:t,value:-1*o})},children:-1*o},"modifier-neg-".concat(o,"-cards-slice"))})))},yr=function(e){var t=Object(a.useState)(mo.TopLevelActions),o=Object(j.a)(t,2),n=o[0],s=o[1],i=Object(a.useState)(fo.FaceDown),d=Object(j.a)(i,2),c=d[0],l=d[1],u=Object(a.useState)(""),h=Object(j.a)(u,2),p=h[0],m=h[1];return e.position||n===mo.TopLevelActions||s(mo.TopLevelActions),e.position?Object(r.jsx)(sr,{trasparentBackground:!0,offsetContent:!1,position:{x:Math.max(e.position.x-128,0),y:Math.max(e.position.y-128,0)},completed:function(){e.hideRadialMenu()},children:Object(r.jsx)("div",{onClick:function(e){e.stopPropagation(),e.preventDefault()},children:Object(r.jsx)(lr,{radius:"156px",centerRadius:"30px",children:hr(n,s,c,l,p,m,e)})})}):null},jr=Object(d.c)((function(e){return{selectedCardStacks:(t=C,Object(Re.a)(ze,(function(e){return e.cards.filter((function(e){return e.selected&&e.controlledBy===t}))})))(e),currentGameType:er(e).activeGameType,position:ar(e)};var t}),{flipCards:Lt,exhaustCard:Pt,toggleToken:Ft,shuffleStack:nt,adjustCounterToken:Bt,hideRadialMenu:$,clearCardTokens:Gt,drawCardsOutOfCardStack:st,adjustModifier:Qt})(yr),Sr=o(287),kr=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(){var e;Object(go.a)(this,o);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).inputValue="0",e.focusInputField=function(e){e&&setTimeout((function(){e.querySelector("input").focus()}),100)},e.handleKeyPress=function(t){"enter"===t.key.toLocaleLowerCase()&&e.complete(+e.inputValue)},e.handleClick=function(t){e.complete(+e.inputValue)},e.complete=function(t){e.props.updated({id:e.props.id,tokenType:e.props.tokenType,value:t})},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(vo.a)(o,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,className:"token-field-row",children:[Object(r.jsx)(Ao.a,{ref:this.focusInputField,onKeyPress:this.handleKeyPress,variant:"outlined",type:"number",onChange:function(t){e.inputValue=t.target.value}}),Object(r.jsx)(Sr.a,{onClick:this.handleClick,style:{height:"56px",marginLeft:"5px"},variant:"outlined",color:"primary",children:"Set"})]})}}]),o}(a.Component),wr=o(283),xr=(o(248),o(164)),Or=o.n(xr),_r=o(165),Mr=o.n(_r),Pr=o(166),Ir=o.n(Pr),Dr=o(167),Nr=o.n(Dr),Rr=o(168),Er=o.n(Rr),Ar=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(){return Object(go.a)(this,o),t.apply(this,arguments)}return Object(vo.a)(o,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"touch-menu",children:[Object(r.jsx)(wr.a,{className:this.props.panMode?"toggle-on":"",onClick:function(){e.props.togglePanMode()},children:Object(r.jsx)(Or.a,{fontSize:"large"})}),Object(r.jsx)(wr.a,{className:this.props.multiselectMode?"toggle-on":"",onClick:function(){e.props.toggleMultiselectMode()},children:Object(r.jsx)(Mr.a,{fontSize:"large"})}),Object(r.jsx)(wr.a,{onClick:function(){e.props.anyCardsSelected&&e.props.showRadialMenuAtPosition({x:0,y:0})},children:Object(r.jsx)(Ir.a,{fontSize:"large"})}),Object(r.jsx)(wr.a,{onClick:function(){e.props.undo&&e.props.undo()},children:Object(r.jsx)(Nr.a,{fontSize:"large"})}),Object(r.jsx)(wr.a,{onClick:function(){e.props.redo&&e.props.redo()},children:Object(r.jsx)(Er.a,{fontSize:"large"})})]})}}]),o}(a.Component),Lr=Object(d.c)((function(e){return{anyCardsSelected:(t=C,Object(Re.a)(ze,(function(e){return e.cards.some((function(e){return e.selected&&e.controlledBy===t}))})))(e),currentGameType:er(e).activeGameType,panMode:Ke(e),multiselectMode:Je(e)};var t}),{togglePanMode:Et,toggleMultiselectMode:At,flipCards:Lt,exhaustCard:Pt,toggleToken:Ft,shuffleStack:nt,adjustCounterToken:Bt,showRadialMenuAtPosition:X,undo:g.ActionCreators.undo,redo:g.ActionCreators.redo})(Ar),Fr=function(e){navigator.clipboard.writeText(e)},Br=function(e){Object(To.a)(o,e);var t=Object(Co.a)(o);function o(e){var a;return Object(go.a)(this,o),(a=t.call(this,e)).stage=null,a.touchTimer=null,a.doubleTapTimer=null,a.lastCenter=null,a.lastDist=0,a.componentWillUnmount=function(){window.removeEventListener("resize",a.handleResize)},a.handleCounterValueUpdate=function(e){return function(t){a.props.updateCounterValue({id:e,delta:t})}},a.handleCounterDrag=function(e){return function(t){a.props.moveCounter({id:e,newPos:{x:t.target.x(),y:t.target.y()}})}},a.noOp=function(){},a.renderEmptyMessage=function(){return a.props.cards.cards.length>0?null:Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["Right click and select 'Load Deck ID' to load a deck from"," ",at[a.props.currentGameType].deckSite]})})},a.renderContextMenu=function(){var e;if(!a.state.showContextMenu)return null;var t=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=a.state.contextMenuPosition;if(!t||!o)throw new Error("Problem computing context menu position");return Object(r.jsx)(Ho,{position:{x:t.left+o.x,y:t.top+o.y},items:a.state.contextMenuItems,hideContextMenu:function(){return a.clearContextMenu()}})},a.renderPreviewCardModal=function(){return a.state.previewCardModal?Object(r.jsx)(sr,{position:{x:0,y:0},completed:function(){a.props.clearPreviewCard(),a.setState({previewCardModal:!1})}}):null},a.renderTouchMenu=function(){return 0===a.props.cards.cards.length?null:Object(r.jsx)(Lr,{})},a.renderDeckImporter=function(){var e;if(!a.state.showDeckImporter)return null;var t=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=a.state.deckImporterPosition;if(!t||!o)throw new Error("Problem computing deck importer position");return Object(r.jsx)(sr,{position:{x:t.left+o.x,y:t.top+o.y},completed:a.clearDeckImporter,children:Object(r.jsx)(zo,{loadDeckId:a.handleImportDeck(a.getRelativePositionFromTarget(a.stage))})})},a.renderEncounterImporter=function(){var e;if(!a.state.showEncounterImporter)return null;var t=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=a.state.encounterImporterPosition;if(!t||!o)throw new Error("Problem computing deck importer position");var n={x:t.left+o.x,y:t.top+o.y};return Object(r.jsx)(sr,{position:n,completed:a.clearEncounterImporter,children:Object(r.jsx)(Ko,{currentGameType:a.props.currentGameType,loadCards:a.handleLoadEncounter(a.getRelativePositionFromTarget(a.stage))})})},a.renderCardSearch=function(){var e;if(!a.state.showCardSearch)return null;var t=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=a.state.cardSearchPosition;if(!t||!o)throw new Error("Problem computing card search position");var n={x:t.left+o.x,y:t.top+o.y};return a.state.cardStackForSearching?Object(r.jsx)(sr,{position:n,completed:a.clearCardSearch,children:Object(r.jsx)(Fo,{card:a.state.cardStackForSearching,cardSelected:a.handleCardSelectedFromCardStack(a.state.cardStackForSearching.id,n)})}):null},a.renderPeerConnector=function(){var e;if(!a.state.showPeerConnector)return null;var t=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=a.state.peerConnectorPosition;if(!t||!o)throw new Error("Problem computing peer connector position");var n={x:t.left+o.x,y:t.top+o.y};return a.state.showPeerConnector?Object(r.jsx)(sr,{position:n,completed:a.clearPeerConnector,children:Object(r.jsx)($o,{connect:a.handlePeerConnect})}):null},a.renderTokenModifier=function(){var e;if(!a.state.showTokenValueModifier)return null;var t=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),o=a.state.tokenValueModifierPosition;if(!t||!o)throw new Error("Problem computing token Modifier position");var n={x:t.left+o.x,y:t.top+o.y};return a.state.showTokenValueModifier&&a.state.tokenValueModifierProps?Object(r.jsx)(sr,{position:n,completed:a.clearTokenValueModifier,children:Object(r.jsx)(kr,{id:a.state.tokenValueModifierProps.id,tokenType:a.state.tokenValueModifierProps.tokenType,updated:function(e){a.props.adjustCounterToken(e),a.clearTokenValueModifier()}})}):null},a.handleLoadEncounter=function(e){return function(t){a.clearEncounterImporter(),t.forEach((function(t,o){a.props.addCardStack({position:{x:e.x+(je+10)*o,y:e.y},cardJsonIds:t})}))}},a.handleImportDeck=function(e){return function(t){a.clearDeckImporter(),a.props.fetchDecklistById({gameType:a.props.currentGameType,decklistId:t,position:e})}},a.handlePeerConnect=function(e){a.clearPeerConnector(),a.props.connectToRemoteGame(e)},a.handleCardSelectedFromCardStack=function(e,t){return function(o){a.clearCardSearch(),a.props.pullCardOutOfCardStack({cardStackId:e,jsonId:o,pos:t})}},a.clearContextMenu=function(){a.setState({showContextMenu:!1,contextMenuPosition:null,contextMenuItems:[]})},a.clearDeckImporter=function(){a.setState({showDeckImporter:!1,deckImporterPosition:null})},a.clearTokenValueModifier=function(){a.setState({showTokenValueModifier:!1,tokenValueModifierProps:null,tokenValueModifierPosition:null})},a.clearEncounterImporter=function(){a.setState({showEncounterImporter:!1,encounterImporterPosition:null})},a.clearCardSearch=function(){a.setState({showCardSearch:!1,cardSearchPosition:null,cardStackForSearching:null})},a.clearPeerConnector=function(){a.setState({showPeerConnector:!1,peerConnectorPosition:null})},a.handleStageClickOrTap=function(e){if(!a.state.showContextMenu){var t=a.getRelativePositionFromTarget(a.stage);(a.props.panMode||Oe(a.state.selectStartPos,t)<30)&&a.props.unselectAllCards()}},a.handleWheel=function(e){var t;if(e.evt.preventDefault(),a.stage){var o=a.props.gameState.stageZoom.x,r=null!==(t=a.stage.getPointerPosition())&&void 0!==t?t:{x:0,y:0},n=(r.x-a.stage.x())/o,s=(r.y-a.stage.y())/o,i=e.evt.deltaY<0?1.02*o:o/1.02;a.props.updateZoom({x:i,y:i});var d={x:r.x-n*i,y:r.y-s*i};a.props.updatePosition(d)}},a.handleCounterContextMenu=function(e){return function(t){var o,r;t.evt.preventDefault(),t.cancelBubble=!0;var n=a.props.counters.find((function(t){return t.id===e})),s=[{label:"Remove",action:function(){a.props.removeCounter(e)}},{label:"Reset",action:function(){var t;a.props.updateCounterValue({id:e,delta:-1*(null!==(t=null===n||void 0===n?void 0:n.value)&&void 0!==t?t:0)})}},{label:"Set Color",children:y.map((function(t){return{label:t,action:function(){a.props.updateCounterColor({id:e,newColor:t})}}}))}];a.setState({showContextMenu:!0,contextMenuPosition:null!==(o=null===(r=a.stage)||void 0===r?void 0:r.getPointerPosition())&&void 0!==o?o:null,contextMenuItems:s})}},a.handleCardContextMenu=function(e,t){var o,r,n;t.evt.preventDefault(),t.cancelBubble=!0;var s=a.props.cards.cards.find((function(t){return t.id===e}));a.props.selectCard({id:e,unselectOtherCards:!s||!s.selected});var i=a.props.cards.cards.find((function(t){return t.id===e})),d=(null===i||void 0===i||null===(o=i.cardStack)||void 0===o?void 0:o.length)||0,c=dr(a.props.cards.cards),l=[{label:"Flip",action:function(){a.props.flipCards()}}];d>1&&(l.push({label:"Shuffle",action:function(){a.props.shuffleStack()}}),l.push({label:"Find Specific Card",action:function(){var e,t;i&&a.setState({showCardSearch:!0,cardSearchPosition:null!==(e=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null,cardStackForSearching:i})}}));var u=at[a.props.currentGameType].tokens;u.stunned&&l.push({label:ir(E.Stunned,c)?u.stunned.menuRemoveText:u.stunned.menuText,action:function(){a.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:E.Stunned,value:!ir(E.Stunned,c)})}}),u.confused&&l.push({label:ir(E.Confused,c)?u.confused.menuRemoveText:u.confused.menuText,action:function(){a.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:E.Confused,value:!ir(E.Confused,c)})}}),u.tough&&l.push({label:ir(E.Tough,c)?u.tough.menuRemoveText:u.tough.menuText,action:function(){a.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:E.Tough,value:!ir(E.Tough,c)})}}),u.damage&&l.push({label:u.damage.menuText,action:function(){var e,t;a.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Damage},tokenValueModifierPosition:null!==(e=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}}),u.threat&&l.push({label:u.threat.menuText,action:function(){var e,t;a.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Threat},tokenValueModifierPosition:null!==(e=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}}),u.generic&&l.push({label:u.generic.menuText,action:function(){var e,t;a.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Generic},tokenValueModifierPosition:null!==(e=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}}),l.push({label:"Remove All Tokens",action:function(){a.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Damage,value:0}),a.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Threat,value:0}),a.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Generic,value:0})}});var h=at[a.props.currentGameType].modifiers;h.length>0&&l.push({label:"Modifiers",children:h.map((function(e){return{label:e.attributeName,children:[{label:"Add 1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,delta:1})}},{label:"Remove 1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,delta:-1})}},{label:"-3",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:-3})}},{label:"-2",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:-2})}},{label:"-1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:-1})}},{label:"0",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:0})}},{label:"1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:1})}},{label:"2",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:2})}},{label:"3",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:3})}}]}})).concat([{label:"Clear all modifiers",action:function(){a.props.clearAllModifiers({id:(null===i||void 0===i?void 0:i.id)||""})}}])}),a.setState({showContextMenu:!0,contextMenuPosition:null!==(r=null===(n=a.stage)||void 0===n?void 0:n.getPointerPosition())&&void 0!==r?r:null,contextMenuItems:l})},a.handleCardClick=function(e){return function(t,o,r){var n=o.evt.shiftKey||o.evt.metaKey||o.evt.ctrlKey;e.selected&&(n||a.props.multiselectMode)?a.props.toggleSelectCard(t):(a.props.selectCard({id:t,unselectOtherCards:!n&&!a.props.multiselectMode}),!r||n||a.props.multiselectMode||a.doubleTapTimer||a.state.showContextMenu||(a.doubleTapTimer=setTimeout((function(){var e;a.props.showRadialMenuAtPosition((null===(e=a.stage)||void 0===e?void 0:e.getPointerPosition())||{x:0,y:0}),a.doubleTapTimer=null}),200)))}},a.handleSelectAndExhaust=function(e,t){var o=t.evt.shiftKey||t.evt.metaKey||t.evt.ctrlKey;a.props.selectCard({id:e,unselectOtherCards:!o}),a.props.exhaustCard(e)},a.showOrToggleModalPreviewCard=function(e,t){a.doubleTapTimer&&(clearTimeout(a.doubleTapTimer),a.doubleTapTimer=null),a.props.gameState.previewCard&&a.props.gameState.previewCard.id===e?a.props.clearPreviewCard():(a.setState({previewCardModal:!0}),a.props.setPreviewCardId(e))},a.handleCardDragStart=function(e,t){var o=!1;if(!(a.props.cards.cards.filter((function(e){return e.selected&&e.controlledBy===C})).length>1)){var r=a.props.cards.cards.find((function(t){return t.id===e})),n=((null===r||void 0===r?void 0:r.cardStack)||[]).length>1;if(r&&n){var s={x:r.x+(r.exhausted?ye:je)/2,y:r.y-(r.exhausted?je:ye)/2};Oe(s,a.getRelativePositionFromTarget(a.stage))<50&&(o=!0)}}a.props.startCardMove({id:e,splitTopCard:o})},a.handleKeyPress=function(e){var t=e.ctrlKey||e.metaKey,o=e.key.toLocaleLowerCase(),r=parseInt(o);if("p"===o)a.props.togglePanMode();else if("f"===o)a.props.flipCards();else if("e"===o)a.props.exhaustCard();else if("s"===o)a.props.shuffleStack();else if(!Number.isNaN(r))if(t);else{var n=dr(a.props.cards.cards);1!==n.length?console.log("will not be drawing any cards because the number of selected stacks is "+n.length):a.props.drawCardsOutOfCardStack({cardStackId:n[0].id,numberToDraw:r})}},a.handleKeyDown=function(e){var t=e.key.toLocaleLowerCase(),o=parseInt(t);if((e.ctrlKey||e.metaKey)&&!Number.isNaN(o)){var r=at[a.props.currentGameType].tokens;switch(o){case 1:r.damage&&a.props.adjustCounterToken({tokenType:A.Damage,delta:1});break;case 2:r.threat&&a.props.adjustCounterToken({tokenType:A.Threat,delta:1});break;case 3:r.generic&&a.props.adjustCounterToken({tokenType:A.Generic,delta:1});break;case 4:r.damage&&a.props.adjustCounterToken({tokenType:A.Damage,delta:-1});break;case 5:r.threat&&a.props.adjustCounterToken({tokenType:A.Threat,delta:-1});break;case 6:r.generic&&a.props.adjustCounterToken({tokenType:A.Generic,delta:-1})}e.preventDefault()}e.shiftKey&&(e.ctrlKey||e.metaKey)&&"z"===e.key?a.props.redo():(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.preventDefault(),a.props.undo())},a.getRawPreviewCardPosition=function(e){var t,o,r=null!==(t=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==t?t:{x:0,y:0},n=window.innerWidth/2,s=window.innerHeight/2,i=e?Se:ke,d=e?ke:Se;return a.state.previewCardModal?{x:n,y:s}:r.x<n?{x:window.innerWidth-i/2,y:d/2}:{x:i/2,y:d/2}},a.getRelativePositionFromTarget=function(e,t){var o=e.getAbsoluteTransform().copy();o.invert();var r=t||e.getPointerPosition();return o.point(r)},a.handleMouseDown=function(e){if(e.evt instanceof MouseEvent&&0===e.evt.button||e.evt instanceof TouchEvent){var t=a.getRelativePositionFromTarget(a.stage);a.setState({selectStartPos:{x:t.x,y:t.y},selecting:!0})}return!1},a.getSelectionRectInfo=function(){var e=a.state.selectStartPos,t=a.state.selectRect;return{height:Math.abs(t.height),width:Math.abs(t.width),x:t.width<0?e.x+t.width:e.x,y:t.height<0?e.y+t.height:e.y}},a.handleMouseUp=function(e){if(a.state.drewASelectionRect){var t=a.getSelectionRectInfo(),o=a.props.cards.cards.reduce((function(e,o){return bo.boxBox(t.x,t.y,t.width,t.height,o.x-50,o.y-75,je,ye)&&e.push(o),e}),[]),r=e.evt.shiftKey||e.evt.metaKey||e.evt.ctrlKey;a.props.selectMultipleCards({ids:o.map((function(e){return e.id})),unselectOtherCards:!r})}return a.setState({drewASelectionRect:!1,selectRect:{height:0,width:0},selecting:!1}),!1},a.handleTouchStart=function(e){a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout((function(){a.handleContextMenu(e)}),750),a.props.panMode||a.handleMouseDown(e)},a.handleTouchMove=function(e){e.evt.preventDefault();var t=e.evt.touches[0],o=e.evt.touches[1];a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),t&&o?a.handleMultiTouch(t,o):a.handleMouseMove(e)},a.handleMultiTouch=function(e,t){if(a.stage){a.stage.isDragging()&&a.stage.stopDrag();var o={x:e.clientX,y:e.clientY},r={x:t.clientX,y:t.clientY};if(a.lastCenter){var n=_e(o,r),s=Oe(o,r);a.lastDist||(a.lastDist=s);var i=(n.x-a.stage.x())/a.props.gameState.stageZoom.x,d=(n.y-a.stage.y())/a.props.gameState.stageZoom.y,c=a.props.gameState.stageZoom.x*(s/a.lastDist);a.props.updateZoom({x:c,y:c});var l=n.x-a.lastCenter.x,u=n.y-a.lastCenter.y,h={x:n.x-i*c+l,y:n.y-d*c+u};a.props.updatePosition(h),a.lastDist=s,a.lastCenter=n}else a.lastCenter=_e(o,r)}},a.handleTouchEnd=function(e){a.lastDist=0,a.lastCenter=null,a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.props.panMode||a.handleMouseUp(e)},a.handleMouseMove=function(e){if(a.state.selecting){var t=a.getRelativePositionFromTarget(e.currentTarget);a.setState({drewASelectionRect:!0,selectRect:{height:t.y-a.state.selectStartPos.y,width:t.x-a.state.selectStartPos.x}})}e.cancelBubble=!0},a.handleContextMenu=function(e){var t,o;a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),e.evt.preventDefault(),e.cancelBubble=!0;var r=[{label:"Undo",action:a.props.undo},{label:"Redo",action:a.props.redo},{label:"Load Deck by ID",action:function(){var e,t;a.setState({showDeckImporter:!0,deckImporterPosition:null!==(e=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}},{label:"Load Deck from txt file",fileLoadedAction:function(e){var t,o;a.props.createDeckFromTxt({gameType:a.props.currentGameType,position:null!==(t=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==t?t:{x:0,y:0},txtContents:e})},fileUploader:!0},{label:"Load ".concat(at[a.props.currentGameType].encounterUiName),action:function(){var e,t;a.setState({showEncounterImporter:!0,encounterImporterPosition:null!==(e=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}},{label:"Create new counter",action:function(){var e;a.props.addNewCounter(null!==(e=a.getRelativePositionFromTarget(a.stage))&&void 0!==e?e:{x:0,y:0})}},{label:"Reset Game",action:a.props.resetApp},{label:"Quit Game",action:function(){a.props.quitGame(),a.props.resetApp()}},{label:"Connect to Remote Game",action:function(){var e,t;a.setState({showPeerConnector:!0,peerConnectorPosition:null!==(e=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==e?e:null})}},{label:"Request resync from Remote Game",action:a.props.requestResync},{label:"Peer id is ".concat(a.props.peerId),action:function(){var e;a.props.peerId&&Fr((e=a.props.peerId,"".concat(window.location.origin).concat(window.location.pathname,"?remote=").concat(e)))}},{label:"Copy game state as url",action:function(){a.props.generateGameStateUrl()}}];a.setState({showContextMenu:!0,contextMenuPosition:null!==(t=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==t?t:null,contextMenuItems:r})},a.getCardType=function(e){var t;if(0===Object.keys(a.props.cardsData).length)return"";var o=a.props.cardsData[e.cardStack[0].jsonId];return(null!==(t=null===o||void 0===o?void 0:o.typeCode)&&void 0!==t?t:"").toLocaleLowerCase()},a.getCardName=function(e){var t,o,r=e.faceup?e.cardStack[0]:e.cardStack[e.cardStack.length-1];return null!==(t=null===(o=a.props.cardsData[r.jsonId])||void 0===o?void 0:o.name)&&void 0!==t?t:""},a.getCardCode=function(e){var t,o,r,n=e.faceup?e.cardStack[0]:e.cardStack[e.cardStack.length-1];n||console.error("Could not get card in question for stack:",e);var s=null!==(t=null===n||void 0===n?void 0:n.jsonId)&&void 0!==t?t:"missing-id";return null!==(o=null===(r=a.props.cardsData[s])||void 0===r?void 0:r.code)&&void 0!==o?o:"code missing for ".concat(s)},a.getImgUrls=function(e){if(0===Object.keys(a.props.cardsData).length)return[];var t=[],o=a.props.cardsData[e.cardStack[0].jsonId];if(!o)return[];var r=o;if(r.images)return e.faceup?[r.images.front]:r.images.back?[r.images.back]:["encounter"===o.extraInfo.factionCode?"/card-game-playground/images/standard/encounter_card_back_"+a.props.currentGameType+".png":"/card-game-playground/images/standard/card_back_"+a.props.currentGameType+".png"];e.faceup||o.backLink||o.doubleSided?t=[a.generateLCGCDNImageUrl(o,e.faceup)]:(r=null,t=["encounter"===o.extraInfo.factionCode?"/card-game-playground/images/standard/encounter_card_back_"+a.props.currentGameType+".png":"/card-game-playground/images/standard/card_back_"+a.props.currentGameType+".png"]);var n="";r&&(e.faceup?n=r.code:r.backLink?n=r.backLink:r.doubleSided&&(n="".concat(r.code,"_double_sided_back")));var s=r?a.checkMissingImageMap(n):null;return s&&t.unshift(s),t},a.handleResize=function(){a.setState({stageHeight:window.innerHeight,stageWidth:window.innerWidth})},yo.a&&(yo.a.hitOnDragEnabled=!0),a.state={drewASelectionRect:!1,selectRect:{height:0,width:0},selectStartPos:{x:0,y:0},selecting:!1,showContextMenu:!1,contextMenuPosition:null,contextMenuItems:[],showDeckImporter:!1,deckImporterPosition:null,showEncounterImporter:!1,encounterImporterPosition:null,showCardSearch:!1,cardSearchPosition:null,cardStackForSearching:null,showPeerConnector:!1,peerConnectorPosition:null,showTokenValueModifier:!1,tokenValueModifierProps:null,tokenValueModifierPosition:null,playmatImage:null,playmatImageLoaded:!1,previewCardModal:!1,stageWidth:window.innerWidth,stageHeight:window.innerHeight},a}return Object(vo.a)(o,[{key:"componentDidMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({playmatImage:t,playmatImageLoaded:!0})},t.onerror=function(e){console.error(e)},t.src=at[this.props.currentGameType].backgroundImageLocation,this.props.loadCardsData(),this.props.allJsonData(""),window.addEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e,t,o=this;document.activeElement===document.body&&setTimeout((function(){var e=document.querySelector(".play-area");null===e||void 0===e||e.focus()}),0);var a=this.props.cards.cards.filter((function(e){return!e.dragging})).map((function(e){var t,a,n;return Object(r.jsx)(Ro,{currentGameType:o.props.currentGameType,code:o.getCardCode(e),name:o.getCardName(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:e.selected,dropTargetColor:null!==(a=o.props.playerColors[null===(n=o.props.dropTargetCardsById[e.id])||void 0===n?void 0:n.ownerRef])&&void 0!==a?a:"",dragging:e.dragging,shuffling:e.shuffling,handleDragStart:o.handleCardDragStart,handleDragMove:o.props.cardMove,handleDragEnd:o.props.endCardMove,handleDoubleClick:o.handleSelectAndExhaust,handleDoubleTap:o.showOrToggleModalPreviewCard,handleClick:o.handleCardClick(e),handleHover:o.props.setPreviewCardId,handleHoverLeave:o.props.clearPreviewCard,handleContextMenu:o.handleCardContextMenu,imgUrls:o.getImgUrls(e),typeCode:o.getCardType(e),faceup:e.faceup,numCardsInStack:e.cardStack.length,cardState:{stunned:e.statusTokens.stunned,confused:e.statusTokens.confused,tough:e.statusTokens.tough,tokens:{damage:0,threat:0,generic:0}}},e.id)})),n=this.props.cards.ghostCards.map((function(e){var t;return Object(r.jsx)(Ro,{currentGameType:o.props.currentGameType,name:o.getCardName(e),code:o.getCardCode(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:!1,dragging:!1,shuffling:!1,imgUrls:o.getImgUrls(e),typeCode:o.getCardType(e),faceup:e.faceup,isGhost:!0},"ghost".concat(e.id))})),s=this.props.cards.cards.filter((function(e){return e.dragging})).map((function(e){var t;return Object(r.jsx)(Ro,{currentGameType:o.props.currentGameType,name:o.getCardName(e),code:o.getCardCode(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:e.selected,dragging:e.dragging,shuffling:e.shuffling,handleDragStart:o.handleCardDragStart,handleDragMove:o.props.cardMove,handleDragEnd:o.props.endCardMove,imgUrls:o.getImgUrls(e),typeCode:o.getCardType(e),faceup:e.faceup,numCardsInStack:e.cardStack.length},e.id)})),i=this.props.cards.cards.some((function(e){return e.dragging&&e.controlledBy===C})),c=this.props.menuPreviewCard?[this.props.menuPreviewCard]:this.props.cards.cards.filter((function(e){return!!o.props.gameState.previewCard&&e.id===o.props.gameState.previewCard.id})),l=this.stage?c.filter((function(e){return!o.state.selecting&&!i})).map((function(e){var t,a,n=Do.includes(o.getCardType(e)),s=o.getImgUrls(e),i=o.getRawPreviewCardPosition(n),d=o.getRelativePositionFromTarget(o.stage,i),c=ke;return c*=(a=Math.min(Se,n?window.innerWidth:window.innerHeight))/Se,s.some((function(e){return-1!==e.indexOf("card_back")}))?null:Object(r.jsx)(Ro,{currentGameType:o.props.currentGameType,name:o.getCardName(e),code:o.getCardCode(e),selectedColor:null!==(t=o.props.playerColors[e.controlledBy])&&void 0!==t?t:"black",controlledBy:e.controlledBy,id:e.id,x:d.x,y:d.y,exhausted:n,fill:e.fill,selected:!1,dragging:!1,shuffling:!1,imgUrls:s,typeCode:o.getCardType(e),faceup:e.faceup,height:a/o.props.gameState.stageZoom.y,width:c/o.props.gameState.stageZoom.x,isPreview:!0},"preview".concat(e.id))})).filter((function(e){return null!==e})):[],u=this.state.playmatImageLoaded&&(null===(e=this.state.playmatImage)||void 0===e?void 0:e.naturalWidth)?2880/(null===(t=this.state.playmatImage)||void 0===t?void 0:t.naturalWidth):1;return Object(r.jsxs)("div",{className:"play-area",tabIndex:1,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,children:[Object(r.jsx)(jr,{}),this.renderEmptyMessage(),this.renderContextMenu(),this.renderPreviewCardModal(),this.renderTouchMenu(),this.renderDeckImporter(),this.renderEncounterImporter(),this.renderCardSearch(),this.renderPeerConnector(),this.renderTokenModifier(),Object(r.jsx)(d.b.Consumer,{children:function(e){var t,i,c=e.store;return Object(r.jsx)(jo.d,{ref:function(e){e&&(o.stage=e)},x:o.props.gameState.stagePosition.x,y:o.props.gameState.stagePosition.y,width:o.state.stageWidth,height:o.state.stageHeight,onClick:o.handleStageClickOrTap,onTap:o.handleStageClickOrTap,onMouseDown:o.props.panMode?o.noOp:o.handleMouseDown,onMouseUp:o.props.panMode?o.noOp:o.handleMouseUp,onMouseMove:o.props.panMode?o.noOp:o.handleMouseMove,onTouchStart:o.handleTouchStart,onTouchMove:o.handleTouchMove,onTouchEnd:o.handleTouchEnd,onContextMenu:o.handleContextMenu,scale:o.props.gameState.stageZoom,onWheel:o.handleWheel,draggable:o.props.panMode,onDragMove:o.noOp,onDragEnd:o.noOp,preventDefault:!0,children:Object(r.jsxs)(d.a,{store:c,children:[Object(r.jsx)(jo.b,{children:Object(r.jsx)(jo.c,{fill:o.state.playmatImageLoaded?void 0:"lightgray",scale:{x:u,y:u},width:o.state.playmatImageLoaded?null===(t=o.state.playmatImage)||void 0===t?void 0:t.naturalWidth:2880,height:o.state.playmatImageLoaded?null===(i=o.state.playmatImage)||void 0===i?void 0:i.naturalHeight:1440,fillPatternImage:o.state.playmatImageLoaded&&o.state.playmatImage?o.state.playmatImage:void 0})}),Object(r.jsx)(jo.b,{children:o.props.counters.map((function(e){return Object(r.jsx)(Uo,{id:e.id,pos:e.position,value:e.value,color:e.color,updateCounterValueBy:o.handleCounterValueUpdate(e.id),handleContextMenu:o.handleCounterContextMenu(e.id),onDragEnd:o.handleCounterDrag(e.id)},"".concat(e.id,"-counter"))}))}),Object(r.jsxs)(jo.b,{preventDefault:!0,children:[n.concat(a).concat(s),Object(r.jsx)(Xo,{currentGameType:o.props.currentGameType}),l]}),Object(r.jsx)(jo.b,{children:Object(r.jsx)(jo.c,{x:o.state.selectStartPos.x,y:o.state.selectStartPos.y,width:o.state.selectRect.width,height:o.state.selectRect.height,stroke:"yellow",strokeWidth:4})})]})})}})]})}},{key:"checkMissingImageMap",value:function(e){var t;return null!==(t=Mo[e])&&void 0!==t?t:null}},{key:"generateLCGCDNImageUrl",value:function(e,t){var o,r;if(!e)return"https://lcgcdn.s3.amazonaws.com/mc/NOPE.jpg";var a=e.code;!t&&e.backLink&&(a=e.backLink);for(var n=null!==(o=Ze[null!==(r=e.extraInfo.packCode)&&void 0!==r?r:""])&&void 0!==o?o:a.substring(0,2),s=a.substring(2);"0"===s[0];)s=s.substring(1);s=s.toLocaleUpperCase();var i="";return e.doubleSided&&(i=t?"A":"B"),"https://lcgcdn.s3.amazonaws.com/mc/MC".concat(n,"en_").concat(s).concat(i,".jpg")}}]),o}(a.Component),Gr=["ant.json","ant_encounter.json","bkw.json","bkw_encounter.json","cap.json","cap_encounter.json","core.json","core_encounter.json","drax.json","drax_encounter.json","drs.json","drs_encounter.json","gam.json","gam_encounter.json","gmw.json","gmw_encounter.json","gob_encounter.json","hlk.json","hlk_encounter.json","msm.json","msm_encounter.json","qsv.json","qsv_encounter.json","ron_encounter.json","scw.json","scw_encounter.json","stld.json","stld_encounter.json","thor.json","thor_encounter.json","toafk_encounter.json","trors.json","trors_encounter.json","twc_encounter.json","wsp.json","wsp_encounter.json"],Qr=["A Journey To Rhosgobel.json","A Journey to Rhosgobel Nightmare.json","A Knife in the Dark Nightmare.json","A Shadow in the East.json","A Shadow of the Past Nightmare.json","A Storm on Cobas Haven Nightmare.json","A Storm on Cobas Haven.json","Across the Ettenmoors Nightmare.json","Across the Ettenmoors.json","Among the Outlaws.json","Assault on Osgiliath Nightmare.json","Assault on Osgiliath.json","Attack on Dol Guldur.json","Beneath the Sands.json","Breaking of the Fellowship Nightmare.json","Celebrimbor's Secret Nightmare.json","Celebrimbor's Secret.json","Challenge of the Wainriders.json","Children of Eorl.json","Conflict at the Carrock Nightmare.json","Conflict at the Carrock.json","Core Set.json","Deadmen's Dike Nightmare.json","Dungeons Deep and Caverns Dim Nightmare.json","Encounter at Amon D\xeen Nightmare.json","Encounter at Amon D\xeen.json","Escape From Dol Guldur Nightmare.json","Escape from Khazad-d\xfbm.json","Escape from Mount Gram Nightmare.json","Escape from Mount Gram.json","Fire in the Night.json","First Age.json","Flies and Spiders Nightmare.json","Flight from Moria Nightmare.json","Flight of the Stormcaller Nightmare.json","Flight of the Stormcaller.json","Flight to the Ford Nightmare.json","Fog on the Barrow-downs.json","Foundations of Stone Nightmare.json","Foundations of Stone.json","Heirs of N\xfamenor.json","Helm's Deep Nightmare.json","Into Fangorn Nightmare.json","Into Ithilien Nightmare.json","Into the Pit Nightmare.json","Intruders in Chetwood Nightmare.json","Journey Along the Anduin Nightmare.json","Journey in the Dark Nightmare.json","Journey to the Cross-roads Nightmare.json","Khazad-d\xfbm.json","Mount Gundabad.json","Murder at the Prancing Pony.json","Over the Misty Mountains Grim Nightmare.json","Passage Through Mirkwood Nightmare.json","Peril in Pelargir Nightmare.json","Race Across Harad.json","Raid on the Grey Havens Nightmare.json","Return to Mirkwood Nightmare.json","Return to Mirkwood.json","Road to Rivendell Nightmare.json","Road to Rivendell.json","Roam Across Rhovanion.json","Shadow and Flame Nightmare.json","Shadow and Flame.json","Shelob's Lair Nightmare.json","Temple of the Deceived Nightmare.json","Temple of the Deceived.json","The Aldburg Plot.json","The Antlered Crown Nightmare.json","The Antlered Crown.json","The Battle of Carn D\xfbm Nightmare.json","The Battle of Carn D\xfbm.json","The Battle of Five Armies Nightmare.json","The Battle of Lake-town.json","The Betrayal of M\xeem.json","The Black Riders.json","The Black Serpent.json","The Blood of Gondor Nightmare.json","The Blood of Gondor.json","The City of Corsairs Nightmare.json","The City of Corsairs.json","The City of Ulfast.json","The Crossings of Poros.json","The Dead Marshes Nightmare.json","The Dead Marshes.json","The Dread Realm Nightmare.json","The Dread Realm.json","The Drowned Ruins Nightmare.json","The Drowned Ruins.json","The Dr\xfaadan Forest Nightmare.json","The Dr\xfaadan Forest.json","The Dungeons of Cirith Gurat.json","The Dunland Trap Nightmare.json","The Dunland Trap.json","The Fall of Nargothrond.json","The Fate of N\xfamenor Nightmare.json","The Fate of Wilderland.json","The Flame of the West.json","The Fords of Isen Nightmare.json","The Fortress of Nurn.json","The Ghost of Framsburg.json","The Grey Havens.json","The Hills of Emyn Muil Nightmare.json","The Hills of Emyn Muil.json","The Hobbit: On the Doorstep.json","The Hobbit: Over Hill and Under Hill.json","The Hunt for Gollum Nightmare.json","The Hunt for Gollum.json","The Hunt for the Dreadnaught.json","The Land of Shadow.json","The Land of Sorrow.json","The Lonely Mountain Nightmare.json","The Long Dark Nightmare.json","The Long Dark.json","The Lost Realm.json","The Massing at Osgiliath.json","The Mines of Moria.json","The Morgul Vale Nightmare.json","The Morgul Vale.json","The Mountain of Fire.json","The M\xfbmakil.json","The N\xeen-in-Eilph Nightmare.json","The N\xeen-in-Eilph.json","The Old Forest.json","The Passage of the Marshes Nightmare.json","The Redhorn Gate Nightmare.json","The Redhorn Gate.json","The Ring Goes South Nightmare.json","The Road Darkens.json","The Road to Isengard Nightmare.json","The Ruins of Belegost.json","The Sands of Harad.json","The Seventh Level Nightmare.json","The Siege of Ann\xfaminas.json","The Siege of Cair Andros Nightmare.json","The Steward's Fear Nightmare.json","The Steward's Fear.json","The Stone of Erech.json","The Thing in the Depths Nightmare.json","The Thing in the Depths.json","The Three Trials Nightmare.json","The Three Trials.json","The Treachery of Rhudaur Nightmare.json","The Treachery of Rhudaur.json","The Treason of Saruman.json","The Uruk-hai Nightmare.json","The Voice of Isengard.json","The Wastes of Eriador Nightmare.json","The Wastes of Eriador.json","The Watcher in the Water Nightmare.json","The Watcher in the Water.json","The Weather Hills Nightmare.json","The Wilds of Rhovanion.json","The Withered Heath.json","The Wizard's Quest.json","The Woodland Realm.json","To Catch an Orc Nightmare.json","Trial Upon the Marches.json","Trouble in Tharbad Nightmare.json","Trouble in Tharbad.json","Two-Player Limited Edition Starter.json","Under the Ash Mountains.json","Voyage Across Belegaer Nightmare.json","We Must Away, Ere Break of Day Nightmare.json","Wrath and Ruin.json"],Wr=function(){var e=Object(Ie.a)(Pe.a.mark((function e(t){var o;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("/card-game-playground/json_data/"+t);case 2:return o=e.sent,e.abrupt("return",{res:o,packCode:t.split(".json")[0]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hr=function(){var e=Object(Ie.a)(Pe.a.mark((function e(t){var o;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("/card-game-playground/json_data/"+t);case 2:return o=e.sent,e.abrupt("return",{res:o,packCode:t.split(".json")[0]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ur=function(){var e=Object(Ie.a)(Pe.a.mark((function e(t){var o;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("/card-game-playground/json_data/scenarios/"+t+".json");case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zr=Object(d.c)((function(e){return{playerColors:tr(e),cards:ze(e),cardsData:Le(e),panMode:Ke(e),multiselectMode:Je(e),gameState:er(e),counters:Zo(e),peerId:or(e),dropTargetCardsById:qe(e),menuPreviewCard:nr(e)}}),{cardMove:It,endCardMove:Dt,exhaustCard:Pt,loadCardsData:se,allJsonData:function(){return function(){var e=Object(Ie.a)(Pe.a.mark((function e(t){return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Gr.map((function(e){return Wr(e)})));case 2:return e.sent.forEach((function(e){200===e.res.status?t(ie({packType:u.MarvelChampions,pack:e.res.data,pack_code:e.packCode})):console.error("Failed to load some json data")})),e.next=6,Promise.all(Qr.map((function(e){return Hr(e)})));case 6:return e.sent.forEach((function(e){200===e.res.status?t(ie({packType:u.LordOfTheRingsLivingCardGame,pack:e.res.data,pack_code:e.packCode})):console.error("Failed to load some json data")})),e.next=10,Promise.all(_.map((function(e){return Ur(e.Title)})));case 10:e.sent.forEach((function(e){200===e.status?t(de({setCode:e.data.Slug,cards:e.data.AllCards})):console.error("Failed to load some json data")}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},selectCard:Ot,unselectCard:_t,toggleSelectCard:Mt,selectMultipleCards:Nt,startCardMove:function(e){return function(t){var o=Object(D.a)(Object(D.a)({},e),{},{splitCardId:Object(T.a)()});t(pe(o))}},unselectAllCards:Rt,togglePanMode:Et,flipCards:Lt,shuffleStack:nt,fetchDecklistById:it,updateZoom:G,updatePosition:Q,resetApp:M,addCardStack:function(e){return function(t){var o=Object(D.a)(Object(D.a)({},e),{},{id:Object(T.a)()});t(le(o))}},toggleToken:Ft,adjustCounterToken:Bt,pullCardOutOfCardStack:function(e){return function(t){var o=Object(D.a)(Object(D.a)({},e),{},{id:Object(T.a)()});t(ue(o))}},addNewCounter:function(e){return function(t){var o={pos:e,id:Object(T.a)()};t(Ut(o))}},updateCounterValue:Zt,removeCounter:Yt,moveCounter:Xt,connectToRemoteGame:W,requestResync:z,undo:g.ActionCreators.undo,redo:g.ActionCreators.redo,drawCardsOutOfCardStack:st,setPreviewCardId:V,clearPreviewCard:K,quitGame:Y,updateCounterColor:eo,createDeckFromTxt:function(e){return function(t,o){if(e.gameType===u.MarvelChampions){var r=Be(o()),a=Ge(o());t(ge(dt(function(e,t,o,r){var a=r.split("\n").map((function(e){return e.trim()})).filter((function(e){return!!e})),n="",s=a.findIndex((function(e){return e.toLocaleLowerCase().startsWith("pack")}));-1!==s&&(n=a[s-1]);var i=e[n];if(!i)throw new Error("Could not find hero with name ".concat(n));var d=/^\dx/,c=a.filter((function(e){var t;return 0===(null===(t=e.match(d))||void 0===t?void 0:t.index)})),l={};return c.forEach((function(e){var o=parseInt(e[0]);if(Number.isNaN(o))throw new Error("Could not get number from txt file for card");var r=e.split(d)[1].split("(")[0].trim(),a=t[r];l[a.code]=o})),console.log(n),{data:{investigator_code:i.code,slots:l}}}(r,a,e.position,e.txtContents),o(),{gameType:e.gameType,decklistId:-1,position:e.position})))}}},generateGameStateUrl:function(){return function(e,t){var o=t(),r=o.liveState.present.cards.cards,a=o.liveState.present.counters,n=o.game.activeGameType,s=ut.a(JSON.stringify(r)),i=ut.a(JSON.stringify(a));Fr("".concat("".concat(window.location.origin).concat(window.location.pathname),"?gameType=").concat(n,"&cards=").concat(s,"&counters=").concat(i))}},showRadialMenuAtPosition:X,adjustModifier:Qt,clearAllModifiers:Wt})(Br),Vr=(o(249),o(290)),Kr=o(286),Jr=o(292),qr=function(e){return Object(r.jsxs)("div",{className:"game-picker",children:[Object(r.jsx)("h1",{children:"Card Game Playground"}),Object(r.jsxs)(Kr.a,{className:"select",children:[Object(r.jsx)(Jr.a,{id:"game-picker-label",children:"Select Game"}),Object(r.jsx)(Vr.a,{id:"game-picker",labelId:"game-picker-label",onChange:function(t){e.updateActiveGameType(t.target.value)},children:Object.entries(u).map((function(e){var t=Object(j.a)(e,2),o=t[0],a=t[1],n=o.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return Object(r.jsx)(Go.a,{value:a,children:n})}))})]})]})},Zr=function(e){var t=e.clearQueryParams;return Object(a.useEffect)((function(){t()}),[t]),e.activeGameType?Object(r.jsx)(zr,{currentGameType:e.activeGameType}):qr(e)},Yr=Object(d.c)((function(e){return{activeGameType:rr(e)}}),{updateActiveGameType:Z,clearQueryParams:function(){return function(){new URLSearchParams(window.location.search).get("gameType")&&window.history.replaceState({},document.title,window.location.pathname||"/")}}})(Zr),Xr=function(){console.log("configuring store. NODE_ENV is production");var e=Object(m.a)({reducer:ro,middleware:po,devTools:!1});return e.subscribe(p()((function(){!function(e){var t=["cardsData"];try{Object.entries(e).forEach((function(e){var o=Object(j.a)(e,2),r=o[0],a=o[1];if(!t.includes(r)){var n=JSON.stringify(a);localStorage.setItem(r,n)}}))}catch(o){console.error("Error writing state to local storage")}}(e.getState())}),1e3)),e}();i.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(d.a,{store:Xr,children:Object(r.jsx)(Yr,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/card-game-playground",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/card-game-playground","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(o){var r=o.headers.get("content-type");404===o.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):l(t,e)}))}}()},97:function(e){e.exports=JSON.parse('[{"Title":"Passage Through Mirkwood","Slug":"Passage-Through-Mirkwood","Product":"Core Set","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey Along the Anduin","Slug":"Journey-Along-the-Anduin","Product":"Core Set","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Dol Guldur","Slug":"Escape-from-Dol-Guldur","Product":"Core Set","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Oath","Slug":"The-Oath","Product":"Two-Player Limited Edition Starter","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Caves of Nibin-D\xfbm","Slug":"The-Caves-of-Nibin-D\xfbm","Product":"Two-Player Limited Edition Starter","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hunt for Gollum","Slug":"The-Hunt-for-Gollum","Product":"The Hunt for Gollum","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Conflict at the Carrock","Slug":"Conflict-at-the-Carrock","Product":"Conflict at the Carrock","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Journey to Rhosgobel","Slug":"A-Journey-to-Rhosgobel","Product":"A Journey to Rhosgobel","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hills of Emyn Muil","Slug":"The-Hills-of-Emyn-Muil","Product":"The Hills of Emyn Muil","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dead Marshes","Slug":"The-Dead-Marshes","Product":"The Dead Marshes","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Return to Mirkwood","Slug":"Return-to-Mirkwood","Product":"Return to Mirkwood","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into the Pit","Slug":"Into-the-Pit","Product":"Khazad-d\xfbm","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Seventh Level","Slug":"The-Seventh-Level","Product":"Khazad-d\xfbm","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight from Moria","Slug":"Flight-from-Moria","Product":"Khazad-d\xfbm","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Redhorn Gate","Slug":"The-Redhorn-Gate","Product":"The Redhorn Gate","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Road to Rivendell","Slug":"Road-to-Rivendell","Product":"Road to Rivendell","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Watcher in the Water","Slug":"The-Watcher-in-the-Water","Product":"The Watcher in the Water","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Long Dark","Slug":"The-Long-Dark","Product":"The Long Dark","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Foundations of Stone","Slug":"Foundations-of-Stone","Product":"Foundations of Stone","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Shadow and Flame","Slug":"Shadow-and-Flame","Product":"Shadow and Flame","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Peril in Pelargir","Slug":"Peril-in-Pelargir","Product":"Heirs of N\xfamenor","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into Ithilien","Slug":"Into-Ithilien","Product":"Heirs of N\xfamenor","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Cair Andros","Slug":"The-Siege-of-Cair-Andros","Product":"Heirs of N\xfamenor","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Steward\'s Fear","Slug":"The-Steward\'s-Fear","Product":"The Steward\'s Fear","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dr\xfaadan Forest","Slug":"The-Dr\xfaadan-Forest","Product":"The Dr\xfaadan Forest","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Encounter at Amon D\xeen","Slug":"Encounter-at-Amon-D\xeen","Product":"Encounter at Amon D\xeen","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Assault on Osgiliath","Slug":"Assault-on-Osgiliath","Product":"Assault on Osgiliath","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Blood of Gondor","Slug":"The-Blood-of-Gondor","Product":"The Blood of Gondor","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Morgul Vale","Slug":"The-Morgul-Vale","Product":"The Morgul Vale","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fords of Isen","Slug":"The-Fords-of-Isen","Product":"The Voice of Isengard","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"To Catch an Orc","Slug":"To-Catch-an-Orc","Product":"The Voice of Isengard","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into Fangorn","Slug":"Into-Fangorn","Product":"The Voice of Isengard","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dunland Trap","Slug":"The-Dunland-Trap","Product":"The Dunland Trap","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Three Trials","Slug":"The-Three-Trials","Product":"The Three Trials","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Trouble in Tharbad","Slug":"Trouble-in-Tharbad","Product":"Trouble in Tharbad","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The N\xeen-in-Eilph","Slug":"The-N\xeen-in-Eilph","Product":"The N\xeen-in-Eilph","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Celebrimbor\'s Secret","Slug":"Celebrimbor\'s-Secret","Product":"Celebrimbor\'s Secret","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Antlered Crown","Slug":"The-Antlered-Crown","Product":"The Antlered Crown","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Intruders in Chetwood","Slug":"Intruders-in-Chetwood","Product":"The Lost Realm","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Weather Hills","Slug":"The-Weather-Hills","Product":"The Lost Realm","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Deadmen\'s Dike","Slug":"Deadmen\'s-Dike","Product":"The Lost Realm","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Wastes of Eriador","Slug":"The-Wastes-of-Eriador","Product":"The Wastes of Eriador","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Mount Gram","Slug":"Escape-from-Mount-Gram","Product":"Escape from Mount Gram","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Across the Ettenmoors","Slug":"Across-the-Ettenmoors","Product":"Across the Ettenmoors","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Treachery of Rhudaur","Slug":"The-Treachery-of-Rhudaur","Product":"Treachery of Rhudaur","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Carn D\xfbm","Slug":"The-Battle-of-Carn-D\xfbm","Product":"The Battle of Carn D\xfbm","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dread Realm","Slug":"The-Dread-Realm","Product":"The Dread Realm","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Voyage Across Belegaer","Slug":"Voyage-Across-Belegaer","Product":"The Grey Havens","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fate of N\xfamenor","Slug":"The-Fate-of-N\xfamenor","Product":"The Grey Havens","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Raid on the Grey Havens","Slug":"Raid-on-the-Grey-Havens","Product":"The Grey Havens","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight of the Stormcaller","Slug":"Flight-of-the-Stormcaller","Product":"Flight of the Stormcaller","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Thing in the Depths","Slug":"The-Thing-in-the-Depths","Product":"The Thing in the Depths","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Temple of the Deceived","Slug":"Temple-of-the-Deceived","Product":"Temple of the Deceived","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Drowned Ruins","Slug":"The-Drowned-Ruins","Product":"The Drowned Ruins","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Storm on Cobas Haven","Slug":"A-Storm-on-Cobas-Haven","Product":"A Storm on Cobas Haven","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The City of Corsairs","Slug":"The-City-of-Corsairs","Product":"The City of Corsairs","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Umbar","Slug":"Escape-from-Umbar","Product":"The Sands of Harad","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Desert Crossing","Slug":"Desert-Crossing","Product":"The Sands of Harad","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Long Arm of Mordor","Slug":"The-Long-Arm-of-Mordor","Product":"The Sands of Harad","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The M\xfbmakil","Slug":"The-M\xfbmakil","Product":"The M\xfbmakil","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Race Across Harad","Slug":"Race-Across-Harad","Product":"Race Across Harad","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Beneath the Sands","Slug":"Beneath-the-Sands","Product":"Beneath the Sands","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Black Serpent","Slug":"The-Black-Serpent","Product":"The Black Serpent","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dungeons of Cirith Gurat","Slug":"The-Dungeons-of-Cirith-Gurat","Product":"The Dungeons of Cirith Gurat","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Crossings of Poros","Slug":"The-Crossings-of-Poros","Product":"The Crossings of Poros","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey Up the Anduin","Slug":"Journey-Up-the-Anduin","Product":"The Wilds of Rhovanion","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Lost in Mirkwood","Slug":"Lost-in-Mirkwood","Product":"The Wilds of Rhovanion","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The King\'s Quest","Slug":"The-King\'s-Quest","Product":"The Wilds of Rhovanion","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Withered Heath","Slug":"The-Withered-Heath","Product":"The Withered Heath","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Roam Across Rhovanion","Slug":"Roam-Across-Rhovanion","Product":"Roam Across Rhovanion","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Fire in the Night","Slug":"Fire-in-the-Night","Product":"Fire in the Night","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ghost of Framsburg","Slug":"The-Ghost-of-Framsburg","Product":"The Ghost of Framsburg","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Mount Gundabad","Slug":"Mount-Gundabad","Product":"Mount Gundabad","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fate of Wilderland","Slug":"The-Fate-of-Wilderland","Product":"The Fate of Wilderland","Number":9,"QuestCards":[],"ScenarioCards":[]},{"Title":"The River Running","Slug":"The-River-Running","Product":"A Shadow in the East","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Danger in Dorwinion","Slug":"Danger-in-Dorwinion","Product":"A Shadow in the East","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Temple of Doom","Slug":"Temple-of-Doom","Product":"A Shadow in the East","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Wrath and Ruin","Slug":"Wrath-and-Ruin","Product":"Wrath and Ruin","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The City of Ulfast","Slug":"The-City-of-Ulfast","Product":"The City of Ulfast","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Challenge of the Wainriders","Slug":"Challenge-of-the-Wainriders","Product":"Challenge of the Wainriders","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Under the Ash Mountains","Slug":"Under-the-Ash-Mountains","Product":"Under the Ash Mountains","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Land of Sorrow","Slug":"The-Land-of-Sorrow","Product":"The Land of Sorrow","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fortress of Nurn","Slug":"The-Fortress-of-Nurn","Product":"The Fortress of Nurn","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"We Must Away, Ere Break of Day","Slug":"We-Must-Away,-Ere-Break-of-Day","Product":"The Hobbit: Over Hill and Under Hill","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Over the Misty Mountains Grim","Slug":"Over-the-Misty-Mountains-Grim","Product":"The Hobbit: Over Hill and Under Hill","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Dungeons Deep and Caverns Dim","Slug":"Dungeons-Deep-and-Caverns-Dim","Product":"The Hobbit: Over Hill and Under Hill","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flies and Spiders","Slug":"Flies-and-Spiders","Product":"The Hobbit: On the Doorstep","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Lonely Mountain","Slug":"The-Lonely-Mountain","Product":"The Hobbit: On the Doorstep","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Five Armies","Slug":"The-Battle-of-Five-Armies","Product":"The Hobbit: On the Doorstep","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Shadow of the Past","Slug":"A-Shadow-of-the-Past","Product":"The Black Riders","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Knife in the Dark","Slug":"A-Knife-in-the-Dark","Product":"The Black Riders","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight to the Ford","Slug":"Flight-to-the-Ford","Product":"The Black Riders","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ring Goes South","Slug":"The-Ring-Goes-South","Product":"The Road Darkens","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey in the Dark","Slug":"Journey-in-the-Dark","Product":"The Road Darkens","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Breaking of the Fellowship","Slug":"Breaking-of-the-Fellowship","Product":"The Road Darkens","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Uruk-hai","Slug":"The-Uruk-hai","Product":"The Treason of Saruman","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Helm\'s Deep","Slug":"Helm\'s-Deep","Product":"The Treason of Saruman","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Road to Isengard","Slug":"The-Road-to-Isengard","Product":"The Treason of Saruman","Number":9,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Passage of the Marshes","Slug":"The-Passage-of-the-Marshes","Product":"The Land of Shadow","Number":10,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey to the Cross-roads","Slug":"Journey-to-the-Cross-roads","Product":"The Land of Shadow","Number":11,"QuestCards":[],"ScenarioCards":[]},{"Title":"Shelob\'s Lair","Slug":"Shelob\'s-Lair","Product":"The Land of Shadow","Number":12,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Passing of the Grey Company","Slug":"The-Passing-of-the-Grey-Company","Product":"The Flame of the West","Number":13,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Gondor","Slug":"The-Siege-of-Gondor","Product":"The Flame of the West","Number":14,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of the Pelennor Fields","Slug":"The-Battle-of-the-Pelennor-Fields","Product":"The Flame of the West","Number":15,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Tower of Cirith Ungol","Slug":"The-Tower-of-Cirith-Ungol","Product":"The Mountain of Fire","Number":16,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Black Gate Opens","Slug":"The-Black-Gate-Opens","Product":"The Mountain of Fire","Number":17,"QuestCards":[],"ScenarioCards":[]},{"Title":"Mount Doom","Slug":"Mount-Doom","Product":"The Mountain of Fire","Number":18,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Massing at Osgiliath","Slug":"The-Massing-at-Osgiliath","Product":"2011","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Lake-town","Slug":"The-Battle-of-Lake-town","Product":"2012","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Stone of Erech","Slug":"The-Stone-of-Erech","Product":"2013","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Old Forest","Slug":"The-Old-Forest","Product":"2014","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ruins of Belegost","Slug":"The-Ruins-of-Belegost","Product":"2015","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Fog on the Barrow-downs","Slug":"Fog-on-the-Barrow-downs","Product":"2014","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Murder at the Prancing Pony","Slug":"Murder-at-the-Prancing-Pony","Product":"2015","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Ann\xfaminas","Slug":"The-Siege-of-Ann\xfaminas","Product":"2016","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Attack on Dol Guldur","Slug":"Attack-on-Dol-Guldur","Product":"2017","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hunt for the Dreadnaught","Slug":"The-Hunt-for-the-Dreadnaught","Product":"The Hunt for the Dreadnaught","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Hunting of the Wolf","Slug":"Hunting-of-the-Wolf","Product":"First Age","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Isle of Werewolves","Slug":"The-Isle-of-Werewolves","Product":"First Age","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Seat of Morgoth","Slug":"The-Seat-of-Morgoth","Product":"First Age","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Trial Upon the Marches","Slug":"Trial-Upon-the-Marches","Product":"Trial Upon the Marches","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Among the Outlaws","Slug":"Among-the-Outlaws","Product":"Among the Outlaws","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Betrayal of M\xeem","Slug":"The-Betrayal-of-M\xeem","Product":"The Betrayal of M\xeem","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fall of Nargothrond","Slug":"The-Fall-of-Nargothrond","Product":"The Fall of Nargothrond","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Ambush at Erelas","Slug":"Ambush-at-Erelas","Product":"Children of Eorl","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle for the Beacon","Slug":"The-Battle-for-the-Beacon","Product":"Children of Eorl","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Horse Lord\'s Ire","Slug":"The-Horse-Lord\'s-Ire","Product":"Children of Eorl","Number":3,"QuestCards":[],"ScenarioCards":[]}]')}},[[250,1,2]]]);
//# sourceMappingURL=main.40d21d1e.chunk.js.map